require=function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){(function(n){"use strict";function r(e,t){if(e===t)return 0;var n=e.length,r=t.length;for(var i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return n.Buffer&&typeof n.Buffer.isBuffer=="function"?n.Buffer.isBuffer(e):e!=null&&!!e._isBuffer}function f(e){return Object.prototype.toString.call(e)}function l(e){return i(e)?!1:typeof n.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?e instanceof DataView?!0:e.buffer&&e.buffer instanceof ArrayBuffer?!0:!1:!1}function p(e){if(!s.isFunction(e))return;if(a)return e.name;var t=e.toString(),n=t.match(h);return n&&n[1]}function d(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function v(e){if(a||!s.isFunction(e))return s.inspect(e);var t=p(e),n=t?": "+t:"";return"[Function"+n+"]"}function m(e){return d(v(e.actual),128)+" "+e.operator+" "+d(v(e.expected),128)}function g(e,t,n,r,i){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function y(e,t){e||g(e,!0,t,"==",c.ok)}function b(e,t,n,o){if(e===t)return!0;if(i(e)&&i(t))return r(e,t)===0;if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(e!==null&&typeof e=="object"||t!==null&&typeof t=="object"){if(!l(e)||!l(t)||f(e)!==f(t)||e instanceof Float32Array||e instanceof Float64Array){if(i(e)!==i(t))return!1;o=o||{actual:[],expected:[]};var u=o.actual.indexOf(e);return u!==-1&&u===o.expected.indexOf(t)?!0:(o.actual.push(e),o.expected.push(t),E(e,t,n,o))}return r(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}return n?e===t:e==t}function w(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function E(e,t,n,r){if(e===null||e===undefined||t===null||t===undefined)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=w(e),o=w(t);if(i&&!o||!i&&o)return!1;if(i)return e=u.call(e),t=u.call(t),b(e,t,n);var a=C(e),f=C(t),l,c;if(a.length!==f.length)return!1;a.sort(),f.sort();for(c=a.length-1;c>=0;c--)if(a[c]!==f[c])return!1;for(c=a.length-1;c>=0;c--){l=a[c];if(!b(e[l],t[l],n,r))return!1}return!0}function S(e,t,n){b(e,t,!0)&&g(e,t,n,"notDeepStrictEqual",S)}function x(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch(n){}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function T(e){var t;try{e()}catch(n){t=n}return t}function N(e,t,n,r){var i;if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(r=n,n=null),i=T(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&g(i,n,"Missing expected exception"+r);var o=typeof r=="string",u=!e&&s.isError(i),a=!e&&i&&!n;(u&&o&&x(i,n)||a)&&g(i,n,"Got unwanted exception"+r);if(e&&i&&n&&!x(i,n)||!e&&i)throw i}var s=e("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a=function(){return function(){}.name==="foo"}(),c=t.exports=y,h=/\s*function\s+([^\(\s]*)\s*/;c.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=m(this),this.generatedMessage=!0);var n=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,s=p(n),o=i.indexOf("\n"+s);if(o>=0){var u=i.indexOf("\n",o+1);i=i.substring(u+1)}this.stack=i}}},s.inherits(c.AssertionError,Error),c.fail=g,c.ok=y,c.equal=function(t,n,r){t!=n&&g(t,n,r,"==",c.equal)},c.notEqual=function(t,n,r){t==n&&g(t,n,r,"!=",c.notEqual)},c.deepEqual=function(t,n,r){b(t,n,!1)||g(t,n,r,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(t,n,r){b(t,n,!0)||g(t,n,r,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(t,n,r){b(t,n,!1)&&g(t,n,r,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=S,c.strictEqual=function(t,n,r){t!==n&&g(t,n,r,"===",c.strictEqual)},c.notStrictEqual=function(t,n,r){t===n&&g(t,n,r,"!==",c.notStrictEqual)},c.throws=function(e,t,n){N(!0,e,t,n)},c.doesNotThrow=function(e,t,n){N(!1,e,t,n)},c.ifError=function(e){if(e)throw e};var C=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"util/":140}],2:[function(e,t,n){"use strict";function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return e[t-2]==="="?2:e[t-1]==="="?1:0}function l(e){return e.length*3/4-f(e)}function c(e){var t,n,r,o,u,a=e.length;o=f(e),u=new s(a*3/4-o),n=o>0?a-4:a;var l=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],u[l++]=r>>16&255,u[l++]=r>>8&255,u[l++]=r&255;return o===2?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,u[l++]=r&255):o===1&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,u[l++]=r>>8&255,u[l++]=r&255),u}function h(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[e&63]}function p(e,t,n){var r,i=[];for(var s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(h(r));return i.join("")}function d(e){var t,n=e.length,i=n%3,s="",o=[],u=16383;for(var a=0,f=n-i;a<f;a+=u)o.push(p(e,a,a+u>f?f:a+u));return i===1?(t=e[n-1],s+=r[t>>2],s+=r[t<<4&63],s+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],s+=r[t>>10],s+=r[t>>4&63],s+=r[t<<2&63],s+="="),o.push(s),o.join("")}n.byteLength=l,n.toByteArray=c,n.fromByteArray=d;var r=[],i=[],s=typeof Uint8Array!="undefined"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var u=0,a=o.length;u<a;++u)r[u]=o[u],i[o.charCodeAt(u)]=u;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],3:[function(e,t,n){(function(t){"use strict";function i(e,n){return n===void 0&&(n="utf8"),t.isBuffer(e)?u(e.toString("base64")):u((new t(e,n)).toString("base64"))}function s(e,n){return n===void 0&&(n="utf8"),(new t(o(e),"base64")).toString(n)}function o(e){return e=e.toString(),r.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function u(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a(e){return new t(o(e),"base64")}var r=e("./pad-string"),f=i;f.encode=i,f.decode=s,f.toBase64=o,f.fromBase64=u,f.toBuffer=a,Object.defineProperty(n,"__esModule",{value:!0}),n.default=f}).call(this,e("buffer").Buffer)},{"./pad-string":4,buffer:9}],4:[function(e,t,n){(function(e){"use strict";function t(t){var n=4,r=t.length,i=r%n;if(!i)return t;var s=r,o=n-i,u=r+o,a=new e(u);a.write(t);while(o--)a.write("=",s++);return a.toString()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t}).call(this,e("buffer").Buffer)},{buffer:9}],5:[function(e,t,n){t.exports=e("./dist/base64url").default,t.exports.default=t.exports},{"./dist/base64url":3}],6:[function(e,t,n){},{}],7:[function(e,t,n){(function(t,r){function l(e){if(e<n.DEFLATE||e>n.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function c(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var i=e("pako/lib/zlib/messages"),s=e("pako/lib/zlib/zstream"),o=e("pako/lib/zlib/deflate.js"),u=e("pako/lib/zlib/inflate.js"),a=e("pako/lib/zlib/constants");for(var f in a)n[f]=a[f];n.NONE=0,n.DEFLATE=1,n.INFLATE=2,n.GZIP=3,n.GUNZIP=4,n.DEFLATERAW=5,n.INFLATERAW=6,n.UNZIP=7,l.prototype.init=function(e,t,r,i,a){this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=i;if(this.mode===n.GZIP||this.mode===n.GUNZIP)this.windowBits+=16;this.mode===n.UNZIP&&(this.windowBits+=32);if(this.mode===n.DEFLATERAW||this.mode===n.INFLATERAW)this.windowBits=-this.windowBits;this.strm=new s;switch(this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:var f=o.deflateInit2(this.strm,this.level,n.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:case n.UNZIP:var f=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(f!==n.Z_OK){this._error(f);return}this.write_in_progress=!1,this.init_done=!0},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===n.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},l.prototype.write=function(e,n,r,i,s,o,u){this._writeCheck(),this.write_in_progress=!0;var a=this;return t.nextTick(function(){a.write_in_progress=!1;var t=a._write(e,n,r,i,s,o,u);a.callback(t[0],t[1]),a.pending_close&&a.close()}),this},l.prototype.writeSync=function(e,t,n,r,i,s,o){return this._writeCheck(),this._write(e,t,n,r,i,s,o)},l.prototype._write=function(e,t,i,s,a,f,l){this.write_in_progress=!0;if(e!==n.Z_NO_FLUSH&&e!==n.Z_PARTIAL_FLUSH&&e!==n.Z_SYNC_FLUSH&&e!==n.Z_FULL_FLUSH&&e!==n.Z_FINISH&&e!==n.Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new r(0),s=0,i=0),a._set?a.set=a._set:a.set=c;var h=this.strm;h.avail_in=s,h.input=t,h.next_in=i,h.avail_out=l,h.output=a,h.next_out=f;switch(this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:var p=o.deflate(h,e);break;case n.UNZIP:case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:var p=u.inflate(h,e);break;default:throw new Error("Unknown mode "+this.mode)}return p!==n.Z_STREAM_END&&p!==n.Z_OK&&this._error(p),this.write_in_progress=!1,[h.avail_in,h.avail_out]},l.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===n.DEFLATE||this.mode===n.GZIP||this.mode===n.DEFLATERAW?o.deflateEnd(this.strm):u.inflateEnd(this.strm),this.mode=n.NONE},l.prototype.reset=function(){switch(this.mode){case n.DEFLATE:case n.DEFLATERAW:var e=o.deflateReset(this.strm);break;case n.INFLATE:case n.INFLATERAW:var e=u.inflateReset(this.strm)}e!==n.Z_OK&&this._error(e)},l.prototype._error=function(e){this.onerror(i[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},n.Zlib=l}).call(this,e("_process"),e("buffer").Buffer)},{_process:124,buffer:9,"pako/lib/zlib/constants":114,"pako/lib/zlib/deflate.js":116,"pako/lib/zlib/inflate.js":118,"pako/lib/zlib/messages":120,"pako/lib/zlib/zstream":122}],8:[function(e,t,n){(function(t,r){function a(e,t,n){function o(){var t;while(null!==(t=e.read()))i.push(t),s+=t.length;e.once("readable",o)}function u(t){e.removeListener("end",a),e.removeListener("readable",o),n(t)}function a(){var t=r.concat(i,s);i=[],n(null,t),e.close()}var i=[],s=0;e.on("error",u),e.on("end",a),e.end(t),o()}function f(e,t){typeof t=="string"&&(t=new r(t));if(!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=s.Z_FINISH;return e._processChunk(t,n)}function l(e){if(!(this instanceof l))return new l(e);g.call(this,e,s.DEFLATE)}function c(e){if(!(this instanceof c))return new c(e);g.call(this,e,s.INFLATE)}function h(e){if(!(this instanceof h))return new h(e);g.call(this,e,s.GZIP)}function p(e){if(!(this instanceof p))return new p(e);g.call(this,e,s.GUNZIP)}function d(e){if(!(this instanceof d))return new d(e);g.call(this,e,s.DEFLATERAW)}function v(e){if(!(this instanceof v))return new v(e);g.call(this,e,s.INFLATERAW)}function m(e){if(!(this instanceof m))return new m(e);g.call(this,e,s.UNZIP)}function g(e,t){this._opts=e=e||{},this._chunkSize=e.chunkSize||n.Z_DEFAULT_CHUNK,i.call(this,e);if(e.flush&&e.flush!==s.Z_NO_FLUSH&&e.flush!==s.Z_PARTIAL_FLUSH&&e.flush!==s.Z_SYNC_FLUSH&&e.flush!==s.Z_FULL_FLUSH&&e.flush!==s.Z_FINISH&&e.flush!==s.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);this._flushFlag=e.flush||s.Z_NO_FLUSH;if(e.chunkSize)if(e.chunkSize<n.Z_MIN_CHUNK||e.chunkSize>n.Z_MAX_CHUNK)throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits)if(e.windowBits<n.Z_MIN_WINDOWBITS||e.windowBits>n.Z_MAX_WINDOWBITS)throw new Error("Invalid windowBits: "+e.windowBits);if(e.level)if(e.level<n.Z_MIN_LEVEL||e.level>n.Z_MAX_LEVEL)throw new Error("Invalid compression level: "+e.level);if(e.memLevel)if(e.memLevel<n.Z_MIN_MEMLEVEL||e.memLevel>n.Z_MAX_MEMLEVEL)throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=n.Z_FILTERED&&e.strategy!=n.Z_HUFFMAN_ONLY&&e.strategy!=n.Z_RLE&&e.strategy!=n.Z_FIXED&&e.strategy!=n.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new s.Zlib(t);var o=this;this._hadError=!1,this._binding.onerror=function(e,t){o._binding=null,o._hadError=!0;var r=new Error(e);r.errno=t,r.code=n.codes[t],o.emit("error",r)};var u=n.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(u=e.level);var a=n.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(a=e.strategy),this._binding.init(e.windowBits||n.Z_DEFAULT_WINDOWBITS,u,e.memLevel||n.Z_DEFAULT_MEMLEVEL,a,e.dictionary),this._buffer=new r(this._chunkSize),this._offset=0,this._closed=!1,this._level=u,this._strategy=a,this.once("end",this.close)}var i=e("_stream_transform"),s=e("./binding"),o=e("util"),u=e("assert").ok;s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=Infinity,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION,Object.keys(s).forEach(function(e){e.match(/^Z/)&&(n[e]=s[e])}),n.codes={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},Object.keys(n.codes).forEach(function(e){n.codes[n.codes[e]]=e}),n.Deflate=l,n.Inflate=c,n.Gzip=h,n.Gunzip=p,n.DeflateRaw=d,n.InflateRaw=v,n.Unzip=m,n.createDeflate=function(e){return new l(e)},n.createInflate=function(e){return new c(e)},n.createDeflateRaw=function(e){return new d(e)},n.createInflateRaw=function(e){return new v(e)},n.createGzip=function(e){return new h(e)},n.createGunzip=function(e){return new p(e)},n.createUnzip=function(e){return new m(e)},n.deflate=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new l(t),e,n)},n.deflateSync=function(e,t){return f(new l(t),e)},n.gzip=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new h(t),e,n)},n.gzipSync=function(e,t){return f(new h(t),e)},n.deflateRaw=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new d(t),e,n)},n.deflateRawSync=function(e,t){return f(new d(t),e)},n.unzip=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new m(t),e,n)},n.unzipSync=function(e,t){return f(new m(t),e)},n.inflate=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new c(t),e,n)},n.inflateSync=function(e,t){return f(new c(t),e)},n.gunzip=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new p(t),e,n)},n.gunzipSync=function(e,t){return f(new p(t),e)},n.inflateRaw=function(e,t,n){return typeof t=="function"&&(n=t,t={}),a(new v(t),e,n)},n.inflateRawSync=function(e,t){return f(new v(t),e)},o.inherits(g,i),g.prototype.params=function(e,r,i){if(e<n.Z_MIN_LEVEL||e>n.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(r!=n.Z_FILTERED&&r!=n.Z_HUFFMAN_ONLY&&r!=n.Z_RLE&&r!=n.Z_FIXED&&r!=n.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==e||this._strategy!==r){var o=this;this.flush(s.Z_SYNC_FLUSH,function(){o._binding.params(e,r),o._hadError||(o._level=e,o._strategy=r,i&&i())})}else t.nextTick(i)},g.prototype.reset=function(){return this._binding.reset()},g.prototype._flush=function(e){this._transform(new r(0),"",e)},g.prototype.flush=function(e,n){var i=this._writableState;if(typeof e=="function"||e===void 0&&!n)n=e,e=s.Z_FULL_FLUSH;if(i.ended)n&&t.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(n)})}else this._flushFlag=e,this.write(new r(0),"",n)},g.prototype.close=function(e){e&&t.nextTick(e);if(this._closed)return;this._closed=!0,this._binding.close();var n=this;t.nextTick(function(){n.emit("close")})},g.prototype._transform=function(e,t,n){var i,o=this._writableState,u=o.ending||o.ended,a=u&&(!e||o.length===e.length);if(!e===null&&!r.isBuffer(e))return n(new Error("invalid input"));a?i=s.Z_FINISH:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH));var f=this;this._processChunk(e,i,n)},g.prototype._processChunk=function(e,t,n){function m(h,p){if(a._hadError)return;var d=s-p;u(d>=0,"have should not go down");if(d>0){var v=a._buffer.slice(a._offset,a._offset+d);a._offset+=d,f?a.push(v):(l.push(v),c+=v.length)}if(p===0||a._offset>=a._chunkSize)s=a._chunkSize,a._offset=0,a._buffer=new r(a._chunkSize);if(p===0){o+=i-h,i=h;if(!f)return!0;var g=a._binding.write(t,e,o,i,a._buffer,a._offset,a._chunkSize);g.callback=m,g.buffer=e;return}if(!f)return!1;n()}var i=e&&e.length,s=this._chunkSize-this._offset,o=0,a=this,f=typeof n=="function";if(!f){var l=[],c=0,h;this.on("error",function(e){h=e});do var p=this._binding.writeSync(t,e,o,i,this._buffer,this._offset,s);while(!this._hadError&&m(p[0],p[1]));if(this._hadError)throw h;var d=r.concat(l,c);return this.close(),d}var v=this._binding.write(t,e,o,i,this._buffer,this._offset,s);v.buffer=e,v.callback=m},o.inherits(l,g),o.inherits(c,g),o.inherits(h,g),o.inherits(p,g),o.inherits(d,g),o.inherits(v,g),o.inherits(m,g)}).call(this,e("_process"),e("buffer").Buffer)},{"./binding":7,_process:124,_stream_transform:134,assert:1,buffer:9,util:140}],9:[function(e,t,n){"use strict";function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},e.foo()===42}catch(t){return!1}}function u(e){if(e>s)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return h(e)}return f(e,t,n)}function f(e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return G(e)?v(e,t,n):typeof e=="string"?p(e,t):m(e)}function l(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n){return l(e),e<=0?u(e):t!==undefined?typeof n=="string"?u(e).fill(t,n):u(e).fill(t):u(e)}function h(e){return l(e),u(e<0?0:g(e)|0)}function p(e,t){if(typeof t!="string"||t==="")t="utf8";if(!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=b(e,t)|0,r=u(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function d(e){var t=e.length<0?0:g(e.length)|0,n=u(t);for(var r=0;r<t;r+=1)n[r]=e[r]&255;return n}function v(e,t,n){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var r;return t===undefined&&n===undefined?r=new Uint8Array(e):n===undefined?r=new Uint8Array(e,t):r=new Uint8Array(e,t,n),r.__proto__=a.prototype,r}function m(e){if(a.isBuffer(e)){var t=g(e.length)|0,n=u(t);return n.length===0?n:(e.copy(n,0,0,t),n)}if(e){if(Y(e)||"length"in e)return typeof e.length!="number"||Z(e.length)?u(0):d(e);if(e.type==="Buffer"&&Array.isArray(e.data))return d(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return e|0}function y(e){return+e!=e&&(e=0),a.alloc(+e)}function b(e,t){if(a.isBuffer(e))return e.length;if(Y(e)||G(e))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;var r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case undefined:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function w(e,t,n){var r=!1;if(t===undefined||t<0)t=0;if(t>this.length)return"";if(n===undefined||n>this.length)n=this.length;if(n<=0)return"";n>>>=0,t>>>=0;if(n<=t)return"";e||(e="utf8");for(;;)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return H(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function E(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,i){if(e.length===0)return-1;typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Z(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n);if(n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}typeof t=="string"&&(t=a.from(t,r));if(a.isBuffer(t))return t.length===0?-1:x(e,t,n,r,i);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,i){function a(e,t){return s===1?e[t]:e.readUInt16BE(t*s)}var s=1,o=e.length,u=t.length;if(r!==undefined){r=String(r).toLowerCase();if(r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le"){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,n/=2}}var f;if(i){var l=-1;for(f=n;f<o;f++)if(a(e,f)===a(t,l===-1?0:f-l)){l===-1&&(l=f);if(f-l+1===u)return l*s}else l!==-1&&(f-=f-l),l=-1}else{n+u>o&&(n=o-u);for(f=n;f>=0;f--){var c=!0;for(var h=0;h<u;h++)if(a(e,f+h)!==a(t,h)){c=!1;break}if(c)return f}}return-1}function T(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(o*2,2),16);if(Z(u))return o;e[n+o]=u}return o}function N(e,t,n,r){return Q(V(t,e.length-n),e,n,r)}function C(e,t,n,r){return Q($(t),e,n,r)}function k(e,t,n,r){return C(e,t,n,r)}function L(e,t,n,r){return Q(K(t),e,n,r)}function A(e,t,n,r){return Q(J(t,e.length-n),e,n,r)}function O(e,t,n){return t===0&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var s=e[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=n){var a,f,l,c;switch(u){case 1:s<128&&(o=s);break;case 2:a=e[i+1],(a&192)===128&&(c=(s&31)<<6|a&63,c>127&&(o=c));break;case 3:a=e[i+1],f=e[i+2],(a&192)===128&&(f&192)===128&&(c=(s&15)<<12|(a&63)<<6|f&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:a=e[i+1],f=e[i+2],l=e[i+3],(a&192)===128&&(f&192)===128&&(l&192)===128&&(c=(s&15)<<18|(a&63)<<12|(f&63)<<6|l&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),i+=u}return D(r)}function D(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]&127);return r}function H(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function B(e,t,n){var r=e.length;if(!t||t<0)t=0;if(!n||n<0||n>r)n=r;var i="";for(var s=t;s<n;++s)i+=X(e[s]);return i}function j(e,t,n){var r=e.slice(t,n),i="";for(var s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+r[s+1]*256);return i}function F(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function q(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,s){return t=+t,n>>>=0,s||q(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,s){return t=+t,n>>>=0,s||q(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),i.write(e,t,n,r,52,8),n+8}function W(e){e=e.trim().replace(z,"");if(e.length<2)return"";while(e.length%4!==0)e+="=";return e}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||Infinity;var n,r=e.length,i=null,s=[];for(var o=0;o<r;++o){n=e.charCodeAt(o);if(n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);i=null;if(n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}}return s}function $(e){var t=[];for(var n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function J(e,t){var n,r,i,s=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r)}return s}function K(e){return r.toByteArray(W(e))}function Q(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}function G(e){return e instanceof ArrayBuffer||e!=null&&e.constructor!=null&&e.constructor.name==="ArrayBuffer"&&typeof e.byteLength=="number"}function Y(e){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(e)}function Z(e){return e!==e}var r=e("base64-js"),i=e("ieee754");n.Buffer=a,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50;var s=2147483647;n.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),typeof Symbol!="undefined"&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,n){return f(e,t,n)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return c(e,t,n)},a.allocUnsafe=function(e){return h(e)},a.allocUnsafeSlow=function(e){return h(e)},a.isBuffer=function(t){return t!=null&&t._isBuffer===!0},a.compare=function(t,n){if(!a.isBuffer(t)||!a.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;var r=t.length,i=n.length;for(var s=0,o=Math.min(r,i);s<o;++s)if(t[s]!==n[s]){r=t[s],i=n[s];break}return r<i?-1:i<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return a.alloc(0);var r;if(n===undefined){n=0;for(r=0;r<t.length;++r)n+=t[r].length}var i=a.allocUnsafe(n),s=0;for(r=0;r<t.length;++r){var o=t[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i},a.byteLength=b,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)E(this,n,n+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)E(this,n,n+3),E(this,n+1,n+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)E(this,n,n+7),E(this,n+1,n+6),E(this,n+2,n+5),E(this,n+3,n+4);return this},a.prototype.toString=function et(){var e=this.length;return e===0?"":arguments.length===0?M(this,0,e):w.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:a.compare(this,t)===0},a.prototype.inspect=function(){var t="",r=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,n,r,i,s){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");n===undefined&&(n=0),r===undefined&&(r=t?t.length:0),i===undefined&&(i=0),s===undefined&&(s=this.length);if(n<0||r>t.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&n>=r)return 0;if(i>=s)return-1;if(n>=r)return 1;n>>>=0,r>>>=0,i>>>=0,s>>>=0;if(this===t)return 0;var o=s-i,u=r-n,f=Math.min(o,u),l=this.slice(i,s),c=t.slice(n,r);for(var h=0;h<f;++h)if(l[h]!==c[h]){o=l[h],u=c[h];break}return o<u?-1:u<o?1:0},a.prototype.includes=function(t,n,r){return this.indexOf(t,n,r)!==-1},a.prototype.indexOf=function(t,n,r){return S(this,t,n,r,!0)},a.prototype.lastIndexOf=function(t,n,r){return S(this,t,n,r,!1)},a.prototype.write=function(t,n,r,i){if(n===undefined)i="utf8",r=this.length,n=0;else if(r===undefined&&typeof n=="string")i=n,r=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(r)?(r>>>=0,i===undefined&&(i="utf8")):(i=r,r=undefined)}var s=this.length-n;if(r===undefined||r>s)r=s;if(t.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");var o=!1;for(;;)switch(i){case"hex":return T(this,t,n,r);case"utf8":case"utf-8":return N(this,t,n,r);case"ascii":return C(this,t,n,r);case"latin1":case"binary":return k(this,t,n,r);case"base64":return L(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;a.prototype.slice=function(t,n){var r=this.length;t=~~t,n=n===undefined?r:~~n,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<t&&(n=t);var i=this.subarray(t,n);return i.__proto__=a.prototype,i},a.prototype.readUIntLE=function(t,n,r){t>>>=0,n>>>=0,r||F(t,n,this.length);var i=this[t],s=1,o=0;while(++o<n&&(s*=256))i+=this[t+o]*s;return i},a.prototype.readUIntBE=function(t,n,r){t>>>=0,n>>>=0,r||F(t,n,this.length);var i=this[t+ --n],s=1;while(n>0&&(s*=256))i+=this[t+ --n]*s;return i},a.prototype.readUInt8=function(t,n){return t>>>=0,n||F(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,n){return t>>>=0,n||F(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,n){return t>>>=0,n||F(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,n){return t>>>=0,n||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},a.prototype.readUInt32BE=function(t,n){return t>>>=0,n||F(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,n,r){t>>>=0,n>>>=0,r||F(t,n,this.length);var i=this[t],s=1,o=0;while(++o<n&&(s*=256))i+=this[t+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*n)),i},a.prototype.readIntBE=function(t,n,r){t>>>=0,n>>>=0,r||F(t,n,this.length);var i=n,s=1,o=this[t+ --i];while(i>0&&(s*=256))o+=this[t+ --i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*n)),o},a.prototype.readInt8=function(t,n){return t>>>=0,n||F(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,n){t>>>=0,n||F(t,2,this.length);var r=this[t]|this[t+1]<<8;return r&32768?
r|4294901760:r},a.prototype.readInt16BE=function(t,n){t>>>=0,n||F(t,2,this.length);var r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r},a.prototype.readInt32LE=function(t,n){return t>>>=0,n||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,n){return t>>>=0,n||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,n){return t>>>=0,n||F(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,n){return t>>>=0,n||F(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,n){return t>>>=0,n||F(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,n){return t>>>=0,n||F(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,n,r,i){t=+t,n>>>=0,r>>>=0;if(!i){var s=Math.pow(2,8*r)-1;I(this,t,n,r,s,0)}var o=1,u=0;this[n]=t&255;while(++u<r&&(o*=256))this[n+u]=t/o&255;return n+r},a.prototype.writeUIntBE=function(t,n,r,i){t=+t,n>>>=0,r>>>=0;if(!i){var s=Math.pow(2,8*r)-1;I(this,t,n,r,s,0)}var o=r-1,u=1;this[n+o]=t&255;while(--o>=0&&(u*=256))this[n+o]=t/u&255;return n+r},a.prototype.writeUInt8=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,1,255,0),this[n]=t&255,n+1},a.prototype.writeUInt16LE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2},a.prototype.writeUInt16BE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2},a.prototype.writeUInt32LE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4},a.prototype.writeUInt32BE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4},a.prototype.writeIntLE=function(t,n,r,i){t=+t,n>>>=0;if(!i){var s=Math.pow(2,8*r-1);I(this,t,n,r,s-1,-s)}var o=0,u=1,a=0;this[n]=t&255;while(++o<r&&(u*=256))t<0&&a===0&&this[n+o-1]!==0&&(a=1),this[n+o]=(t/u>>0)-a&255;return n+r},a.prototype.writeIntBE=function(t,n,r,i){t=+t,n>>>=0;if(!i){var s=Math.pow(2,8*r-1);I(this,t,n,r,s-1,-s)}var o=r-1,u=1,a=0;this[n+o]=t&255;while(--o>=0&&(u*=256))t<0&&a===0&&this[n+o+1]!==0&&(a=1),this[n+o]=(t/u>>0)-a&255;return n+r},a.prototype.writeInt8=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1},a.prototype.writeInt16LE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2},a.prototype.writeInt16BE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2},a.prototype.writeInt32LE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4},a.prototype.writeInt32BE=function(t,n,r){return t=+t,n>>>=0,r||I(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4},a.prototype.writeFloatLE=function(t,n,r){return R(this,t,n,!0,r)},a.prototype.writeFloatBE=function(t,n,r){return R(this,t,n,!1,r)},a.prototype.writeDoubleLE=function(t,n,r){return U(this,t,n,!0,r)},a.prototype.writeDoubleBE=function(t,n,r){return U(this,t,n,!1,r)},a.prototype.copy=function(t,n,r,i){r||(r=0),!i&&i!==0&&(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r);if(i===r)return 0;if(t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var s=i-r,o;if(this===t&&r<n&&n<i)for(o=s-1;o>=0;--o)t[o+n]=this[o+r];else if(s<1e3)for(o=0;o<s;++o)t[o+n]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),n);return s},a.prototype.fill=function(t,n,r,i){if(typeof t=="string"){typeof n=="string"?(i=n,n=0,r=this.length):typeof r=="string"&&(i=r,r=this.length);if(t.length===1){var s=t.charCodeAt(0);s<256&&(t=s)}if(i!==undefined&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=r===undefined?this.length:r>>>0,t||(t=0);var o;if(typeof t=="number")for(o=n;o<r;++o)this[o]=t;else{var u=a.isBuffer(t)?t:new a(t,i),f=u.length;for(o=0;o<r-n;++o)this[o+n]=u[o%f]}return this};var z=/[^+/0-9A-Za-z-_]/g},{"base64-js":2,ieee754:13}],10:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):m(e)==="[object Array]"}function r(e){return typeof e=="boolean"}function i(e){return e===null}function s(e){return e==null}function o(e){return typeof e=="number"}function u(e){return typeof e=="string"}function a(e){return typeof e=="symbol"}function f(e){return e===void 0}function l(e){return m(e)==="[object RegExp]"}function c(e){return typeof e=="object"&&e!==null}function h(e){return m(e)==="[object Date]"}function p(e){return m(e)==="[object Error]"||e instanceof Error}function d(e){return typeof e=="function"}function v(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}function m(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=s,n.isNumber=o,n.isString=u,n.isSymbol=a,n.isUndefined=f,n.isRegExp=l,n.isObject=c,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=v,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":15}],11:[function(e,t,n){(function(r,i){(function(e,r){typeof n=="object"&&typeof t!="undefined"?t.exports=r():typeof define=="function"&&define.amd?define(r):e.ES6Promise=r()})(this,function(){"use strict";function t(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function n(e){return typeof e=="function"}function c(e){f=e}function h(e){l=e}function y(){return function(){return r.nextTick(T)}}function b(){return typeof a!="undefined"?function(){a(T)}:S()}function w(){var e=0,t=new v(T),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function E(){var e=new MessageChannel;return e.port1.onmessage=T,function(){return e.port2.postMessage(0)}}function S(){var e=setTimeout;return function(){return e(T,1)}}function T(){for(var e=0;e<u;e+=2){var t=x[e],n=x[e+1];t(n),x[e]=undefined,x[e+1]=undefined}u=0}function N(){try{var t=e,n=t("vertx");return a=n.runOnLoop||n.runOnContext,b()}catch(r){return S()}}function k(e,t){var n=arguments,r=this,i=new this.constructor(O);i[A]===undefined&&tt(i);var s=r._state;return s?function(){var e=n[s-1];l(function(){return G(s,i,e,r._result)})}():V(r,i,e,t),i}function L(e){var t=this;if(e&&typeof e=="object"&&e.constructor===t)return e;var n=new t(O);return U(n,e),n}function O(){}function H(){return new TypeError("You cannot resolve a promise with itself")}function B(){return new TypeError("A promises callback cannot return that same promise.")}function j(e){try{return e.then}catch(t){return P.error=t,P}}function F(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function I(e,t,n){l(function(e){var r=!1,i=F(n,t,function(n){if(r)return;r=!0,t!==n?U(e,n):W(e,n)},function(t){if(r)return;r=!0,X(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,X(e,i))},e)}function q(e,t){t._state===_?W(e,t._result):t._state===D?X(e,t._result):V(t,undefined,function(t){return U(e,t)},function(t){return X(e,t)})}function R(e,t,r){t.constructor===e.constructor&&r===k&&t.constructor.resolve===L?q(e,t):r===P?(X(e,P.error),P.error=null):r===undefined?W(e,t):n(r)?I(e,t,r):W(e,t)}function U(e,n){e===n?X(e,H()):t(n)?R(e,n,j(n)):W(e,n)}function z(e){e._onerror&&e._onerror(e._result),$(e)}function W(e,t){if(e._state!==M)return;e._result=t,e._state=_,e._subscribers.length!==0&&l($,e)}function X(e,t){if(e._state!==M)return;e._state=D,e._result=t,l(z,e)}function V(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+_]=n,i[s+D]=r,s===0&&e._state&&l($,e)}function $(e){var t=e._subscribers,n=e._state;if(t.length===0)return;var r=undefined,i=undefined,s=e._result;for(var o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?G(n,r,i,s):i(s);e._subscribers.length=0}function J(){this.error=null}function Q(e,t){try{return e(t)}catch(n){return K.error=n,K}}function G(e,t,r,i){var s=n(r),o=undefined,u=undefined,a=undefined,f=undefined;if(s){o=Q(r,i),o===K?(f=!0,u=o.error,o.error=null):a=!0;if(t===o){X(t,B());return}}else o=i,a=!0;t._state===M&&(s&&a?U(t,o):f?X(t,u):e===_?W(t,o):e===D&&X(t,o))}function Y(e,t){try{t(function(n){U(e,n)},function(n){X(e,n)})}catch(n){X(e,n)}}function et(){return Z++}function tt(e){e[A]=Z++,e._state=undefined,e._result=undefined,e._subscribers=[]}function nt(e,t){this._instanceConstructor=e,this.promise=new e(O),this.promise[A]||tt(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),this.length===0?W(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),this._remaining===0&&W(this.promise,this._result))):X(this.promise,rt())}function rt(){return new Error("Array Methods must be provided an Array")}function it(e){return(new nt(this,e)).promise}function st(e){var t=this;return o(e)?new t(function(n,r){var i=e.length;for(var s=0;s<i;s++)t.resolve(e[s]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}function ot(e){var t=this,n=new t(O);return X(n,e),n}function ut(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function at(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ft(e){this[A]=et(),this._result=this._state=undefined,this._subscribers=[],O!==e&&(typeof e!="function"&&ut(),this instanceof ft?Y(this,e):at())}function lt(){var e=undefined;if(typeof i!="undefined")e=i;else if(typeof self!="undefined")e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if(r==="[object Promise]"&&!n.cast)return}e.Promise=ft}var s=undefined;Array.isArray?s=Array.isArray:s=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var o=s,u=0,a=undefined,f=undefined,l=function(t,n){x[u]=t,x[u+1]=n,u+=2,u===2&&(f?f(T):C())},p=typeof window!="undefined"?window:undefined,d=p||{},v=d.MutationObserver||d.WebKitMutationObserver,m=typeof self=="undefined"&&typeof r!="undefined"&&{}.toString.call(r)==="[object process]",g=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined",x=new Array(1e3),C=undefined;m?C=y():v?C=w():g?C=E():p===undefined&&typeof e=="function"?C=N():C=S();var A=Math.random().toString(36).substring(16),M=void 0,_=1,D=2,P=new J,K=new J,Z=0;return nt.prototype._enumerate=function(e){for(var t=0;this._state===M&&t<e.length;t++)this._eachEntry(e[t],t)},nt.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===L){var i=j(e);if(i===k&&e._state!==M)this._settledAt(e._state,t,e._result);else if(typeof i!="function")this._remaining--,this._result[t]=e;else if(n===ft){var s=new n(O);R(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},nt.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===M&&(this._remaining--,e===D?X(r,n):this._result[t]=n),this._remaining===0&&W(r,this._result)},nt.prototype._willSettleAt=function(e,t){var n=this;V(e,undefined,function(e){return n._settledAt(_,t,e)},function(e){return n._settledAt(D,t,e)})},ft.all=it,ft.race=st,ft.resolve=L,ft.reject=ot,ft._setScheduler=c,ft._setAsap=h,ft._asap=l,ft.prototype={constructor:ft,then:k,"catch":function(t){return this.then(null,t)}},ft.polyfill=lt,ft.Promise=ft,ft})}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:124}],12:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function i(e){return typeof e=="function"}function s(e){return typeof e=="number"}function o(e){return typeof e=="object"&&e!==null}function u(e){return e===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=undefined,r.prototype._maxListeners=undefined,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,f;this._events||(this._events={});if(e==="error")if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}n=this._events[e];if(u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n)){s=Array.prototype.slice.call(arguments,1),f=n.slice(),r=f.length;for(a=0;a<r;a++)f[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(u(this._maxListeners)?n=r.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;n=this._events[e],s=n.length,r=-1;if(n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}n=this._events[e];if(i(n))this.removeListener(e,n);else if(n)while(n.length)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:i(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],13:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,u=i*8-r-1,a=(1<<u)-1,f=a>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=e[t+c];c+=h,s=p&(1<<-l)-1,p>>=-l,l+=u;for(;l>0;s=s*256+e[t+c],c+=h,l-=8);o=s&(1<<-l)-1,s>>=-l,l+=r;for(;l>0;o=o*256+e[t+c],c+=h,l-=8);if(s===0)s=1-f;else{if(s===a)return o?NaN:(p?-1:1)*Infinity;o+=Math.pow(2,r),s-=f}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,u,a,f=s*8-i-1,l=(1<<f)-1,c=l>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t),isNaN(t)||t===Infinity?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+c>=1?t+=h/a:t+=h*Math.pow(2,1-c),t*a>=2&&(o++,a/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*a-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));for(;i>=8;e[n+p]=u&255,p+=d,u/=256,i-=8);o=o<<i|u,f+=i;for(;f>0;e[n+p]=o&255,p+=d,o/=256,f-=8);e[n+p-d]|=v*128}},{}],14:[function(e,t,n){typeof Object.create=="function"?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],15:[function(e,t,n){function r(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function i(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&r(e.slice(0,0))}t.exports=function(e){return e!=null&&(r(e)||i(e)||!!e._isBuffer)}},{}],16:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return r.call(e)=="[object Array]"}},{}],17:[function(e,t,n){function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function f(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function l(e,t){return function(n){return e(t(n))}}function y(e,t){var n=A(e)||L(e)?f(e.length,String):[],r=n.length,i=!!r;for(var s in e)(t||h.call(e,s))&&(!i||s!="length"&&!T(s,r))&&n.push(s);return n}function b(e,t,n){var r=e[t];if(!h.call(e,t)||!k(r,n)||n===undefined&&!(t in e))e[t]=n}function w(e){if(!C(e))return v(e);var t=[];for(var n in Object(e))h.call(e,n)&&n!="constructor"&&t.push(n);return t}function E(e,t){return t=m(t===undefined?e.length-1:t,0),function(){var n=arguments,r=-1,i=m(n.length-t,0),s=Array(i);while(++r<i)s[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=s,a(e,this,o)}}function S(e,t,n,r){n||(n={});var i=-1,s=t.length;while(++i<s){var o=t[i],u=r?r(n[o],e[o],o,n,e):undefined;b(n,o,u===undefined?e[o]:u)}return n}function x(e){return E(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:undefined,o=i>2?n[2]:undefined;s=e.length>3&&typeof s=="function"?(i--,s):undefined,o&&N(n[0],n[1],o)&&(s=i<3?undefined:s,i=1),t=Object(t);while(++r<i){var u=n[r];u&&e(t,u,r,s)}return t})}function T(e,t){return t=t==null?r:t,!!t&&(typeof e=="number"||u.test(e))&&e>-1&&e%1==0&&e<t}function N(e,t,n){if(!P(n))return!1;var r=typeof t;return(r=="number"?O(n)&&T(t,n.length):r=="string"&&t in n)?k(n[t],e):!1}function C(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||c;return e===n}function k(e,t){return e===t||e!==e&&t!==t}function L(e){return M(e)&&h.call(e,"callee")&&(!d.call(e,"callee")||p.call(e)==i)}function O(e){return e!=null&&D(e.length)&&!_(e)}function M(e){return H(e)&&O(e)}function _(e){var t=P(e)?p.call(e):"";return t==s||t==o}function D(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}function P(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function H(e){return!!e&&typeof e=="object"}function j(e){return O(e)?y(e):w(e)}var r=9007199254740991,i="[object Arguments]",s="[object Function]",o="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/,c=Object.prototype,h=c.hasOwnProperty,p=c.toString,d=c.propertyIsEnumerable,v=l(Object.keys,Object),m=Math.max,g=!d.call({valueOf:1},"valueOf"),A=Array.isArray,B=x(function(e,t){if(g||C(t)||O(t)){S(t,j(t),e);return}for(var n in t)h.call(t,n)&&b(e,n,t[n])});t.exports=B},{}],18:[function(e,t,n){(function(e){function W(e,t){return e.set(t[0],t[1]),e}function X(e,t){return e.add(t),e}function V(e,t){var n=-1,r=e?e.length:0;while(++n<r)if(t(e[n],n,e)===!1)break;return e}function $(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function J(e,t,n,r){var i=-1,s=e?e.length:0;r&&s&&(n=e[++i]);while(++i<s)n=t(n,e[i],i,e);return n}function K(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function Q(e,t){return e==null?undefined:e[t]}function G(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function Y(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Z(e,t){return function(n){return e(t(n))}}function et(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Dt(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Pt(){this.__data__=Nt?Nt(null):{}}function Ht(e){return this.has(e)&&delete this.__data__[e]}function Bt(e){var t=this.__data__;if(Nt){var n=t[e];return n===i?undefined:n}return ut.call(t,e)?t[e]:undefined}function jt(e){var t=this.__data__;return Nt?t[e]!==undefined:ut.call(t,e)}function Ft(e,t){var n=this.__data__;return n[e]=Nt&&t===undefined?i:t,this}function It(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function qt(){this.__data__=[]}function Rt(e){var t=this.__data__,n=on(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():mt.call(t,n,1),!0}function Ut(e){var t=this.__data__,n=on(t,e);return n<0?undefined:t[n][1]}function zt(e){return on(this.__data__,e)>-1}function Wt(e,t){var n=this.__data__,r=on(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function Xt(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Vt(){this.__data__={hash:new Dt,map:new(Et||It),string:new Dt}}function $t(e){return Cn(this,e)["delete"](e)}function Jt(e){return Cn(this,e).get(e)}function Kt(e){return Cn(this,e).has(e)}function Qt(e,t){return Cn(this,e).set(e,t),this}function Gt(e){this.__data__=new It(e)}function Yt(){this.__data__=new It}function Zt(e){return this.__data__["delete"](e)}function en(e){return this.__data__.get(e)}function tn(e){return this.__data__.has(e)}function nn(e,t){var n=this.__data__;if(n instanceof It){var i=n.__data__;if(!Et||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Xt(i)}return n.set(e,t),this}function rn(e,t){var n=Rn(e)||qn(e)?K(e.length,String):[],r=n.length,i=!!r;for(var s in e)(t||ut.call(e,s))&&(!i||s!="length"&&!Dn(s,r))&&n.push(s);return n}function sn(e,t,n){var r=e[t];if(!ut.call(e,t)||!In(r,n)||n===undefined&&!(t in e))e[t]=n}function on(e,t){var n=e.length;while(n--)if(In(e[n][0],t))return n;return-1}function un(e,t){return e&&xn(t,Kn(t),e)}function an(e,t,n,r,i,s,u){var a;r&&(a=s?r(e,i,s,u):r(e));if(a!==undefined)return a;if(!$n(e))return e;var f=Rn(e);if(f){a=On(e);if(!t)return Sn(e,a)}else{var l=An(e),p=l==c||l==h;if(Wn(e))return dn(e,t);if(l==v||l==o||p&&!s){if(G(e))return s?e:{};a=Mn(p?{}:e);if(!t)return Tn(e,un(a,e))}else{if(!j[l])return s?e:{};a=_n(e,l,an,t)}}u||(u=new Gt);var d=u.get(e);if(d)return d;u.set(e,a);if(!f)var m=n?Nn(e):Kn(e);return V(m||e,function(i,s){m&&(s=i,i=e[s]),sn(a,s,an(i,t,n,r,s,e,u))}),a}function fn(e){return $n(e)?dt(e):{}}function ln(e,t,n){var r=t(e);return Rn(e)?r:$(r,n(e))}function cn(e){return at.call(e)}function hn(e){if(!$n(e)||Hn(e))return!1;var t=Xn(e)||G(e)?ft:H;return t.test(jn(e))}function pn(e){if(!Bn(e))return bt(e);var t=[];for(var n in Object(e))ut.call(e,n)&&n!="constructor"&&t.push(n);return t}function dn(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function vn(e){var t=new e.constructor(e.byteLength);return(new ht(t)).set(new ht(e)),t}function mn(e,t){var n=t?vn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function gn(e,t,n){var r=t?n(Y(e),!0):Y(e);return J(r,W,new e.constructor)}function yn(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t}function bn(e,t,n){var r=t?n(et(e),!0):et(e);return J(r,X,new e.constructor)}function wn(e){return _t?Object(_t.call(e)):{}}function En(e,t){var n=t?vn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Sn(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}function xn(e,t,n,r){n||(n={});var i=-1,s=t.length;while(++i<s){var o=t[i],u=r?r(n[o],e[o],o,n,e):undefined;sn(n,o,u===undefined?e[o]:u)}return n}function Tn(e,t){return xn(e,Ln(e),t)}function Nn(e){return ln(e,Kn,Ln)}function Cn(e,t){var n=e.__data__;return Pn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function kn(e,t){var n=Q(e,t);return hn(n)?n:undefined}function On(e){var t=e.length,n=e.constructor(t);return t&&typeof e[0]=="string"&&ut.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Mn(e){return typeof e.constructor=="function"&&!Bn(e)?fn(pt(e)):{}}function _n(e,t,n,r){var i=e.constructor;switch(t){case S:return vn(e);case a:case f:return new i(+e);case x:return mn(e,r);case T:case N:case C:case k:case L:case A:case O:case M:case _:return En(e,r);case p:return gn(e,r,n);case d:case b:return new i(e);case g:return yn(e);case y:return bn(e,r,n);case w:return wn(e)}}function Dn(e,t){return t=t==null?s:t,!!t&&(typeof e=="number"||B.test(e))&&e>-1&&e%1==0&&e<t}function Pn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Hn(e){return!!st&&st in e}function Bn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||rt;return e===n}function jn(e){if(e!=null){try{return ot.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fn(e){return an(e,!1,!0)}function In(e,t){return e===t||e!==e&&t!==t}function qn(e){return zn(e)&&ut.call(e,"callee")&&(!vt.call(e,"callee")||at.call(e)==o)}function Un(e){return e!=null&&Vn(e.length)&&!Xn(e)}function zn(e){return Jn(e)&&Un(e)}function Xn(e){var t=$n(e)?at.call(e):"";return t==c||t==h}function Vn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=s}function $n(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Jn(e){return!!e&&typeof e=="object"}function Kn(e){return Un(e)?rn(e):pn(e)}function Qn(){return[]}function Gn(){return!1}var r=200,i="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",u="[object Array]",a="[object Boolean]",f="[object Date]",l="[object Error]",c="[object Function]",h="[object GeneratorFunction]",p="[object Map]",d="[object Number]",v="[object Object]",m="[object Promise]",g="[object RegExp]",y="[object Set]",b="[object String]",w="[object Symbol]",E="[object WeakMap]",S="[object ArrayBuffer]",x="[object DataView]",T="[object Float32Array]",N="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",L="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",M="[object Uint16Array]",_="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,P=/\w*$/,H=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,j={};j[o]=j[u]=j[S]=j[x]=j[a]=j[f]=j[T]=j[N]=j[C]=j[k]=j[L]=j[p]=j[d]=j[v]=j[g]=j[y]=j[b]=j[w]=j[A]=j[O]=j[M]=j[_]=!0,j[l]=j[c]=j[E]=!1;var F=typeof e=="object"&&e&&e.Object===Object&&e,I=typeof self=="object"&&self&&self.Object===Object&&self,q=F||I||Function("return this")(),R=typeof n=="object"&&n&&!n.nodeType&&n,U=R&&typeof t=="object"&&t&&!t.nodeType&&t,z=U&&U.exports===R,tt=Array.prototype,nt=Function.prototype,rt=Object.prototype,it=q["__core-js_shared__"],st=function(){var e=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ot=nt.toString,ut=rt.hasOwnProperty,at=rt.toString,ft=RegExp("^"+ot.call(ut).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=z?q.Buffer:undefined,ct=q.Symbol,ht=q.Uint8Array,pt=Z(Object.getPrototypeOf,Object),dt=Object.create,vt=rt.propertyIsEnumerable,mt=tt.splice,gt=Object.getOwnPropertySymbols,yt=lt?lt.isBuffer:undefined,bt=Z(Object.keys,Object),wt=kn(q,"DataView"),Et=kn(q,"Map"),St=kn(q,"Promise"),xt=kn(q,"Set"),Tt=kn(q,"WeakMap"),Nt=kn(Object,"create"),Ct=jn(wt),kt=jn(Et),Lt=jn(St),At=jn(xt),Ot=jn(Tt),Mt=ct?ct.prototype:undefined,_t=Mt?Mt.valueOf:undefined;Dt.prototype.clear=Pt,Dt.prototype["delete"]=Ht,Dt.prototype.get=Bt,Dt.prototype.has=jt,Dt.prototype.set=Ft,It.prototype.clear=qt,It.prototype["delete"]=Rt,It.prototype.get=Ut,It.prototype.has=zt,It.prototype.set=Wt,Xt.prototype.clear=Vt,Xt.prototype["delete"]=$t,Xt.prototype.get=Jt,Xt.prototype.has=Kt,Xt.prototype.set=Qt,Gt.prototype.clear=Yt,Gt.prototype["delete"]=Zt,Gt.prototype.get=en,Gt.prototype.has=tn,Gt.prototype.set=nn;var Ln=gt?Z(gt,Object):Qn,An=cn;if(wt&&An(new wt(new ArrayBuffer(1)))!=x||Et&&An(new Et)!=p||St&&An(St.resolve())!=m||xt&&An(new xt)!=y||Tt&&An(new Tt)!=E)An=function(e){var t=at.call(e),n=t==v?e.constructor:undefined,r=n?jn(n):undefined;if(r)switch(r){case Ct:return x;case kt:return p;case Lt:return m;case At:return y;case Ot:return E}return t};var Rn=Array.isArray,Wn=yt||Gn;t.exports=Fn}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],19:[function(e,t,n){function b(e,t,n){return e===e&&(n!==undefined&&(e=e<=n?e:n),t!==undefined&&(e=e>=t?e:t)),e}function w(e,t,n,r){var i=e.length;n=_(n),n<0&&(n=-n>i?0:i+n),r=r===undefined||r>i?i:_(r),r<0&&(r+=i),r=n>r?0:D(r);while(n<r)e[n++]=t;return e}function E(e,t){return t=t==null?i:t,!!t&&(typeof e=="number"||v.test(e))&&e>-1&&e%1==0&&e<t}function S(e,t,n){if(!L(n))return!1;var r=typeof t;return(r=="number"?N(n)&&E(t,n.length):r=="string"&&t in n)?T(n[t],e):!1}function x(e,t,n,r){var i=e?e.length:0;return i?(n&&typeof n!="number"&&S(e,t,n)&&(n=0,r=i),w(e,t,n,r)):[]}function T(e,t){return e===t||e!==e&&t!==t}function N(e){return e!=null&&k(e.length)&&!C(e)}function C(e){var t=L(e)?y.call(e):"";return t==a||t==f}function k(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=i}function L(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function A(e){return!!e&&typeof e=="object"}function O(e){return typeof e=="symbol"||A(e)&&y.call(e)==l}function M(e){if(!e)return e===0?e:0;e=P(e);if(e===r||e===-r){var t=e<0?-1:1;return t*s}return e===e?e:0}function _(e){var t=M(e),n=t%1;return t===t?n?t-n:t:0}function D(e){return e?b(_(e),0,u):0}function P(e){if(typeof e=="number")return e;if(O(e))return o;if(L(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=L(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(c,"");var n=p.test(e);return n||d.test(e)?m(e.slice(2),n?2:8):h.test(e)?o:+e}var r=1/0,i=9007199254740991,s=1.7976931348623157e308,o=0/0,u=4294967295,a="[object Function]",f="[object GeneratorFunction]",l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,v=/^(?:0|[1-9]\d*)$/,m=parseInt,g=Object.prototype,y=g.toString;t.exports=x},{}],20:[function(e,t,n){(function(e){function f(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function m(e,t,n,r,i){var s=-1,o=e.length;n||(n=g),i||(i=[]);while(++s<o){var u=e[s];t>0&&n(u)?t>1?m(u,t-1,n,r,i):f(i,u):r||(i[i.length]=u)}return i}function g(e){return w(e)||b(e)||!!(v&&e&&e[v])}function y(e){var t=e?e.length:0;return t?m(e,1):[]}function b(e){return S(e)&&c.call(e,"callee")&&(!d.call(e,"callee")||h.call(e)==r)}function E(e){return e!=null&&T(e.length)&&!x(e)}function S(e){return C(e)&&E(e)}function x(e){var t=N(e)?h.call(e):"";return t==i||t==s}function T(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=n}function N(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function C(e){return!!e&&typeof e=="object"}var n=9007199254740991,r="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]",o=typeof e=="object"&&e&&e.Object===Object&&e,u=typeof self=="object"&&self&&self.Object===Object&&self,a=o||u||Function("return this")(),l=Object.prototype,c=l.hasOwnProperty,h=l.toString,p=a.Symbol,d=l.propertyIsEnumerable,v=p?p.isConcatSpreadable:undefined,w=Array.isArray;t.exports=y}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],21:[function(e,t,n){(function(e){function c(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function h(e,t){var n=e?e.length:0;return!!n&&m(e,t,0)>-1}function p(e,t,n){var r=-1,i=e?e.length:0;while(++r<i)if(n(t,e[r]))return!0;return!1}function d(e,t){var n=-1,r=e?e.length:0,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function v(e,t,n,r){var i=e.length,s=n+(r?1:-1);while(r?s--:++s<i)if(t(e[s],s,e))return s;return-1}function m(e,t,n){
if(t!==t)return v(e,g,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function g(e){return e!==e}function y(e){return function(t){return e(t)}}function b(e,t){return e.has(t)}function w(e,t){return e==null?undefined:e[t]}function E(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function B(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function j(){this.__data__=H?H(null):{}}function F(e){return this.has(e)&&delete this.__data__[e]}function I(e){var t=this.__data__;if(H){var r=t[e];return r===n?undefined:r}return L.call(t,e)?t[e]:undefined}function q(e){var t=this.__data__;return H?t[e]!==undefined:L.call(t,e)}function R(e,t){var r=this.__data__;return r[e]=H&&t===undefined?n:t,this}function U(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function z(){this.__data__=[]}function W(e){var t=this.__data__,n=rt(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():M.call(t,n,1),!0}function X(e){var t=this.__data__,n=rt(t,e);return n<0?undefined:t[n][1]}function V(e){return rt(this.__data__,e)>-1}function $(e,t){var n=this.__data__,r=rt(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function J(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function K(){this.__data__={hash:new B,map:new(P||U),string:new B}}function Q(e){return at(this,e)["delete"](e)}function G(e){return at(this,e).get(e)}function Y(e){return at(this,e).has(e)}function Z(e,t){return at(this,e).set(e,t),this}function et(e){var t=-1,n=e?e.length:0;this.__data__=new J;while(++t<n)this.add(e[t])}function tt(e){return this.__data__.set(e,n),this}function nt(e){return this.__data__.has(e)}function rt(e,t){var n=e.length;while(n--)if(dt(e[n][0],t))return n;return-1}function it(e,t,n){var r=n?p:h,i=e[0].length,s=e.length,o=s,u=Array(s),a=Infinity,f=[];while(o--){var l=e[o];o&&t&&(l=d(l,y(t))),a=D(l.length,a),u[o]=!n&&(t||i>=120&&l.length>=120)?new et(o&&l):undefined}l=e[0];var c=-1,v=u[0];e:while(++c<i&&f.length<a){var m=l[c],g=t?t(m):m;m=n||m!==0?m:0;if(v?!b(v,g):!r(f,g,n)){o=s;while(--o){var w=u[o];if(w?!b(w,g):!r(e[o],g,n))continue e}v&&v.push(g),f.push(m)}}return f}function st(e){if(!bt(e)||ct(e))return!1;var t=gt(e)||E(e)?O:u;return t.test(ht(e))}function ot(e,t){return t=_(t===undefined?e.length-1:t,0),function(){var n=arguments,r=-1,i=_(n.length-t,0),s=Array(i);while(++r<i)s[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=s,c(e,this,o)}}function ut(e){return mt(e)?e:[]}function at(e,t){var n=e.__data__;return lt(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ft(e,t){var n=w(e,t);return st(n)?n:undefined}function lt(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ct(e){return!!C&&C in e}function ht(e){if(e!=null){try{return k.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function dt(e,t){return e===t||e!==e&&t!==t}function vt(e){return e!=null&&yt(e.length)&&!gt(e)}function mt(e){return wt(e)&&vt(e)}function gt(e){var t=bt(e)?A.call(e):"";return t==i||t==s}function yt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}function bt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function wt(e){return!!e&&typeof e=="object"}var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Function]",s="[object GeneratorFunction]",o=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,a=typeof e=="object"&&e&&e.Object===Object&&e,f=typeof self=="object"&&self&&self.Object===Object&&self,l=a||f||Function("return this")(),S=Array.prototype,x=Function.prototype,T=Object.prototype,N=l["__core-js_shared__"],C=function(){var e=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),k=x.toString,L=T.hasOwnProperty,A=T.toString,O=RegExp("^"+k.call(L).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=S.splice,_=Math.max,D=Math.min,P=ft(l,"Map"),H=ft(Object,"create");B.prototype.clear=j,B.prototype["delete"]=F,B.prototype.get=I,B.prototype.has=q,B.prototype.set=R,U.prototype.clear=z,U.prototype["delete"]=W,U.prototype.get=X,U.prototype.has=V,U.prototype.set=$,J.prototype.clear=K,J.prototype["delete"]=Q,J.prototype.get=G,J.prototype.has=Y,J.prototype.set=Z,et.prototype.add=et.prototype.push=tt,et.prototype.has=nt;var pt=ot(function(e){var t=d(e,ut);return t.length&&t[0]===e[0]?it(t):[]});t.exports=pt}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],22:[function(e,t,n){(function(e){function J(e,t){return e.set(t[0],t[1]),e}function K(e,t){return e.add(t),e}function Q(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function G(e,t){var n=-1,r=e?e.length:0;while(++n<r)if(t(e[n],n,e)===!1)break;return e}function Y(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function Z(e,t,n,r){var i=-1,s=e?e.length:0;r&&s&&(n=e[++i]);while(++i<s)n=t(n,e[i],i,e);return n}function et(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function tt(e){return function(t){return e(t)}}function nt(e,t){return e==null?undefined:e[t]}function rt(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function it(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function st(e,t){return function(n){return e(t(n))}}function ot(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Rt(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Ut(){this.__data__=Dt?Dt(null):{}}function zt(e){return this.has(e)&&delete this.__data__[e]}function Wt(e){var t=this.__data__;if(Dt){var n=t[e];return n===i?undefined:n}return pt.call(t,e)?t[e]:undefined}function Xt(e){var t=this.__data__;return Dt?t[e]!==undefined:pt.call(t,e)}function Vt(e,t){var n=this.__data__;return n[e]=Dt&&t===undefined?i:t,this}function $t(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Jt(){this.__data__=[]}function Kt(e){var t=this.__data__,n=vn(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():xt.call(t,n,1),!0}function Qt(e){var t=this.__data__,n=vn(t,e);return n<0?undefined:t[n][1]}function Gt(e){return vn(this.__data__,e)>-1}function Yt(e,t){var n=this.__data__,r=vn(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function Zt(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function en(){this.__data__={hash:new Rt,map:new(At||$t),string:new Rt}}function tn(e){return Rn(this,e)["delete"](e)}function nn(e){return Rn(this,e).get(e)}function rn(e){return Rn(this,e).has(e)}function sn(e,t){return Rn(this,e).set(e,t),this}function on(e){this.__data__=new $t(e)}function un(){this.__data__=new $t}function an(e){return this.__data__["delete"](e)}function fn(e){return this.__data__.get(e)}function ln(e){return this.__data__.has(e)}function cn(e,t){var n=this.__data__;if(n instanceof $t){var i=n.__data__;if(!At||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Zt(i)}return n.set(e,t),this}function hn(e,t){var n=rr(e)||nr(e)?et(e.length,String):[],r=n.length,i=!!r;for(var s in e)(t||pt.call(e,s))&&(!i||s!="length"&&!Jn(s,r))&&n.push(s);return n}function pn(e,t,n){if(n!==undefined&&!tr(e[t],n)||typeof t=="number"&&n===undefined&&!(t in e))e[t]=n}function dn(e,t,n){var r=e[t];if(!pt.call(e,t)||!tr(r,n)||n===undefined&&!(t in e))e[t]=n}function vn(e,t){var n=e.length;while(n--)if(tr(e[n][0],t))return n;return-1}function mn(e,t){return e&&jn(t,dr(t),e)}function gn(e,t,n,r,i,s,u){var a;r&&(a=s?r(e,i,s,u):r(e));if(a!==undefined)return a;if(!fr(e))return e;var f=rr(e);if(f){a=Xn(e);if(!t)return Bn(e,a)}else{var l=Wn(e),p=l==c||l==h;if(or(e))return Ln(e,t);if(l==v||l==o||p&&!s){if(rt(e))return s?e:{};a=Vn(p?{}:e);if(!t)return Fn(e,mn(a,e))}else{if(!F[l])return s?e:{};a=$n(e,l,gn,t)}}u||(u=new on);var d=u.get(e);if(d)return d;u.set(e,a);if(!f)var m=n?qn(e):dr(e);return G(m||e,function(i,s){m&&(s=i,i=e[s]),dn(a,s,gn(i,t,n,r,s,e,u))}),a}function yn(e){return fr(e)?Et(e):{}}function bn(e,t,n){var r=t(e);return rr(e)?r:Y(r,n(e))}function wn(e){return vt.call(e)}function En(e){if(!fr(e)||Gn(e))return!1;var t=ur(e)||rt(e)?mt:H;return t.test(er(e))}function Sn(e){return lr(e)&&ar(e.length)&&!!j[vt.call(e)]}function xn(e){if(!Yn(e))return Ct(e);var t=[];for(var n in Object(e))pt.call(e,n)&&n!="constructor"&&t.push(n);return t}function Tn(e){if(!fr(e))return Zn(e);var t=Yn(e),n=[];for(var r in e)(r!="constructor"||!t&&!!pt.call(e,r))&&n.push(r);return n}function Nn(e,t,n,r,i){if(e===t)return;if(!rr(t)&&!hr(t))var s=Tn(t);G(s||t,function(o,u){s&&(u=o,o=t[u]);if(fr(o))i||(i=new on),Cn(e,t,u,n,Nn,r,i);else{var a=r?r(e[u],o,u+"",e,t,i):undefined;a===undefined&&(a=o),pn(e,u,a)}})}function Cn(e,t,n,r,i,s,o){var u=e[n],a=t[n],f=o.get(a);if(f){pn(e,n,f);return}var l=s?s(u,a,n+"",e,t,o):undefined,c=l===undefined;c&&(l=a,rr(a)||hr(a)?rr(u)?l=u:sr(u)?l=Bn(u):(c=!1,l=gn(a,!0)):cr(a)||nr(a)?nr(u)?l=pr(u):!fr(u)||r&&ur(u)?(c=!1,l=gn(a,!0)):l=u:c=!1),c&&(o.set(a,l),i(l,a,r,s,o),o["delete"](a)),pn(e,n,l)}function kn(e,t){return t=kt(t===undefined?e.length-1:t,0),function(){var n=arguments,r=-1,i=kt(n.length-t,0),s=Array(i);while(++r<i)s[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=s,Q(e,this,o)}}function Ln(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function An(e){var t=new e.constructor(e.byteLength);return(new bt(t)).set(new bt(e)),t}function On(e,t){var n=t?An(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Mn(e,t,n){var r=t?n(it(e),!0):it(e);return Z(r,J,new e.constructor)}function _n(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t}function Dn(e,t,n){var r=t?n(ot(e),!0):ot(e);return Z(r,K,new e.constructor)}function Pn(e){return qt?Object(qt.call(e)):{}}function Hn(e,t){var n=t?An(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Bn(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}function jn(e,t,n,r){n||(n={});var i=-1,s=t.length;while(++i<s){var o=t[i],u=r?r(n[o],e[o],o,n,e):undefined;dn(n,o,u===undefined?e[o]:u)}return n}function Fn(e,t){return jn(e,zn(e),t)}function In(e){return kn(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:undefined,o=i>2?n[2]:undefined;s=e.length>3&&typeof s=="function"?(i--,s):undefined,o&&Kn(n[0],n[1],o)&&(s=i<3?undefined:s,i=1),t=Object(t);while(++r<i){var u=n[r];u&&e(t,u,r,s)}return t})}function qn(e){return bn(e,dr,zn)}function Rn(e,t){var n=e.__data__;return Qn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Un(e,t){var n=nt(e,t);return En(n)?n:undefined}function Xn(e){var t=e.length,n=e.constructor(t);return t&&typeof e[0]=="string"&&pt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Vn(e){return typeof e.constructor=="function"&&!Yn(e)?yn(wt(e)):{}}function $n(e,t,n,r){var i=e.constructor;switch(t){case S:return An(e);case a:case f:return new i(+e);case x:return On(e,r);case T:case N:case C:case k:case L:case A:case O:case M:case _:return Hn(e,r);case p:return Mn(e,r,n);case d:case b:return new i(e);case g:return _n(e);case y:return Dn(e,r,n);case w:return Pn(e)}}function Jn(e,t){return t=t==null?s:t,!!t&&(typeof e=="number"||B.test(e))&&e>-1&&e%1==0&&e<t}function Kn(e,t,n){if(!fr(n))return!1;var r=typeof t;return(r=="number"?ir(n)&&Jn(t,n.length):r=="string"&&t in n)?tr(n[t],e):!1}function Qn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Gn(e){return!!ct&&ct in e}function Yn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ft;return e===n}function Zn(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}function er(e){if(e!=null){try{return ht.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function tr(e,t){return e===t||e!==e&&t!==t}function nr(e){return sr(e)&&pt.call(e,"callee")&&(!St.call(e,"callee")||vt.call(e)==o)}function ir(e){return e!=null&&ar(e.length)&&!ur(e)}function sr(e){return lr(e)&&ir(e)}function ur(e){var t=fr(e)?vt.call(e):"";return t==c||t==h}function ar(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=s}function fr(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function lr(e){return!!e&&typeof e=="object"}function cr(e){if(!lr(e)||vt.call(e)!=v||rt(e))return!1;var t=wt(e);if(t===null)return!0;var n=pt.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ht.call(n)==dt}function pr(e){return jn(e,vr(e))}function dr(e){return ir(e)?hn(e):xn(e)}function vr(e){return ir(e)?hn(e,!0):Tn(e)}function gr(){return[]}function yr(){return!1}var r=200,i="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",u="[object Array]",a="[object Boolean]",f="[object Date]",l="[object Error]",c="[object Function]",h="[object GeneratorFunction]",p="[object Map]",d="[object Number]",v="[object Object]",m="[object Promise]",g="[object RegExp]",y="[object Set]",b="[object String]",w="[object Symbol]",E="[object WeakMap]",S="[object ArrayBuffer]",x="[object DataView]",T="[object Float32Array]",N="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",L="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",M="[object Uint16Array]",_="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,P=/\w*$/,H=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,j={};j[T]=j[N]=j[C]=j[k]=j[L]=j[A]=j[O]=j[M]=j[_]=!0,j[o]=j[u]=j[S]=j[a]=j[x]=j[f]=j[l]=j[c]=j[p]=j[d]=j[v]=j[g]=j[y]=j[b]=j[E]=!1;var F={};F[o]=F[u]=F[S]=F[x]=F[a]=F[f]=F[T]=F[N]=F[C]=F[k]=F[L]=F[p]=F[d]=F[v]=F[g]=F[y]=F[b]=F[w]=F[A]=F[O]=F[M]=F[_]=!0,F[l]=F[c]=F[E]=!1;var I=typeof e=="object"&&e&&e.Object===Object&&e,q=typeof self=="object"&&self&&self.Object===Object&&self,R=I||q||Function("return this")(),U=typeof n=="object"&&n&&!n.nodeType&&n,z=U&&typeof t=="object"&&t&&!t.nodeType&&t,W=z&&z.exports===U,X=W&&I.process,V=function(){try{return X&&X.binding("util")}catch(e){}}(),$=V&&V.isTypedArray,ut=Array.prototype,at=Function.prototype,ft=Object.prototype,lt=R["__core-js_shared__"],ct=function(){var e=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ht=at.toString,pt=ft.hasOwnProperty,dt=ht.call(Object),vt=ft.toString,mt=RegExp("^"+ht.call(pt).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=W?R.Buffer:undefined,yt=R.Symbol,bt=R.Uint8Array,wt=st(Object.getPrototypeOf,Object),Et=Object.create,St=ft.propertyIsEnumerable,xt=ut.splice,Tt=Object.getOwnPropertySymbols,Nt=gt?gt.isBuffer:undefined,Ct=st(Object.keys,Object),kt=Math.max,Lt=Un(R,"DataView"),At=Un(R,"Map"),Ot=Un(R,"Promise"),Mt=Un(R,"Set"),_t=Un(R,"WeakMap"),Dt=Un(Object,"create"),Pt=er(Lt),Ht=er(At),Bt=er(Ot),jt=er(Mt),Ft=er(_t),It=yt?yt.prototype:undefined,qt=It?It.valueOf:undefined;Rt.prototype.clear=Ut,Rt.prototype["delete"]=zt,Rt.prototype.get=Wt,Rt.prototype.has=Xt,Rt.prototype.set=Vt,$t.prototype.clear=Jt,$t.prototype["delete"]=Kt,$t.prototype.get=Qt,$t.prototype.has=Gt,$t.prototype.set=Yt,Zt.prototype.clear=en,Zt.prototype["delete"]=tn,Zt.prototype.get=nn,Zt.prototype.has=rn,Zt.prototype.set=sn,on.prototype.clear=un,on.prototype["delete"]=an,on.prototype.get=fn,on.prototype.has=ln,on.prototype.set=cn;var zn=Tt?st(Tt,Object):gr,Wn=wn;if(Lt&&Wn(new Lt(new ArrayBuffer(1)))!=x||At&&Wn(new At)!=p||Ot&&Wn(Ot.resolve())!=m||Mt&&Wn(new Mt)!=y||_t&&Wn(new _t)!=E)Wn=function(e){var t=vt.call(e),n=t==v?e.constructor:undefined,r=n?er(n):undefined;if(r)switch(r){case Pt:return x;case Ht:return p;case Bt:return m;case jt:return y;case Ft:return E}return t};var rr=Array.isArray,or=Nt||yr,hr=$?tt($):Sn,mr=In(function(e,t,n){Nn(e,t,n)});t.exports=mr}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],23:[function(e,t,n){(function(e){function m(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function g(e,t){var n=e?e.length:0;return!!n&&S(e,t,0)>-1}function y(e,t,n){var r=-1,i=e?e.length:0;while(++r<i)if(n(t,e[r]))return!0;return!1}function b(e,t){var n=-1,r=e?e.length:0,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function w(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function E(e,t,n,r){var i=e.length,s=n+(r?1:-1);while(r?s--:++s<i)if(t(e[s],s,e))return s;return-1}function S(e,t,n){if(t!==t)return E(e,x,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function x(e){return e!==e}function T(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function N(e){return function(t){return e(t)}}function C(e,t){return e.has(t)}function k(e,t){return e==null?undefined:e[t]}function L(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function A(e,t){return function(n){return e(t(n))}}function J(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function K(){this.__data__=$?$(null):{}}function Q(e){return this.has(e)&&delete this.__data__[e]}function G(e){var t=this.__data__;if($){var n=t[e];return n===r?undefined:n}return B.call(t,e)?t[e]:undefined}function Y(e){var t=this.__data__;return $?t[e]!==undefined:B.call(t,e)}function Z(e,t){var n=this.__data__;return n[e]=$&&t===undefined?r:t,this}function et(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function tt(){this.__data__=[]}function nt(e){var t=this.__data__,n=mt(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():U.call(t,n,1),!0}function rt(e){var t=this.__data__,n=mt(t,e);return n<0?undefined:t[n][1]}function it(e){return mt(this.__data__,e)>-1}function st(e,t){var n=this.__data__,r=mt(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function ot(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function ut(){this.__data__={hash:new J,map:new(V||et),string:new J}}function at(e){return Ct(this,e)["delete"](e)}function ft(e){return Ct(this,e).get(e)}function lt(e){return Ct(this,e).has(e)}function ct(e,t){return Ct(this,e).set(e,t),this}function ht(e){var t=-1,n=e?e.length:0;this.__data__=new ot;while(++t<n)this.add(e[t])}function pt(e){return this.__data__.set(e,r),this}function dt(e){return this.__data__.has(e)}function vt(e,t){var n=qt(e)||It(e)?T(e.length,String):[],r=n.length,i=!!r;for(var s in e)(t||B.call(e,s))&&(!i||s!="length"&&!Mt(s,r))&&n.push(s);return n}function mt(e,t){var n=e.length;while(n--)if(Ft(e[n][0],t))return n;return-1}function gt(e,t,r,i){var s=-1,o=g,u=!0,a=e.length,f=[],l=t.length;if(!a)return f;r&&(t=b(t,N(r))),i?(o=y,u=!1):t.length>=n&&(o=C,u=!1,t=new ht(t));e:while(++s<a){var c=e[s],h=r?r(c):c;c=i||c!==0?c:0;if(u&&h===h){var p=l;while(p--)if(t[p]===h)continue e;f.push(c)}else o(t,h,i)||f.push(c)}return f}function yt(e,t,n,r,i){var s=-1,o=e.length;n||(n=Ot),i||(i=[]);while(++s<o){var u=e[s];t>0&&n(u)?t>1?yt(u,t-1,n,r,i):w(i,u):r||(i[i.length]=u)}return i}function bt(e,t,n){var r=t(e);return qt(e)?r:w(r,n(e))}function wt(e){if(!Xt(e)||Dt(e))return!1;var t=zt(e)||L(e)?F:c;return t.test(jt(e))}function Et(e){if(!Xt(e))return Ht(e);var t=Pt(e),n=[];for(var r in e)(r!="constructor"||!t&&!!B.call(e,r))&&n.push(r);return n}function St(e,t){return e=Object(e),xt(e,t,function(t,n){return n in e})}function xt(e,t,n){var r=-1,i=t.length,s={};while(++r<i){var o=t[r],u=e[o];n(u,o)&&(s[o]=u)}return s}function Tt(e,t){return t=X(t===undefined?e.length-1:t,0),function(){var n=arguments,r=-1,i=X(n.length-t,0),s=Array(i);while(++r<i)s[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=s,m(e,this,o)}}function Nt(e){return bt(e,Jt,At)}function Ct(e,t){var n=e.__data__;return _t(t)?n[typeof t=="string"?"string":"hash"]:n.map}function kt(e,t){var n=k(e,t);return wt(n)?n:undefined}function Ot(e){return qt(e)||It(e)||!!(z&&e&&e[z])}function Mt(e,t){return t=t==null?s:t,!!t&&(typeof e=="number"||h.test(e))&&e>-1&&e%1==0&&e<t}function _t(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Dt(e){return!!P&&P in e}function Pt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||_;return e===n}function Ht(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}function Bt(e){if(typeof e=="string"||$t(e))return e;var t=e+"";return t=="0"&&1/e==-i?"-0":t}function jt(e){if(e!=null){try{return H.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ft(e,t){return e===t||e!==e&&t!==t}function It(e){return Ut(e)&&B.call(e,"callee")&&(!R.call(e,"callee")||j.call(e)==o)}function Rt(e){return e!=null&&Wt(e.length)&&!zt(e)}function Ut(e){return Vt(e)&&Rt(e)}function zt(e){var t=Xt(e)?j.call(e):"";return t==u||t==a}function Wt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=s}function Xt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Vt(e){return!!e&&typeof e=="object"}function $t(e){return typeof e=="symbol"||Vt(e)&&j.call(e)==f}function Jt(e){return Rt(e)?vt(e,!0):Et(e)}function Qt(){return[]}var n=200,r="__lodash_hash_undefined__",i=1/0,s=9007199254740991,o="[object Arguments]",u="[object Function]",a="[object GeneratorFunction]",f="[object Symbol]",l=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,p=typeof e=="object"&&e&&e.Object===Object&&e,d=typeof self=="object"&&self&&self.Object===Object&&self,v=p||d||Function("return this")(),O=Array.prototype,M=Function.prototype,_=Object.prototype,D=v["__core-js_shared__"],P=function(){var e=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),H=M.toString,B=_.hasOwnProperty,j=_.toString,F=RegExp("^"+H.call(B).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=v.Symbol,q=A(Object.getPrototypeOf,Object),R=_.propertyIsEnumerable,U=O.splice,z=I?I.isConcatSpreadable:undefined,W=Object.getOwnPropertySymbols,X=Math.max,V=kt(v,"Map"),$=kt(Object,"create");J.prototype.clear=K,J.prototype["delete"]=Q,J.prototype.get=G,J.prototype.has=Y,J.prototype.set=Z,et.prototype.clear=tt,et.prototype["delete"]=nt,et.prototype.get=rt,et.prototype.has=it,et.prototype.set=st,ot.prototype.clear=ut,ot.prototype["delete"]=at,ot.prototype.get=ft,ot.prototype.has=lt,ot.prototype.set=ct,ht.prototype.add=ht.prototype.push=pt,ht.prototype.has=dt;var Lt=W?A(W,Object):Qt,At=W?function(e){var t=[];while(e)w(t,Lt(e)),e=q(e);return t}:Qt,qt=Array.isArray,Kt=Tt(function(e,t){return e==null?{}:(t=b(yt(t,1),Bt),St(e,gt(Nt(e),t)))});t.exports=Kt}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],24:[function(e,t,n){(function(e){function B(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function j(e,t){var n=-1,r=e?e.length:0;while(++n<r)if(t(e[n],n,e)===!1)break;return e}function F(e,t){var n=e?e.length:0;return!!n&&q(e,t,0)>-1}function I(e,t,n,r){var i=e.length,s=n+(r?1:-1);while(r?s--:++s<i)if(t(e[s],s,e))return s;return-1}function q(e,t,n){if(t!==t)return I(e,R,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function R(e){return e!==e}function U(e,t){var n=e.length,r=0;while(n--)e[n]===t&&r++;return r}function z(e,t){return e==null?undefined:e[t]}function W(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function X(e,t){var n=-1,i=e.length,s=0,o=[];while(++n<i){var u=e[n];if(u===t||u===r)e[n]=r,o[s++]=n}return o}function it(e){return At(e)?et(e):{}}function st(e){if(!At(e)||St(e))return!1;var t=Lt(e)||W(e)?Z:A;return t.test(Nt(e))}function ot(e,t){return t=tt(t===undefined?e.length-1:t,0),function(){var n=arguments,r=-1,i=tt(n.length-t,0),s=Array(i);while(++r<i)s[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=s,B(e,this,o)}}function ut(e,t,n,r){var i=-1,s=e.length,o=n.length,u=-1,a=t.length,f=tt(s-o,0),l=Array(a+f),c=!r;while(++u<a)l[u]=t[u];while(++i<o)if(c||i<s)l[n[i]]=e[i];while(f--)l[u++]=e[i++];return l}function at(e,t,n,r){var i=-1,s=e.length,o=-1,u=n.length,a=-1,f=t.length,l=tt(s-u,0),c=Array(l+f),h=!r;while(++i<l)c[i]=e[i];var p=i;while(++a<f)c[p+a]=t[a];while(++o<u)if(h||i<s)c[p+n[o]]=e[i++];return c}function ft(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}function lt(e,t,n){function o(){var t=this&&this!==H&&this instanceof o?s:e;return t.apply(r?n:this,arguments)}var r=t&i,s=ct(e);return o}function ct(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=it(e.prototype),r=e.apply(n,t);return At(r)?r:n}}function ht(e,t,n){function i(){var s=arguments.length,o=Array(s),u=s,a=gt(i);while(u--)o[u]=arguments[u];var f=s<3&&o[0]!==a&&o[s-1]!==a?[]:X(o,a);s-=f.length;if(s<n)return vt(e,t,pt,i.placeholder,undefined,o,f,undefined,undefined,n-s);var l=this&&this!==H&&this instanceof i?r:e;return B(l,this,o)}var r=ct(e);return i}function pt(e,t,n,r,o,f,l,h,d,v){function S(){var i=arguments.length,s=Array(i),u=i;while(u--)s[u]=arguments[u];if(b)var a=gt(S),c=U(s,a);r&&(s=ut(s,r,o,b)),f&&(s=at(s,f,l,b)),i-=c;if(b&&i<v){var p=X(s,a);return vt(e,t,pt,S.placeholder,n,s,p,h,d,v-i)}var x=g?n:this,T=y?x[e]:e;return i=s.length,h?s=xt(s,h):w&&i>1&&s.reverse(),m&&d<i&&(s.length=d),this&&this!==H&&this instanceof S&&(T=E||ct(T)),T.apply(x,s)}var m=t&c,g=t&i,y=t&s,b=t&(u|a),w=t&p,E=y?undefined:ct(e);return S}function dt(e,t,n,r){function u(){var t=-1,i=arguments.length,a=-1,f=r.length,l=Array(f+i),c=this&&this!==H&&this instanceof u?o:e;while(++a<f)l[a]=r[a];while(i--)l[a++]=arguments[++t];return B(c,s?n:this,l)}var s=t&i,o=ct(e);return u}function vt(e,t,n,r,a,c,h,p,d,v){var m=t&u,g=m?h:undefined,y=m?undefined:h,b=m?c:undefined,w=m?undefined:c;t|=m?f:l,t&=~(m?l:f),t&o||(t&=~(i|s));var E=n(e,t,a,b,g,w,y,p,d,v);return E.placeholder=r,Tt(E,e,t)}function mt(e,t,r,o,c,h,p,d){var v=t&s;if(!v&&typeof e!="function")throw new TypeError(n);var m=o?o.length:0;m||(t&=~(f|l),o=c=undefined),p=p===undefined?p:tt(Dt(p),0),d=d===undefined?d:Dt(d),m-=c?c.length:0;if(t&l){var g=o,y=c;o=c=undefined}var b=[e,t,r,o,c,g,y,h,p,d];e=b[0],t=b[1],r=b[2],o=b[3],c=b[4],d=b[9]=b[9]==null?v?0:e.length:tt(b[9]-m,0),!d&&t&(u|a)&&(t&=~(u|a));if(!t||t==i)var w=lt(e,t,r);else t==u||t==a?w=ht(e,t,d):t!=f&&t!=(i|f)||!!c.length?w=pt.apply(undefined,b):w=dt(e,t,r,o);return Tt(w,e,t)}function gt(e){var t=e;return t.placeholder}function yt(e,t){var n=z(e,t);return st(n)?n:undefined}function bt(e){var t=e.match(N);return t?t[1].split(C):[]}function wt(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(T,"{\n/* [wrapped with "+t+"] */\n")}function Et(e,t){return t=t==null?v:t,!!t&&(typeof e=="number"||M.test(e))&&e>-1&&e%1==0&&e<t}function St(e){return!!K&&K in e}function xt(e,t){var n=e.length,r=nt(t.length,n),i=ft(e);while(r--){var s=t[r];e[r]=Et(s,n)?i[s]:undefined}return e}function Nt(e){if(e!=null){try{return Q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ct(e,t){return j(y,function(n){var r="_."+n[0];t&n[1]&&!F(e,r)&&e.push(r)}),e.sort()}function Lt(e){var t=At(e)?Y.call(e):"";return t==b||t==w}function At(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ot(e){return!!e&&typeof e=="object"}function Mt(e){return typeof e=="symbol"||Ot(e)&&Y.call(e)==E}function _t(e){if(!e)return e===0?e:0;e=Pt(e);if(e===d||e===-d){var t=e<0?-1:1;return t*m}return e===e?e:0}function Dt(e){var t=_t(e),n=t%1;return t===t?n?t-n:t:0}function Pt(e){if(typeof e=="number")return e;if(Mt(e))return g;if(At(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=At(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(x,"");var n=L.test(e);return n||O.test(e)?_(e.slice(2),n?2:8):k.test(e)?g:+e}function Ht(e){return function(){return e}}function Bt(e){return e}var n="Expected a function",r="__lodash_placeholder__",i=1,s=2,o=4,u=8,a=16,f=32,l=64,c=128,h=256,p=512,d=1/0,v=9007199254740991,m=1.7976931348623157e308,g=0/0,y=[["ary",c],["bind",i],["bindKey",s],["curry",u],["curryRight",a],["flip",p],["partial",f],["partialRight",l],["rearg",h]],b="[object Function]",w="[object GeneratorFunction]",E="[object Symbol]",S=/[\\^$.*+?()[\]{}|]/g,x=/^\s+|\s+$/g,T=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,N=/\{\n\/\* \[wrapped with (.+)\] \*/,C=/,? & /,k=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,A=/^\[object .+?Constructor\]$/,O=/^0o[0-7]+$/i,M=/^(?:0|[1-9]\d*)$/,_=parseInt,D=typeof e=="object"&&e&&e.Object===Object&&e,P=typeof self=="object"&&self&&self.Object===Object&&self,H=D||P||Function("return this")(),V=Function.prototype,$=Object.prototype,J=H["__core-js_shared__"],K=function(){var e=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Q=V.toString,G=$.hasOwnProperty,Y=$.toString,Z=RegExp("^"+Q.call(G).replace(S,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=Object.create,tt=Math.max,nt=Math.min,rt=function(){var e=yt(Object,"defineProperty"),t=yt.name;return t&&t.length>2?e:undefined}(),Tt=rt?function(e,t,n){var r=t+"";return rt(e,"toString",{configurable:!0,enumerable:!1,value:Ht(wt(r,Ct(bt(r),n)))})}:Bt,kt=ot(function(e,t){var n=X(t,gt(kt));return mt(e,l,undefined,t,n)});kt.placeholder={},t.exports=kt}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],25:[function(e,t,n){(function(e){function c(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function h(e,t){var n=-1,r=e?e.length:0,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function p(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function E(e,t,n,r,i){var s=-1,o=e.length;n||(n=N),i||(i=[]);while(++s<o){var u=e[s];t>0&&n(u)?t>1?E(u,t-1,n,r,i):p(i,u):r||(i[i.length]=u)}return i}function S(e,t){return e=Object(e),x(e,t,function(t,n){return n in e})}function x(e,t,n){var r=-1,i=t.length,s={};while(++r<i){var o=t[r],u=e[o];n(u,o)&&(s[o]=u)}return s}function T(e,t){return t=w(t===undefined?e.length-1:t,0),function(){var n=arguments,r=-1,i=w(n.length-t,0),s=Array(i);while(++r<i)s[r]=n[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=n[r];return o[t]=s,c(e,this,o)}}function N(e){return L(e)||k(e)||!!(b&&e&&e[b])}function C(e){if(typeof e=="string"||H(e))return e;var t=e+"";return t=="0"&&1/e==-n?"-0":t}function k(e){return O(e)&&v.call(e,"callee")&&(!y.call(e,"callee")||m.call(e)==i)}function A(e){return e!=null&&_(e.length)&&!M(e)}function O(e){return P(e)&&A(e)}function M(e){var t=D(e)?m.call(e):"";return t==s||t==o}function _(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=r}function D(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function P(e){return!!e&&typeof e=="object"}function H(e){return typeof e=="symbol"||P(e)&&m.call(e)==u}var n=1/0,r=9007199254740991,i="[object Arguments]",s="[object Function]",o="[object GeneratorFunction]",u="[object Symbol]",a=typeof e=="object"&&e&&e.Object===Object&&e,f=typeof self=="object"&&self&&self.Object===Object&&self,l=a||f||Function("return this")(),d=Object.prototype,v=d.hasOwnProperty,m=d.toString,g=l.Symbol,y=d.propertyIsEnumerable,b=g?g.isConcatSpreadable:undefined,w=Math.max,L=Array.isArray,B=T(function(e,t){return e==null?{}:S(e,h(E(t,1),C))});t.exports=B}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],26:[function(e,t,n){(function(e){function h(e,t){var n=e?e.length:0;return!!n&&v(e,t,0)>-1}function p(e,t,n){var r=-1,i=e?e.length:0;while(++r<i)if(n(t,e[r]))return!0;return!1}function d(e,t,n,r){var i=e.length,s=n+(r?1:-1);while(r?s--:++s<i)if(t(e[s],s,e))return s;return-1}function v(e,t,n){if(t!==t)return d(e,m,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function m(e){return e!==e}function g(e,t){return e.has(t)}function y(e,t){return e==null?undefined:e[t]}function b(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function w(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function P(e){var t=-1
,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function H(){this.__data__=D?D(null):{}}function B(e){return this.has(e)&&delete this.__data__[e]}function j(e){var t=this.__data__;if(D){var n=t[e];return n===r?undefined:n}return k.call(t,e)?t[e]:undefined}function F(e){var t=this.__data__;return D?t[e]!==undefined:k.call(t,e)}function I(e,t){var n=this.__data__;return n[e]=D&&t===undefined?r:t,this}function q(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function R(){this.__data__=[]}function U(e){var t=this.__data__,n=tt(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():O.call(t,n,1),!0}function z(e){var t=this.__data__,n=tt(t,e);return n<0?undefined:t[n][1]}function W(e){return tt(this.__data__,e)>-1}function X(e,t){var n=this.__data__,r=tt(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function V(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function $(){this.__data__={hash:new P,map:new(M||q),string:new P}}function J(e){return st(this,e)["delete"](e)}function K(e){return st(this,e).get(e)}function Q(e){return st(this,e).has(e)}function G(e,t){return st(this,e).set(e,t),this}function Y(e){var t=-1,n=e?e.length:0;this.__data__=new V;while(++t<n)this.add(e[t])}function Z(e){return this.__data__.set(e,r),this}function et(e){return this.__data__.has(e)}function tt(e,t){var n=e.length;while(n--)if(ct(e[n][0],t))return n;return-1}function nt(e){if(!pt(e)||at(e))return!1;var t=ht(e)||b(e)?A:a;return t.test(ft(e))}function rt(e,t,r){var i=-1,s=h,o=e.length,u=!0,a=[],f=a;if(r)u=!1,s=p;else if(o>=n){var l=t?null:it(e);if(l)return w(l);u=!1,s=g,f=new Y}else f=t?[]:a;e:while(++i<o){var c=e[i],d=t?t(c):c;c=r||c!==0?c:0;if(u&&d===d){var v=f.length;while(v--)if(f[v]===d)continue e;t&&f.push(d),a.push(c)}else s(f,d,r)||(f!==a&&f.push(d),a.push(c))}return a}function st(e,t){var n=e.__data__;return ut(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ot(e,t){var n=y(e,t);return nt(n)?n:undefined}function ut(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function at(e){return!!N&&N in e}function ft(e){if(e!=null){try{return C.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function lt(e){return e&&e.length?rt(e):[]}function ct(e,t){return e===t||e!==e&&t!==t}function ht(e){var t=pt(e)?L.call(e):"";return t==s||t==o}function pt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function dt(){}var n=200,r="__lodash_hash_undefined__",i=1/0,s="[object Function]",o="[object GeneratorFunction]",u=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,f=typeof e=="object"&&e&&e.Object===Object&&e,l=typeof self=="object"&&self&&self.Object===Object&&self,c=f||l||Function("return this")(),E=Array.prototype,S=Function.prototype,x=Object.prototype,T=c["__core-js_shared__"],N=function(){var e=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),C=S.toString,k=x.hasOwnProperty,L=x.toString,A=RegExp("^"+C.call(k).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=E.splice,M=ot(c,"Map"),_=ot(c,"Set"),D=ot(Object,"create");P.prototype.clear=H,P.prototype["delete"]=B,P.prototype.get=j,P.prototype.has=F,P.prototype.set=I,q.prototype.clear=R,q.prototype["delete"]=U,q.prototype.get=z,q.prototype.has=W,q.prototype.set=X,V.prototype.clear=$,V.prototype["delete"]=J,V.prototype.get=K,V.prototype.has=Q,V.prototype.set=G,Y.prototype.add=Y.prototype.push=Z,Y.prototype.has=et;var it=!_||1/w(new _([,-0]))[1]!=i?dt:function(e){return new _(e)};t.exports=lt}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],27:[function(e,t,n){(function(n,r){typeof define=="function"&&define.amd?define([],r):typeof e=="function"&&typeof t=="object"&&t&&t.exports?t.exports=r():(n.dcodeIO=n.dcodeIO||{}).Long=r()})(this,function(){"use strict";function e(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}function t(e){return(e&&e.__isLong__)===!0}function i(e,t){var i,s,u;if(t){e>>>=0;if(u=0<=e&&e<256){s=r[e];if(s)return s}return i=o(e,(e|0)<0?-1:0,!0),u&&(r[e]=i),i}e|=0;if(u=-128<=e&&e<128){s=n[e];if(s)return s}return i=o(e,e<0?-1:0,!1),u&&(n[e]=i),i}function s(e,t){if(isNaN(e)||!isFinite(e))return t?g:m;if(t){if(e<0)return g;if(e>=p)return S}else{if(e<=-d)return x;if(e+1>=d)return E}return e<0?s(-e,t).neg():o(e%h|0,e/h|0,t)}function o(t,n,r){return new e(t,n,r)}function a(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return m;typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10;if(n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return a(e.substring(1),t,n).neg();var i=s(u(n,8)),o=m;for(var f=0;f<e.length;f+=8){var l=Math.min(8,e.length-f),c=parseInt(e.substring(f,f+l),n);if(l<8){var h=s(u(n,l));o=o.mul(h).add(s(c))}else o=o.mul(i),o=o.add(s(c))}return o.unsigned=t,o}function f(t){return t instanceof e?t:typeof t=="number"?s(t):typeof t=="string"?a(t):o(t.low,t.high,t.unsigned)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},r={};e.fromInt=i,e.fromNumber=s,e.fromBits=o;var u=Math.pow;e.fromString=a,e.fromValue=f;var l=65536,c=1<<24,h=l*l,p=h*h,d=p/2,v=i(c),m=i(0);e.ZERO=m;var g=i(0,!0);e.UZERO=g;var y=i(1);e.ONE=y;var b=i(1,!0);e.UONE=b;var w=i(-1);e.NEG_ONE=w;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var S=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=S;var x=o(0,-2147483648,!1);e.MIN_VALUE=x;var T=e.prototype;return T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function N(e){e=e||10;if(e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}var i=s(u(e,6),this.unsigned),o=this,a="";for(;;){var f=o.div(i),l=o.sub(f.mul(i)).toInt()>>>0,c=l.toString(e);o=f;if(o.isZero())return c+a;while(c.length<6)c="0"+c;a=""+c+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();var t=this.high!=0?this.high:this.low;for(var n=31;n>0;n--)if((t&1<<n)!=0)break;return this.high!=0?n+33:n+1},T.isZero=function(){return this.high===0&&this.low===0},T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(this.low&1)===1},T.isEven=function(){return(this.low&1)===0},T.equals=function(n){return t(n)||(n=f(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.compare=function(n){t(n)||(n=f(n));if(this.eq(n))return 0;var r=this.isNegative(),i=n.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(y)},T.neg=T.negate,T.add=function(n){t(n)||(n=f(n));var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,u=this.low&65535,a=n.high>>>16,l=n.high&65535,c=n.low>>>16,h=n.low&65535,p=0,d=0,v=0,m=0;return m+=u+h,v+=m>>>16,m&=65535,v+=s+c,d+=v>>>16,v&=65535,d+=i+l,p+=d>>>16,d&=65535,p+=r+a,p&=65535,o(v<<16|m,p<<16|d,this.unsigned)},T.subtract=function(n){return t(n)||(n=f(n)),this.add(n.neg())},T.sub=T.subtract,T.multiply=function(n){if(this.isZero())return m;t(n)||(n=f(n));if(n.isZero())return m;if(this.eq(x))return n.isOdd()?x:m;if(n.eq(x))return this.isOdd()?x:m;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(v)&&n.lt(v))return s(this.toNumber()*n.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,u=this.low>>>16,a=this.low&65535,l=n.high>>>16,c=n.high&65535,h=n.low>>>16,p=n.low&65535,d=0,g=0,y=0,b=0;return b+=a*p,y+=b>>>16,b&=65535,y+=u*p,g+=y>>>16,y&=65535,y+=a*h,g+=y>>>16,y&=65535,g+=i*p,d+=g>>>16,g&=65535,g+=u*h,d+=g>>>16,g&=65535,g+=a*c,d+=g>>>16,g&=65535,d+=r*p+i*h+u*c+a*l,d&=65535,o(y<<16|b,d<<16|g,this.unsigned)},T.mul=T.multiply,T.divide=function(n){t(n)||(n=f(n));if(n.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:m;var r,i,o;if(!this.unsigned){if(this.eq(x)){if(n.eq(y)||n.eq(w))return x;if(n.eq(x))return y;var a=this.shr(1);return r=a.div(n).shl(1),r.eq(m)?n.isNegative()?y:w:(i=this.sub(n.mul(r)),o=r.add(i.div(n)),o)}if(n.eq(x))return this.unsigned?g:m;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();o=m}else{n.unsigned||(n=n.toUnsigned());if(n.gt(this))return g;if(n.gt(this.shru(1)))return b;o=g}i=this;while(i.gte(n)){r=Math.max(1,Math.floor(i.toNumber()/n.toNumber()));var l=Math.ceil(Math.log(r)/Math.LN2),c=l<=48?1:u(2,l-48),h=s(r),p=h.mul(n);while(p.isNegative()||p.gt(i))r-=c,h=s(r,this.unsigned),p=h.mul(n);h.isZero()&&(h=y),o=o.add(h),i=i.sub(p)}return o},T.div=T.divide,T.modulo=function(n){return t(n)||(n=f(n)),this.sub(this.div(n).mul(n))},T.mod=T.modulo,T.not=function(){return o(~this.low,~this.high,this.unsigned)},T.and=function(n){return t(n)||(n=f(n)),o(this.low&n.low,this.high&n.high,this.unsigned)},T.or=function(n){return t(n)||(n=f(n)),o(this.low|n.low,this.high|n.high,this.unsigned)},T.xor=function(n){return t(n)||(n=f(n)),o(this.low^n.low,this.high^n.high,this.unsigned)},T.shiftLeft=function(n){return t(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?o(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):o(0,this.low<<n-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(n){return t(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?o(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):o(this.high>>n-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(n){t(n)&&(n=n.toInt()),n&=63;if(n===0)return this;var r=this.high;if(n<32){var i=this.low;return o(i>>>n|r<<32-n,r>>>n,this.unsigned)}return n===32?o(r,0,this.unsigned):o(r>>>n-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24&255,e&255,e>>>8&255,e>>>16&255,e>>>24&255]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255]},e})},{}],28:[function(e,t,n){function i(e,t){var n=function(){return new r.aes.Algorithm(e,t)};r.cipher.registerAlgorithm(e,n)}function h(){s=!0,f=[0,1,2,4,8,16,32,64,128,27,54];var e=new Array(256);for(var t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;u=new Array(256),a=new Array(256),l=new Array(4),c=new Array(4);for(var t=0;t<4;++t)l[t]=new Array(256),c[t]=new Array(256);var n=0,r=0,i,o,h,p,d,v,m;for(var t=0;t<256;++t){p=r^r<<1^r<<2^r<<3^r<<4,p=p>>8^p&255^99,u[n]=p,a[p]=n,d=e[p],i=e[n],o=e[i],h=e[o],v=d<<24^p<<16^p<<8^(p^d),m=(i^o^h)<<24^(n^h)<<16^(n^o^h)<<8^(n^i^h);for(var g=0;g<4;++g)l[g][n]=v,c[g][p]=m,v=v<<24|v>>>8,m=m<<24|m>>>8;n===0?n=r=1:(n=i^e[e[e[i^h]]],r^=e[e[r]])}}function p(e,t){var n=e.slice(0),r,i=1,s=n.length,a=s+6+1,l=o*a;for(var h=s;h<l;++h)r=n[h-1],h%s===0?(r=u[r>>>16&255]<<24^u[r>>>8&255]<<16^u[r&255]<<8^u[r>>>24]^f[i]<<24,i++):s>6&&h%s===4&&(r=u[r>>>24]<<24^u[r>>>16&255]<<16^u[r>>>8&255]<<8^u[r&255]),n[h]=n[h-s]^r;if(t){var p,d=c[0],v=c[1],m=c[2],g=c[3],y=n.slice(0);l=n.length;for(var h=0,b=l-o;h<l;h+=o,b-=o)if(h===0||h===l-o)y[h]=n[b],y[h+1]=n[b+3],y[h+2]=n[b+2],y[h+3]=n[b+1];else for(var w=0;w<o;++w)p=n[b+w],y[h+(3&-w)]=d[u[p>>>24]]^v[u[p>>>16&255]]^m[u[p>>>8&255]]^g[u[p&255]];n=y}return n}function d(e,t,n,r){var i=e.length/4-1,s,o,f,h,p;r?(s=c[0],o=c[1],f=c[2],h=c[3],p=a):(s=l[0],o=l[1],f=l[2],h=l[3],p=u);var d,v,m,g,y,b,w;d=t[0]^e[0],v=t[r?3:1]^e[1],m=t[2]^e[2],g=t[r?1:3]^e[3];var E=3;for(var S=1;S<i;++S)y=s[d>>>24]^o[v>>>16&255]^f[m>>>8&255]^h[g&255]^e[++E],b=s[v>>>24]^o[m>>>16&255]^f[g>>>8&255]^h[d&255]^e[++E],w=s[m>>>24]^o[g>>>16&255]^f[d>>>8&255]^h[v&255]^e[++E],g=s[g>>>24]^o[d>>>16&255]^f[v>>>8&255]^h[m&255]^e[++E],d=y,v=b,m=w;n[0]=p[d>>>24]<<24^p[v>>>16&255]<<16^p[m>>>8&255]<<8^p[g&255]^e[++E],n[r?3:1]=p[v>>>24]<<24^p[m>>>16&255]<<16^p[g>>>8&255]<<8^p[d&255]^e[++E],n[2]=p[m>>>24]<<24^p[g>>>16&255]<<16^p[d>>>8&255]<<8^p[v&255]^e[++E],n[r?1:3]=p[g>>>24]<<24^p[d>>>16&255]<<16^p[v>>>8&255]<<8^p[m&255]^e[++E]}function v(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="AES-"+t,i;e.decrypt?i=r.cipher.createDecipher(n,e.key):i=r.cipher.createCipher(n,e.key);var s=i.start;return i.start=function(e,t){var n=null;t instanceof r.util.ByteBuffer&&(n=t,t={}),t=t||{},t.output=n,t.iv=e,s.call(i,t)},i}var r=e("./forge");e("./cipher"),e("./cipherModes"),e("./util"),t.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(e,t,n,r){var i=v({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i},r.aes.createEncryptionCipher=function(e,t){return v({key:e,output:null,decrypt:!1,mode:t})},r.aes.startDecrypting=function(e,t,n,r){var i=v({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i},r.aes.createDecryptionCipher=function(e,t){return v({key:e,output:null,decrypt:!0,mode:t})},r.aes.Algorithm=function(e,t){s||h();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return d(n._w,e,t,!1)},decrypt:function(e,t){return d(n._w,e,t,!0)}}}),n._init=!1},r.aes.Algorithm.prototype.initialize=function(e){if(this._init)return;var t=e.key,n;if(typeof t!="string"||t.length!==16&&t.length!==24&&t.length!==32){if(r.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){n=t,t=r.util.createBuffer();for(var i=0;i<n.length;++i)t.putByte(n[i])}}else t=r.util.createBuffer(t);if(!r.util.isArray(t)){n=t,t=[];var s=n.length();if(s===16||s===24||s===32){s>>>=2;for(var i=0;i<s;++i)t.push(n.getInt32())}}if(!r.util.isArray(t)||t.length!==4&&t.length!==6&&t.length!==8)throw new Error("Invalid key parameter.");var o=this.mode.name,u=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=p(t,e.decrypt&&!u),this._init=!0},r.aes._expandKey=function(e,t){return s||h(),p(e,t)},r.aes._updateBlock=d,i("AES-ECB",r.cipher.modes.ecb),i("AES-CBC",r.cipher.modes.cbc),i("AES-CFB",r.cipher.modes.cfb),i("AES-OFB",r.cipher.modes.ofb),i("AES-CTR",r.cipher.modes.ctr),i("AES-GCM",r.cipher.modes.gcm);var s=!1,o=4,u,a,f,l,c},{"./cipher":30,"./cipherModes":31,"./forge":33,"./util":57}],29:[function(e,t,n){function s(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}function u(e,t,n,r){var a;s(e,t,2);var f=e.getByte();t--;var l=f&192,c=f&31;a=e.length();var h=o(e,t);t-=a-e.length();if(h!==undefined&&h>t){if(r.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=e.length(),p.remaining=t,p.requested=h,p}h=t}var d,v,m=(f&32)===32;if(m){d=[];if(h===undefined)for(;;){s(e,t,2);if(e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}a=e.length(),d.push(u(e,t,n+1,r)),t-=a-e.length()}else while(h>0)a=e.length(),d.push(u(e,h,n+1,r)),t-=a-e.length(),h-=a-e.length()}d===undefined&&l===i.Class.UNIVERSAL&&c===i.Type.BITSTRING&&(v=e.bytes(h));if(d===undefined&&r.decodeBitStrings&&l===i.Class.UNIVERSAL&&c===i.Type.BITSTRING&&h>1){var g=e.read,y=t,b=0;c===i.Type.BITSTRING&&(s(e,t,1),b=e.getByte(),t--);if(b===0)try{a=e.length();var w={verbose:r.verbose,strict:!0,decodeBitStrings:!0},E=u(e,t,n+1,w),S=a-e.length();t-=S,c==i.Type.BITSTRING&&S++;var x=E.tagClass;S===h&&(x===i.Class.UNIVERSAL||x===i.Class.CONTEXT_SPECIFIC)&&(d=[E])}catch(T){}d===undefined&&(e.read=g,t=y)}if(d===undefined){if(h===undefined){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=t}if(c===i.Type.BMPSTRING){d="";for(;h>0;h-=2)s(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2}else d=e.getBytes(h)}var N=v===undefined?null:{bitStringContents:v};return i.create(l,c,m,d,N)}var r=e("./forge");e("./util"),e("./oids");var i=t.exports=r.asn1=r.asn1||{};i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(e,t,n,s,o){if(r.util.isArray(s)){var u=[];for(var a=0;a<s.length;++a)s[a]!==undefined&&u.push(s[a]);s=u}var f={tagClass:e,type:t,constructed:n,composed:n||r.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(f.bitStringContents=o.bitStringContents,f.original=i.copy(f)),f},i.copy=function(e,t){var n;if(r.util.isArray(e)){n=[];for(var s=0;s<e.length;++s)n.push(i.copy(e[s],t));return n}return typeof e=="string"?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:i.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},i.equals=function(e,t,n){if(r.util.isArray(e)){if(!r.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)return i.equals(e[s],t[s])?!0:!1}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&i.equals(e.value,t.value);return n&&n.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},i.getBerValueLength=function(e){var t=e.getByte();if(t===128)return undefined;var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n};var o=function(e,t){var n=e.getByte();t--;if(n===128)return undefined;var r,i=n&128;if(!i)r=n;else{var o=n&127;s(e,t,o),r=e.getInt(o<<3)}if(r<0)throw new Error("Negative length: "+r);return r};i.fromDer=function(e,t){return t===undefined&&(t={strict:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=r.util.createBuffer(e)),u(e,e.length(),0,t)},i.toDer=function(e){var t=r.util.createBuffer(),n=e.tagClass|e.type,s=r.util.createBuffer(),o=!1;"bitStringContents"in e&&(o=!0,e.original&&(o=i.equals(e,e.original)));if(o)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:s.putByte(0);for(var u=0;u<e.value.length;++u)e.value[u]!==undefined&&s.putBuffer(i.toDer(e.value[u]))}else if(e.type===i.Type.BMPSTRING)for(var u=0;u<e.value.length;++u)s.putInt16(e.value.charCodeAt(u));else e.type===i.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)===0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?s.putBytes(e.value.substr(1)):s.putBytes(e.value);t.putByte(n);if(s.length()<=127)t.putByte(s.length()&127);else{var a=s.length(),f="";do f+=String.fromCharCode(a&255),a>>>=8;while(a>0);t.putByte(f.length|128);for(var u=f.length-1;u>=0;--u)t.putByte(f.charCodeAt(u))}return t.putBuffer(s),t},i.oidToDer=function(e){var t=e.split("."),n=r.util.createBuffer();n.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));var i,s,o,u;for(var a=2;a<t.length;++a){i=!0,s=[],o=parseInt(t[a],10);do u=o&127,o>>>=7,i||(u|=128),s.push(u),i=!1;while(o>0);for(var f=s.length-1;f>=0;--f)n.putByte(s[f])}return n},i.derToOid=function(e){var t;typeof e=="string"&&(e=r.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;var i=0;while(e.length()>0)n=e.getByte(),i<<=7,n&128?i+=n&127:(t+="."+(i+n),i=0);return t},i.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),u=0;if(e.length>11){var a=e.charAt(10),f=10;a!=="+"&&a!=="-"&&(u=parseInt(e.substr(10,2),10),f+=2)}t.setUTCFullYear(n,r,i),t.setUTCHours(s,o,u,0);if(f){a=e.charAt(f);if(a==="+"||a==="-"){var l=parseInt(e.substr(f+1,2),10),c=parseInt(e.substr(f+4,2),10),h=l*60+c;h*=6e4,a==="+"?t.setTime(+t-h):t.setTime(+t+h)}}return t},i.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),u=parseInt(e.substr(12,2),10),a=0,f=0,l=!1;e.charAt(e.length-1)==="Z"&&(l=!0);var c=e.length-5,h=e.charAt(c);if(h==="+"||h==="-"){var p=parseInt(e.substr(c+1,2),10),d=parseInt(e.substr(c+4,2),10);f=p*60+d,f*=6e4,h==="+"&&(f*=-1),l=!0}return e.charAt(14)==="."&&(a=parseFloat(e.substr(14),10)*1e3),l?(t.setUTCFullYear(n,r,i),t.setUTCHours(s,o,u,a),t.setTime(+t+f)):(t.setFullYear(n,r,i),t.setHours(s,o,u,a)),t},i.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t},i.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t},i.integerToDer=function(e){var t=r.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},i.derToInteger=function(e){typeof e=="string"&&(e=r.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},i.validate=function(e,t,n,s){var o=!1;if(e.tagClass!==t.tagClass&&typeof t.tagClass!="undefined"||e.type!==t.type&&typeof t.type!="undefined")s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+"] "+'Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+"] "+'Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||typeof t.constructed=="undefined"){o=!0;if(t.value&&r.util.isArray(t.value)){var u=0;for(var a=0;o&&a<t.value.length;++a)o=t.value[a].optional||!1,e.value[u]&&(o=i.validate(e.value[u],t.value[a],n,s),o?++u:t.value[a].optional&&(o=!0)),!o&&s&&s.push("["+t.name+"] "+'Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"')}if(o&&n){t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents);if(t.captureBitStringValue&&"bitStringContents"in e){var f;if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var l=e.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}}else s&&s.push("["+t.name+"] "+'Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(e,t,n){var s="";t=t||0,n=n||2,t>0&&(s+="\n");var o="";for(var u=0;u<t*n;++u)o+=" ";s+=o+"Tag: ";switch(e.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:"}if(e.tagClass===i.Class.UNIVERSAL){s+=e.type;switch(e.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)"}}else s+=e.type;s+="\n",s+=o+"Constructed: "+e.constructed+"\n";if(e.composed){var f=0,l="";for(var u=0;u<e.value.length;++u)e.value[u]!==undefined&&(f+=1,l+=i.prettyPrint(e.value[u],t+1,n),u+1<e.value.length&&(l+=","));s+=o+"Sub values: "+f+l}else{s+=o+"Value: ";if(e.type===i.Type.OID){var c=i.derToOid(e.value);s+=c,r.pki&&r.pki.oids&&c in r.pki.oids&&(s+=" ("+r.pki.oids[c]+") ")}if(e.type===i.Type.INTEGER)try{s+=i.derToInteger(e.value)}catch(h){s+="0x"+r.util.bytesToHex(e.value)}else if(e.type===i.Type.BITSTRING){e.value.length>1?s+="0x"+r.util.bytesToHex(e.value.slice(1)):s+="(none)";if(e.value.length>0){var p=e.value.charCodeAt(0);p==1?s+=" (1 unused bit shown)":p>1&&(s+=" ("+p+" unused bits shown)")}}else e.type===i.Type.OCTETSTRING?(a.test(e.value)||(s+="("+e.value+") "),s+="0x"+r.util.bytesToHex(e.value)):e.type===i.Type.UTF8?s+=r.util.decodeUtf8(e.value):e.type===i.Type.PRINTABLESTRING||e.type===i.Type.IA5String?s+=e.value:a.test(e.value)?s+="0x"+r.util.bytesToHex(e.value):e.value.length===0?s+="[null]":s+=e.value}return s}},{"./forge":33,"./oids":39,"./util":57}],30:[function(e,t,n){var r=e("./forge");e("./util"),t.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(e,t){var n=e;typeof n=="string"&&(n=r.cipher.getAlgorithm(n),n&&(n=n()));if(!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},r.cipher.createDecipher=function(e,t){var n=e;typeof n=="string"&&(n=r.cipher.getAlgorithm(n),n&&(n=n()));if(!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},r.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),r.cipher.algorithms[e]=t},r.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in r.cipher.algorithms?r.cipher.algorithms[e]:null};var i=r.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};i.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=e.output||r.util.createBuffer(),this.mode.start(t)},i.prototype.update=function(e){e&&this._input.putBuffer(e);while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish);this._input.compact()},i.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)?!1:(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)?!1:!0)}},{"./forge":33,"./util":57}],31:[function(e,t,n){function s(e){typeof e=="string"&&(e=r.util.createBuffer(e));if(r.util.isArray(e)&&e.length>4){var t=e;e=r.util.createBuffer();for(var n=0;n<t.length;++n)e.putByte(t[n])}return r.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function u(e){return[e/4294967296|0,e&4294967295]}var r=e("./forge");e("./util"),r.cipher=r.cipher||{};var i=t.exports=r.cipher.modes=r.cipher.modes||{};i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},i.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},i.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0},i.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;this.cipher.encrypt
(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=r.util.createBuffer(e.iv);this._cipherLength=0;var n;"additionalData"in e?n=r.util.createBuffer(e.additionalData):n=r.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null;if(e.decrypt){this._tag=r.util.createBuffer(e.tag).getBytes();if(this._tag.length!==this._tagLength/8)throw new Error("Authentication tag does not match tag length.")}this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=t.length();if(i===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{this._j0=[0,0,0,0];while(t.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(u(i*8)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,n=r.util.createBuffer(n),this._aDataLength=u(n.length()*8);var s=n.length()%this.blockSize;s&&n.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];while(n.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])},i.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s===0||n){if(n){var u=r%this.blockSize;this._cipherLength+=u,this._partialOutput.truncate(this.blockSize-u)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=r.util.createBuffer();var i=this._aDataLength.concat(u(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},i.gcm.prototype.multiply=function(e,t){var n=[0,0,0,0],r=t.slice(0);for(var i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},i.gcm.prototype.pow=function(e,t){var n=e[3]&1;for(var r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){var t=[0,0,0,0];for(var n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,s=this._m[n][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t},i.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){var n=8/t,r=4*n,i=16*n,s=new Array(i);for(var o=0;o<i;++o){var u=[0,0,0,0],a=o/r|0,f=(r-1-o%r)*t;u[a]=1<<t-1<<f,s[o]=this.generateSubHashTable(this.multiply(u,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);var s=r>>>1;while(s>0)this.pow(i[2*s],i[s]=[]),s>>=1;s=2;while(s<r){for(var o=1;o<s;++o){var u=i[s],a=i[o];i[s+o]=[u[0]^a[0],u[1]^a[1],u[2]^a[2],u[3]^a[3]]}s*=2}i[0]=[0,0,0,0];for(s=r+1;s<n;++s){var f=i[s^r];i[s]=[e[0]^f[0],e[1]^f[1],e[2]^f[2],e[3]^f[3]]}return i}},{"./forge":33,"./util":57}],32:[function(e,t,n){function i(e,t){var n=function(){return new r.des.Algorithm(e,t)};r.cipher.registerAlgorithm(e,n)}function p(e){var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],a=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],c=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=e.length()>8?3:1,m=[],g=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],y=0,b;for(var w=0;w<v;w++){var E=e.getInt32(),S=e.getInt32();b=(E>>>4^S)&252645135,S^=b,E^=b<<4,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>2^S)&858993459,S^=b,E^=b<<2,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=(S>>>8^E)&16711935,E^=b,S^=b<<8,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=b;for(var x=0;x<g.length;++x){g[x]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var T=t[E>>>28]|n[E>>>24&15]|r[E>>>20&15]|i[E>>>16&15]|s[E>>>12&15]|o[E>>>8&15]|u[E>>>4&15],N=a[S>>>28]|f[S>>>24&15]|l[S>>>20&15]|c[S>>>16&15]|h[S>>>12&15]|p[S>>>8&15]|d[S>>>4&15];b=(N>>>16^T)&65535,m[y++]=T^b,m[y++]=N^b<<16}}return m}function d(e,t,n,r){var i=e.length===32?3:9,p;i===3?p=r?[30,-2,-2]:[0,32,2]:p=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var d,v=t[0],m=t[1];d=(v>>>4^m)&252645135,m^=d,v^=d<<4,d=(v>>>16^m)&65535,m^=d,v^=d<<16,d=(m>>>2^v)&858993459,v^=d,m^=d<<2,d=(m>>>8^v)&16711935,v^=d,m^=d<<8,d=(v>>>1^m)&1431655765,m^=d,v^=d<<1,v=v<<1|v>>>31,m=m<<1|m>>>31;for(var g=0;g<i;g+=3){var y=p[g+1],b=p[g+2];for(var w=p[g];w!=y;w+=b){var E=m^e[w],S=(m>>>4|m<<28)^e[w+1];d=v,v=m,m=d^(o[E>>>24&63]|a[E>>>16&63]|l[E>>>8&63]|h[E&63]|s[S>>>24&63]|u[S>>>16&63]|f[S>>>8&63]|c[S&63])}d=v,v=m,m=d}v=v>>>1|v<<31,m=m>>>1|m<<31,d=(v>>>1^m)&1431655765,m^=d,v^=d<<1,d=(m>>>8^v)&16711935,v^=d,m^=d<<8,d=(m>>>2^v)&858993459,v^=d,m^=d<<2,d=(v>>>16^m)&65535,m^=d,v^=d<<16,d=(v>>>4^m)&252645135,m^=d,v^=d<<4,n[0]=v,n[1]=m}function v(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="DES-"+t,i;e.decrypt?i=r.cipher.createDecipher(n,e.key):i=r.cipher.createCipher(n,e.key);var s=i.start;return i.start=function(e,t){var n=null;t instanceof r.util.ByteBuffer&&(n=t,t={}),t=t||{},t.output=n,t.iv=e,s.call(i,t)},i}var r=e("./forge");e("./cipher"),e("./cipherModes"),e("./util"),t.exports=r.des=r.des||{},r.des.startEncrypting=function(e,t,n,r){var i=v({key:e,output:n,decrypt:!1,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i},r.des.createEncryptionCipher=function(e,t){return v({key:e,output:null,decrypt:!1,mode:t})},r.des.startDecrypting=function(e,t,n,r){var i=v({key:e,output:n,decrypt:!0,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i},r.des.createDecryptionCipher=function(e,t){return v({key:e,output:null,decrypt:!0,mode:t})},r.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return d(n._keys,e,t,!1)},decrypt:function(e,t){return d(n._keys,e,t,!0)}}}),n._init=!1},r.des.Algorithm.prototype.initialize=function(e){if(this._init)return;var t=r.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=p(t),this._init=!0},i("DES-ECB",r.cipher.modes.ecb),i("DES-CBC",r.cipher.modes.cbc),i("DES-CFB",r.cipher.modes.cfb),i("DES-OFB",r.cipher.modes.ofb),i("DES-CTR",r.cipher.modes.ctr),i("3DES-ECB",r.cipher.modes.ecb),i("3DES-CBC",r.cipher.modes.cbc),i("3DES-CFB",r.cipher.modes.cfb),i("3DES-OFB",r.cipher.modes.ofb),i("3DES-CTR",r.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],u=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],a=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],f=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],c=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]},{"./cipher":30,"./cipherModes":31,"./forge":33,"./util":57}],33:[function(e,t,n){t.exports={options:{usePureJavaScript:!1}}},{}],34:[function(e,t,n){var r=e("./forge");e("./md"),e("./util");var i=t.exports=r.hmac=r.hmac||{};i.create=function(){var e=null,t=null,n=null,i=null,s={};return s.start=function(s,o){if(s!==null)if(typeof s=="string"){s=s.toLowerCase();if(!(s in r.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=r.md.algorithms[s].create()}else t=s;if(o===null)o=e;else{if(typeof o=="string")o=r.util.createBuffer(o);else if(r.util.isArray(o)){var u=o;o=r.util.createBuffer();for(var a=0;a<u.length;++a)o.putByte(u[a])}var f=o.length();f>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=r.util.createBuffer(),i=r.util.createBuffer(),f=o.length();for(var a=0;a<f;++a){var u=o.at(a);n.putByte(54^u),i.putByte(92^u)}if(f<t.blockLength){var u=t.blockLength-f;for(var a=0;a<u;++a)n.putByte(54),i.putByte(92)}e=o,n=n.bytes(),i=i.bytes()}t.start(),t.update(n)},s.update=function(e){t.update(e)},s.getMac=function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()},s.digest=s.getMac,s}},{"./forge":33,"./md":36,"./util":57}],35:[function(e,t,n){function u(e,t,n){this.data=[],e!=null&&("number"==typeof e?this.fromNumber(e,t,n):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function a(){return new u(null)}function f(e,t,n,r,i,s){while(--s>=0){var o=t*this.data[e++]+n.data[r]+i;i=Math.floor(o/67108864),n.data[r++]=o&67108863}return i}function l(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this.data[e]&32767,f=this.data[e++]>>15,l=u*a+f*o;a=o*a+((l&32767)<<15)+n.data[r]+(i&1073741823),i=(a>>>30)+(l>>>15)+u*f+(i>>>30),n.data[r++]=a&1073741823}return i}function c(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this.data[e]&16383,f=this.data[e++]>>14,l=u*a+f*o;a=o*a+((l&16383)<<14)+n.data[r]+i,i=(a>>28)+(l>>14)+u*f,n.data[r++]=a&268435455}return i}function g(e){return p.charAt(e)}function y(e,t){var n=d[e.charCodeAt(t)];return n==null?-1:n}function b(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function w(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function E(e){var t=a();return t.fromInt(e),t}function S(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0;var r=e.length,i=!1,s=0;while(--r>=0){var o=n==8?e[r]&255:y(e,r);if(o<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+n>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&u.ZERO.subTo(this,this)}function x(){var e=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==e)--this.t}function T(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,s="",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this.data[o]>>u)>0&&(i=!0,s=g(r));while(o>=0)u<t?(r=(this.data[o]&(1<<u)-1)<<t-u,r|=this.data[--o]>>(u+=this.DB-t)):(r=this.data[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=g(r))}return i?s:"0"}function N(){var e=a();return u.ZERO.subTo(this,e),e}function C(){return this.s<0?this.negate():this}function k(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return this.s<0?-t:t;while(--n>=0)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function L(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function A(){return this.t<=0?0:this.DB*(this.t-1)+L(this.data[this.t-1]^this.s&this.DM)}function O(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function M(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function _(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)t.data[u+s+1]=this.data[u]>>r|o,o=(this.data[u]&i)<<n;for(u=s-1;u>=0;--u)t.data[u]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function D(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var o=n+1;o<this.t;++o)t.data[o-n-1]|=(this.data[o]&s)<<i,t.data[o-n]=this.data[o]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function P(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function H(e,t){var n=this.abs(),r=e.abs(),i=n.t;t.t=i+r.t;while(--i>=0)t.data[i]=0;for(i=0;i<r.t;++i)t.data[i+n.t]=n.am(0,r.data[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&u.ZERO.subTo(t,t)}function B(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function j(e,t,n){var r=e.abs();if(r.t<=0)return;var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=a());var s=a(),o=this.s,f=e.s,l=this.DB-L(r.data[r.t-1]);l>0?(r.lShiftTo(l,s),i.lShiftTo(l,n)):(r.copyTo(s),i.copyTo(n));var c=s.t,h=s.data[c-1];if(h==0)return;var p=h*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),d=this.FV/p,v=(1<<this.F1)/p,m=1<<this.F2,g=n.t,y=g-c,b=t==null?a():t;s.dlShiftTo(y,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),u.ONE.dlShiftTo(c,b),b.subTo(s,s);while(s.t<c)s.data[s.t++]=0;while(--y>=0){var w=n.data[--g]==h?this.DM:Math.floor(n.data[g]*d+(n.data[g-1]+m)*v);if((n.data[g]+=s.am(0,w,n,y,0,c))<w){s.dlShiftTo(y,b),n.subTo(b,n);while(n.data[g]<--w)n.subTo(b,n)}}t!=null&&(n.drShiftTo(c,t),o!=f&&u.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),o<0&&u.ZERO.subTo(n,n)}function F(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(u.ZERO)>0&&e.subTo(t,t),t}function I(e){this.m=e}function q(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function R(e){return e}function U(e){e.divRemTo(this.m,null,e)}function z(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function W(e,t){e.squareTo(t),this.reduce(t)}function X(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function V(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function $(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(u.ZERO)>0&&this.m.subTo(t,t),t}function J(e){var t=a();return e.copyTo(t),this.reduce(t),t}function K(e){while(e.t<=this.mt2)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e.data[n]>=e.DV)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Q(e,t){e.squareTo(t),this.reduce(t)}function G(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Y(){return(this.t>0?this.data[0]&1:this.s)==0}function Z(e,t){if(e>4294967295||e<1)return u.ONE;var n=a(),r=a(),i=t.convert(this),s=L(e)-1;i.copyTo(n);while(--s>=0){t.sqrTo(n,r);if((e&1<<s)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}}return t.revert(n)}function et(e,t){var n;return e<256||t.isEven()?n=new I(t):n=new V(t),this.exp(e,n)}function tt(){var e=a();return this.copyTo(e),e}function nt(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function rt(){return this.t==0?this.s:this.data[0]<<24>>24}function it(){return this.t==0?this.s:this.data[0]<<16>>16}function st(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ot(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function ut(e){e==null&&(e=10);if(this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=E(n),i=a(),s=a(),o="";this.divRemTo(r,i,s);while(i.signum()>0)o=(n+s.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(e)+o}function at(e,t){this.fromInt(0),t==null&&(t=10);var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,s=0,o=0;for(var a=0;a<e.length;++a){var f=y(e,a);if(f<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+f,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&u.ZERO.subTo(this,this)}function ft(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(u.ONE.shiftLeft(e-1),gt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(t))this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(u.ONE.shiftLeft(e-1),this)}else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function lt(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-->0){n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);while(e>=0){n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i;if(i>0||r!=this.s)t[i++]=r}}return t}function ct(e){return this.compareTo(e)==0}function ht(e){return this.compareTo(e)<0?this:e}function pt(e){return this.compareTo(e)>0?this:e}function dt(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){i=e.s&this.DM;for(r=s;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{i=this.s&this.DM;for(r=s;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function vt(e,t){return e&t}function mt(e){var t=a();return this.bitwiseTo(e,vt,t),t}function gt(e,t){return e|t}function yt(e){var t=a();return this.bitwiseTo(e,gt,t),t}function bt(e,t){return e^t}function wt(e){var t=a();return this.bitwiseTo(e,bt,t),t}function Et(e,t){return e&~t}function St(e){var t=a();return this.bitwiseTo(e,Et,t),t}function xt(){var e=a();for(var t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Tt(e){var t=a();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Nt(e){var t=a();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Ct(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function kt(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Ct(this.data[e]);return this.s<0?this.t*this.DB:-1}function Lt(e){var t=0;while(e!=0)e&=e-1,++t;return t}function At(){var e=0,t=this.s&this.DM;for(var n=0;n<this.t;++n)e+=Lt(this.data[n]^t);return e}function Ot(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Mt(e,t){var n=u.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function _t(e){return this.changeBit(e,gt)}function Dt(e){return this.changeBit(e,Et)}function Pt(e){return this.changeBit(e,bt)}function Ht(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r+=e.s;while(n<this.t)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function Bt(e){var t=a();return this.addTo(e,t),t}function jt(e){var t=a();return this.subTo(e,t),t}function Ft(e){var t=a();return this.multiplyTo(e,t),t}function It(e){var t=a();return this.divRemTo(e,t,null),t}function qt(e){var t=a();return this.divRemTo(e,null,t),t}function Rt(e){var t=a(),n=a();return this.divRemTo(e,t,n),new Array(t,n)}function Ut(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function zt(e,t){if(e==0)return;while(this.t<=t)this.data[this.t++]=0;this.data[t]+=e;while(this.data[t]>=this.DV)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}function Wt(){}function Xt(e){return e}function Vt(e,t,n){e.multiplyTo(t,n)}function $t(e,t){e.squareTo(t)}function Jt(e){return this.exp(e,new Wt)}function Kt(e,t,n){var r=Math.min(this.t+e.t,t);n.s=0,n.t=r;while(r>0)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function Qt(e,t,n){--t;var r=n.t=this.t+e.t-t;n.s=0;while(--r>=0)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Gt(e){this.r2=a(),this.q3=a(),u.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Yt(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t}function Zt(e){return e}function en(e){e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(e.compareTo(this.r2)<0)e.dAddOffset(1,this.m.t+1);e.subTo(this.r2,e);while(e.compareTo(this.m)>=0)e.subTo(this.m,e)}function tn(e,t){e.squareTo(t),this.reduce(t)}function nn(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function rn(e,t){var n=e.bitLength(),r,i=E(1),s;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?s=new I(t):t.isEven()?s=new Gt(t):s=new V(t);var o=new Array,u=3,f=r-1,l=(1<<r)-1;o[1]=s.convert(this);if(r>1){var c=a();s.sqrTo(o[1],c);while(u<=l)o[u]=a(),s.mulTo(c,o[u-2],o[u]),u+=2}var h=e.t-1,p,d=!0,v=a(),m;n=L(e.data[h])-1;while(h>=0){n>=f?p=e.data[h]>>n-f&l:(p=(e.data[h]&(1<<n+1)-1)<<f-n,h>0&&(p|=e.data[h-1]>>this.DB+n-f)),u=r;while((p&1)==0)p>>=1,--u;(n-=u)<0&&(n+=this.DB,--h);if(d)o[p].copyTo(i),d=!1;else{while(u>1)s.sqrTo(i,v),s.sqrTo(v,i),u-=2;u>0?s.sqrTo(i,v):(m=i,i=v,v=m),s.mulTo(v,o[p],i)}while(h>=0&&(e.data[h]&1<<n)==0)s.sqrTo(i,v),m=i,i=v,v=m,--n<0&&(n=this.DB-1,--h)}return s.revert(i)}function sn(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));while(t.signum()>0)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function on(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function un(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return u.ZERO;var n=e.clone(),r=this.clone(),i=E(1),s=E(0),o=E(0),a=E(1);while(n.signum()!=0){while(n.isEven()){n.rShiftTo(1,n);if(t){if(!i.isEven()||!s.isEven())i.addTo(this,i),s.subTo(e,s);i.rShiftTo(1,i)}else s.isEven()||s.subTo(e,s);s.rShiftTo(1
,s)}while(r.isEven()){r.rShiftTo(1,r);if(t){if(!o.isEven()||!a.isEven())o.addTo(this,o),a.subTo(e,a);o.rShiftTo(1,o)}else a.isEven()||a.subTo(e,a);a.rShiftTo(1,a)}n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),t&&o.subTo(i,o),a.subTo(s,a))}return r.compareTo(u.ONE)!=0?u.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a}function ln(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=an[an.length-1]){for(t=0;t<an.length;++t)if(n.data[0]==an[t])return!0;return!1}if(n.isEven())return!1;t=1;while(t<an.length){var r=an[t],i=t+1;while(i<an.length&&r<fn)r*=an[i++];r=n.modInt(r);while(t<i)if(r%an[t++]==0)return!1}return n.millerRabin(e)}function cn(e){var t=this.subtract(u.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n),i=hn(),s;for(var o=0;o<e;++o){do s=new u(this.bitLength(),i);while(s.compareTo(u.ONE)<=0||s.compareTo(t)>=0);var a=s.modPow(r,this);if(a.compareTo(u.ONE)!=0&&a.compareTo(t)!=0){var f=1;while(f++<n&&a.compareTo(t)!=0){a=a.modPowInt(2,this);if(a.compareTo(u.ONE)==0)return!1}if(a.compareTo(t)!=0)return!1}}return!0}function hn(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}var r=e("./forge");t.exports=r.jsbn=r.jsbn||{};var i,s=0xdeadbeefcafe,o=(s&16777215)==15715070;r.jsbn.BigInteger=u,typeof navigator=="undefined"?(u.prototype.am=c,i=28):o&&navigator.appName=="Microsoft Internet Explorer"?(u.prototype.am=l,i=30):o&&navigator.appName!="Netscape"?(u.prototype.am=f,i=26):(u.prototype.am=c,i=28),u.prototype.DB=i,u.prototype.DM=(1<<i)-1,u.prototype.DV=1<<i;var h=52;u.prototype.FV=Math.pow(2,h),u.prototype.F1=h-i,u.prototype.F2=2*i-h;var p="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,v,m;v="0".charCodeAt(0);for(m=0;m<=9;++m)d[v++]=m;v="a".charCodeAt(0);for(m=10;m<36;++m)d[v++]=m;v="A".charCodeAt(0);for(m=10;m<36;++m)d[v++]=m;I.prototype.convert=q,I.prototype.revert=R,I.prototype.reduce=U,I.prototype.mulTo=z,I.prototype.sqrTo=W,V.prototype.convert=$,V.prototype.revert=J,V.prototype.reduce=K,V.prototype.mulTo=G,V.prototype.sqrTo=Q,u.prototype.copyTo=b,u.prototype.fromInt=w,u.prototype.fromString=S,u.prototype.clamp=x,u.prototype.dlShiftTo=O,u.prototype.drShiftTo=M,u.prototype.lShiftTo=_,u.prototype.rShiftTo=D,u.prototype.subTo=P,u.prototype.multiplyTo=H,u.prototype.squareTo=B,u.prototype.divRemTo=j,u.prototype.invDigit=X,u.prototype.isEven=Y,u.prototype.exp=Z,u.prototype.toString=T,u.prototype.negate=N,u.prototype.abs=C,u.prototype.compareTo=k,u.prototype.bitLength=A,u.prototype.mod=F,u.prototype.modPowInt=et,u.ZERO=E(0),u.ONE=E(1),Wt.prototype.convert=Xt,Wt.prototype.revert=Xt,Wt.prototype.mulTo=Vt,Wt.prototype.sqrTo=$t,Gt.prototype.convert=Yt,Gt.prototype.revert=Zt,Gt.prototype.reduce=en,Gt.prototype.mulTo=nn,Gt.prototype.sqrTo=tn;var an=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],fn=(1<<26)/an[an.length-1];u.prototype.chunkSize=st,u.prototype.toRadix=ut,u.prototype.fromRadix=at,u.prototype.fromNumber=ft,u.prototype.bitwiseTo=dt,u.prototype.changeBit=Mt,u.prototype.addTo=Ht,u.prototype.dMultiply=Ut,u.prototype.dAddOffset=zt,u.prototype.multiplyLowerTo=Kt,u.prototype.multiplyUpperTo=Qt,u.prototype.modInt=on,u.prototype.millerRabin=cn,u.prototype.clone=tt,u.prototype.intValue=nt,u.prototype.byteValue=rt,u.prototype.shortValue=it,u.prototype.signum=ot,u.prototype.toByteArray=lt,u.prototype.equals=ct,u.prototype.min=ht,u.prototype.max=pt,u.prototype.and=mt,u.prototype.or=yt,u.prototype.xor=wt,u.prototype.andNot=St,u.prototype.not=xt,u.prototype.shiftLeft=Tt,u.prototype.shiftRight=Nt,u.prototype.getLowestSetBit=kt,u.prototype.bitCount=At,u.prototype.testBit=Ot,u.prototype.setBit=_t,u.prototype.clearBit=Dt,u.prototype.flipBit=Pt,u.prototype.add=Bt,u.prototype.subtract=jt,u.prototype.multiply=Ft,u.prototype.divide=It,u.prototype.remainder=qt,u.prototype.divideAndRemainder=Rt,u.prototype.modPow=rn,u.prototype.modInverse=un,u.prototype.pow=Jt,u.prototype.gcd=sn,u.prototype.isProbablePrime=ln},{"./forge":33}],36:[function(e,t,n){var r=e("./forge");t.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},{"./forge":33}],37:[function(e,t,n){var r=e("./forge");e("./mgf1"),t.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1},{"./forge":33,"./mgf1":38}],38:[function(e,t,n){var r=e("./forge");e("./util"),r.mgf=r.mgf||{};var i=t.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{};i.create=function(e){var t={generate:function(t,n){var i=new r.util.ByteBuffer,s=Math.ceil(n/e.digestLength);for(var o=0;o<s;o++){var u=new r.util.ByteBuffer;u.putInt32(o),e.start(),e.update(t+u.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}},{"./forge":33,"./util":57}],39:[function(e,t,n){function s(e,t){i[e]=t,i[t]=e}function o(e,t){i[e]=t}var r=e("./forge");r.pki=r.pki||{};var i=t.exports=r.pki.oids=r.oids=r.oids||{};s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.5","serialName"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.16.840.1.113730.1.1","nsCertType"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},{"./forge":33}],40:[function(e,t,n){function c(e,t){return e.start().update(t).digest().getBytes()}function h(e){var t;if(!e)t="hmacWithSHA1";else{t=o.oids[s.derToOid(e)];if(!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}return p(t)}function p(e){var t=r.md;switch(e){case"hmacWithSHA224":t=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!!t&&e in t)return t[e].create();throw new Error("Unknown hash algorithm: "+e)}function d(e,t,n,i){var u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);return i!=="hmacWithSHA1"&&u.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,r.util.hexToBytes(n.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),u}var r=e("./forge");e("./aes"),e("./asn1"),e("./des"),e("./md"),e("./oids"),e("./pbkdf2"),e("./pem"),e("./random"),e("./rc2"),e("./rsa"),e("./util");if(typeof i=="undefined")var i=r.jsbn.BigInteger;var s=r.asn1,o=r.pki=r.pki||{};t.exports=o.pbe=r.pbe=r.pbe||{};var u=o.oids,a={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},f={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};o.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var i=r.random.getBytesSync(n.saltSize),a=n.count,f=s.integerToDer(a),l,c,h;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var v,m,g;switch(n.algorithm){case"aes128":l=16,v=16,m=u["aes128-CBC"],g=r.aes.createEncryptionCipher;break;case"aes192":l=24,v=16,m=u["aes192-CBC"],g=r.aes.createEncryptionCipher;break;case"aes256":l=32,v=16,m=u["aes256-CBC"],g=r.aes.createEncryptionCipher;break;case"des":l=8,v=8,m=u.desCBC,g=r.des.createEncryptionCipher;break;default:var y=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw y.algorithm=n.algorithm,y}var b="hmacWith"+n.prfAlgorithm.toUpperCase(),w=p(b),E=r.pkcs5.pbkdf2(t,i,a,l,w),S=r.random.getBytesSync(v),x=g(E);x.start(S),x.update(s.toDer(e)),x.finish(),h=x.output.getBytes();var T=d(i,f,l,b);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.pkcs5PBKDF2).getBytes()),T]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(m).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,S)])])])}else{if(n.algorithm!=="3des"){var y=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw y.algorithm=n.algorithm,y}l=24;var N=new r.util.ByteBuffer(i),E=o.pbe.generatePkcs12Key(t,N,1,a,l),S=o.pbe.generatePkcs12Key(t,N,2,a,l),x=r.des.createEncryptionCipher(E);x.start(S),x.update(s.toDer(e)),x.finish(),h=x.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,i),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,f.getBytes())])])}var C=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,h)]);return C},o.decryptPrivateKeyInfo=function(e,t){var n=null,i={},u=[];if(!s.validate(e,a,i,u)){var f=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw f.errors=u,f}var l=s.derToOid(i.encryptionOid),c=o.pbe.getCipher(l,i.encryptionParams,t),h=r.util.createBuffer(i.encryptedData);return c.update(h),c.finish()&&(n=s.fromDer(c.output)),n},o.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return r.pem.encode(n,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=r.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,n){n=n||{};if(!n.legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return i=o.encryptPrivateKeyInfo(i,t,n),o.encryptedPrivateKeyToPem(i)}var u,a,f,l;switch(n.algorithm){case"aes128":u="AES-128-CBC",f=16,a=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"aes192":u="AES-192-CBC",f=24,a=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"aes256":u="AES-256-CBC",f=32,a=r.random.getBytesSync(16),l=r.aes.createEncryptionCipher;break;case"3des":u="DES-EDE3-CBC",f=24,a=r.random.getBytesSync(8),l=r.des.createEncryptionCipher;break;case"des":u="DES-CBC",f=8,a=r.random.getBytesSync(8),l=r.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var h=r.pbe.opensslDeriveBytes(t,a.substr(0,8),f),p=l(h);p.start(a),p.update(s.toDer(o.privateKeyToAsn1(e))),p.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:u,parameters:r.util.bytesToHex(a).toUpperCase()},body:p.output.getBytes()};return r.pem.encode(d)},o.decryptRsaPrivateKey=function(e,t){var n=null,i=r.pem.decode(e)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw u.headerType=u,u}if(i.procType&&i.procType.type==="ENCRYPTED"){var a,f;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,f=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,f=r.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,f=r.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,f=r.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,f=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,f=function(e){return r.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,f=function(e){return r.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,f=function(e){return r.rc2.createDecryptionCipher(e,128)};break;default:var u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw u.algorithm=i.dekInfo.algorithm,u}var l=r.util.hexToBytes(i.dekInfo.parameters),c=r.pbe.opensslDeriveBytes(t,l.substr(0,8),a),h=f(c);h.start(l),h.update(r.util.createBuffer(i.body));if(!h.finish())return n;n=h.output.getBytes()}else n=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?n=o.decryptPrivateKeyInfo(s.fromDer(n),t):n=s.fromDer(n),n!==null&&(n=o.privateKeyFromAsn1(n)),n},o.pbe.generatePkcs12Key=function(e,t,n,i,s,o){var u,a;if(typeof o=="undefined"||o===null){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');o=r.md.sha1.create()}var f=o.digestLength,l=o.blockLength,c=new r.util.ByteBuffer,h=new r.util.ByteBuffer;if(e!==null&&e!==undefined){for(a=0;a<e.length;a++)h.putInt16(e.charCodeAt(a));h.putInt16(0)}var p=h.length(),d=t.length(),v=new r.util.ByteBuffer;v.fillWithByte(n,l);var m=l*Math.ceil(d/l),g=new r.util.ByteBuffer;for(a=0;a<m;a++)g.putByte(t.at(a%d));var y=l*Math.ceil(p/l),b=new r.util.ByteBuffer;for(a=0;a<y;a++)b.putByte(h.at(a%p));var w=g;w.putBuffer(b);var E=Math.ceil(s/f);for(var S=1;S<=E;S++){var x=new r.util.ByteBuffer;x.putBytes(v.bytes()),x.putBytes(w.bytes());for(var T=0;T<i;T++)o.start(),o.update(x.getBytes()),x=o.digest();var N=new r.util.ByteBuffer;for(a=0;a<l;a++)N.putByte(x.at(a%f));var C=Math.ceil(d/l)+Math.ceil(p/l),k=new r.util.ByteBuffer;for(u=0;u<C;u++){var L=new r.util.ByteBuffer(w.getBytes(l)),A=511;for(a=N.length()-1;a>=0;a--)A>>=8,A+=N.at(a)+L.at(a),L.setAt(a,A&255);k.putBuffer(L)}w=k,c.putBuffer(x)}return c.truncate(c.length()-s),c},o.pbe.getCipher=function(e,t,n){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,n);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},o.pbe.getCipherForPBES2=function(e,t,n){var i={},u=[];if(!s.validate(t,f,i,u)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=u,a}e=s.derToOid(i.kdfOid);if(e!==o.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}e=s.derToOid(i.encOid);if(e!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var l=i.kdfSalt,c=r.util.createBuffer(i.kdfIterationCount);c=c.getInt(c.length()<<3);var p,d;switch(o.oids[e]){case"aes128-CBC":p=16,d=r.aes.createDecryptionCipher;break;case"aes192-CBC":p=24,d=r.aes.createDecryptionCipher;break;case"aes256-CBC":p=32,d=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":p=24,d=r.des.createDecryptionCipher;break;case"desCBC":p=8,d=r.des.createDecryptionCipher}var v=h(i.prfOid),m=r.pkcs5.pbkdf2(n,l,c,p,v),g=i.encIv,y=d(m);return y.start(g),y},o.pbe.getCipherForPKCS12PBE=function(e,t,n){var i={},u=[];if(!s.validate(t,l,i,u)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=u,a}var f=r.util.createBuffer(i.salt),c=r.util.createBuffer(i.iterations);c=c.getInt(c.length()<<3);var p,d,v;switch(e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:p=24,d=8,v=r.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:p=5,d=8,v=function(e,t){var n=r.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var m=h(i.prfOid),g=o.pbe.generatePkcs12Key(n,f,1,c,p,m);m.start();var y=o.pbe.generatePkcs12Key(n,f,2,c,d,m);return v(g,y)},o.pbe.opensslDeriveBytes=function(e,t,n,i){if(typeof i=="undefined"||i===null){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');i=r.md.md5.create()}t===null&&(t="");var s=[c(i,e+t)];for(var o=16,u=1;o<n;++u,o+=16)s.push(c(i,s[u-1]+e+t));return s.join("").substr(0,n)}},{"./aes":28,"./asn1":29,"./des":32,"./forge":33,"./md":36,"./oids":39,"./pbkdf2":41,"./pem":42,"./random":51,"./rc2":52,"./rsa":53,"./util":57}],41:[function(e,t,n){(function(n){var r=e("./forge");e("./hmac"),e("./md"),e("./util");var i=r.pkcs5=r.pkcs5||{},s;r.util.isNodejs&&!r.options.usePureJavaScript&&(s=e("crypto")),t.exports=r.pbkdf2=i.pbkdf2=function(e,t,i,o,u,a){function w(){if(y>c)return a(null,d);p.start(null,null),p.update(t),p.update(r.util.int32ToBytes(y)),v=g=p.digest().getBytes(),b=2,E()}function E(){if(b<=i)return p.start(null,null),p.update(g),m=p.digest().getBytes(),v=r.util.xorBytes(v,m,f),g=m,++b,r.util.setImmediate(E);d+=y<c?v:v.substr(0,h),++y,w()}typeof u=="function"&&(a=u,u=null);if(r.util.isNodejs&&!r.options.usePureJavaScript&&s.pbkdf2&&(u===null||typeof u!="object")&&(s.pbkdf2Sync.length>4||!u||u==="sha1"))return typeof u!="string"&&(u="sha1"),e=new n(e,"binary"),t=new n(t,"binary"),a?s.pbkdf2Sync.length===4?s.pbkdf2(e,t,i,o,function(e,t){if(e)return a(e);a(null,t.toString("binary"))}):s.pbkdf2(e,t,i,o,u,function(e,t){if(e)return a(e);a(null,t.toString("binary"))}):s.pbkdf2Sync.length===4?s.pbkdf2Sync(e,t,i,o).toString("binary"):s.pbkdf2Sync(e,t,i,o,u).toString("binary");if(typeof u=="undefined"||u===null)u="sha1";if(typeof u=="string"){if(!(u in r.md.algorithms))throw new Error("Unknown hash algorithm: "+u);u=r.md[u].create()}var f=u.digestLength;if(o>4294967295*f){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var c=Math.ceil(o/f),h=o-(c-1)*f,p=r.hmac.create();p.start(u,e);var d="",v,m,g;if(!a){for(var y=1;y<=c;++y){p.start(null,null),p.update(t),p.update(r.util.int32ToBytes(y)),v=g=p.digest().getBytes();for(var b=2;b<=i;++b)p.start(null,null),p.update(g),m=p.digest().getBytes(),v=r.util.xorBytes(v,m,f),g=m;d+=y<c?v:v.substr(0,h)}return d}var y=1,b;w()}}).call(this,e("buffer").Buffer)},{"./forge":33,"./hmac":34,"./md":36,"./util":57,buffer:6,crypto:6}],42:[function(e,t,n){function s(e){var t=e.name+": ",n=[],r=function(e,t){return" "+t};for(var i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+"\r\n";var s=0,o=-1;for(var i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var u=t[o];u===","?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+u+t.substr(o+1),s=i-o-1,o=-1,++i}else if(t[i]===" "||t[i]==="	"||t[i]===",")o=i;return t}function o(e){return e.replace(/^\s+/,"")}var r=e("./forge");e("./util");var i=t.exports=r.pem=r.pem||{};i.encode=function(e,t){t=t||{};var n="-----BEGIN "+e.type+"-----\r\n",i;e.procType&&(i={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},n+=s(i)),e.contentDomain&&(i={name:"Content-Domain",values:[e.contentDomain]},n+=s(i)),e.dekInfo&&(i={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&i.values.push(e.dekInfo.parameters),n+=s(i));if(e.headers)for(var o=0;o<e.headers.length;++o)n+=s(e.headers[o]);return e.procType&&(n+="\r\n"),n+=r.util.encode64(e.body,t.maxline||64)+"\r\n",n+="-----END "+e.type+"-----\r\n",n},i.decode=function(e){var t=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/,u;for(;;){u=n.exec(e);if(!u)break;var a={type:u[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(u[3])};t.push(a);if(!u[2])continue;var f=u[2].split(s),l=0;while(u&&l<f.length){var c=f[l].replace(/\s+$/,"");for(var h=l+1;h<f.length;++h){var p=f[h];if(!/\s/.test(p[0]))break;c+=p,l=h}u=c.match(i);if(u){var d={name:u[1],values:[]},v=u[2].split(",");for(var m=0;m<v.length;++m)d.values.push(o(v[m]));if(!a.procType){if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:v[0],type:v[1]}}else if(!a.contentDomain&&d.name==="Content-Domain")a.contentDomain=v[0]||"";else if(!a.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:v[0],parameters:v[1]||null}}else a.headers.push(d)}++l}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t}},{"./forge":33,"./util":57}],43:[function(e,t,n){function s(e,t,n){n||(n=r.md.sha1.create());var i="",s=Math.ceil(t/n.digestLength);for(var o=0;o<s;++o){var u=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);n.start(),n.update(e+u),i+=n.digest().getBytes()}return i.substring(0,t)}var r=e("./forge");e("./util"),e("./random"),e("./sha1");var i=t.exports=r.pkcs1=r.pkcs1||{};i.encode_rsa_oaep=function(e,t,n){var i,o,u,a;typeof n=="string"?(i=n,o=arguments[3]||undefined,u=arguments[4]||undefined):n&&(i=n.label||undefined,o=n.seed||undefined,u=n.md||undefined,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),u?u.start():u=r.md.sha1.create(),a||(a=u);var f=Math.ceil(e.n.bitLength()/8),l=f-2*u.digestLength-2;if(t.length>l){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=l,c}i||(i=""),u.update(i,"raw");var h=u.digest(),p="",d=l-t.length;for(var v=0;v<d;v++)p+="\0";var m=h.getBytes()+p+""+t;if(!o)o=r.random.getBytes(u.digestLength);else if(o.length!==u.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=o.length,c.digestLength=u.digestLength,c}var g=s(o,f-u.digestLength-1,a),y=r.util.xorBytes(m,g,m.length),b=s(y,u.digestLength,a),w=r.util.xorBytes(o,b,o.length);return"\0"+w+y},i.decode_rsa_oaep=function(e,t,n){var i,o,u;typeof n=="string"?(i=n,o=arguments[3]||undefined):n&&(i=n.label||undefined,o=n.md||undefined,n.mgf1&&n.mgf1.md&&(u=n.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var f=new Error("RSAES-OAEP encoded message length is invalid.");throw f.length=t.length,f.expectedLength=a,f}o===undefined?o=r.md.sha1.create():o.start(),u||(u=o);if(a<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");var l=o.digest().getBytes(),c=t.charAt(0),h=t.substring(1,o.digestLength+1),p=t.substring(1+o.digestLength),d=s(p,o.digestLength,u),v=r.util.xorBytes(h,d,h.length),m=s(v,a-o.digestLength-1,u),g=r.util.xorBytes(p,m,p.length),y=g.substring(0,o.digestLength),f=c!=="\0";for(var b=0;b<o.digestLength;++b)f|=l.charAt(b)!==y.charAt(b);var w=1,E=o.digestLength;for(var S=o.digestLength;S<g.length;S++){var x=g.charCodeAt(S),T=x&1^1,N=w?65534:0;f|=x&N,w&=T,E+=w}if(f||g.charCodeAt(E)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(E+1)}},{"./forge":33,"./random":51,"./sha1":54,"./util":57}],44:[function(e,t,n){function h(e,t,n,r){var i=[];for(var s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var u=e[s].safeBags[o];if(r!==undefined&&u.type!==r)continue;if(t===null){i.push(u);continue}u.attributes[t]!==undefined&&u.attributes[t].indexOf(n)>=0&&i.push(u)}return i}function p(e){if(e.composed||e.constructed){var t=r.util.createBuffer();for(var n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function d(e,t,n,r){t=i.fromDer(t,n);if(t.tagClass!==i.Class.UNIVERSAL||t.type!==i.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var o=0;o<t.value.length;o++){var a=t.value[o],f={},l=[];if(!i.validate(a,u,f,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var h={encrypted:!1},d=null,g=f.content.value[0];switch(i.derToOid(f.contentType)){case s.oids.data:if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=p(g).value;break;case s.oids.encryptedData:d=v(g,r),h.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=i.derToOid(f.contentType),c}h.safeBags=m(d,n,r),e.safeContents.push(h)}}function v(e,t){var n={},o=[];if(!i.validate(e,r.pkcs7.asn1.encryptedDataValidator,n,o)){var u=new Error("Cannot read EncryptedContentInfo.");throw u.errors=o,u}var a=i.derToOid(n.contentType);if(a!==s.oids.data){var u=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw u.oid=a,u}a=i.derToOid(n.encAlgorithm);var f=s.pbe.getCipher(a,n.encParameter,t),l=p(n.encryptedContentAsn1),c=r.util.createBuffer(l.value);f.update(c);if(!f.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return f.output.getBytes()}function m(e,t,n){if(!t&&e.length===0)return[];e=i.fromDer(e,t);if(e.tagClass!==i.Class.UNIVERSAL||e.type!==i.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");var r=[];for(var o=0;o<e.value.length;o++){var u=e.value[o],a={},l=[];if(!i.validate(u,f,a,l)){var h=new Error("Cannot read SafeBag.");throw h.errors=l,h}var p={type:i.derToOid(a.bagId),attributes:g(a.bagAttributes)};r.push(p);var d,v,m=a.bagValue.value[0];switch(p.type){case s.oids.pkcs8ShroudedKeyBag:m=s.decryptPrivateKeyInfo(m,n);if(m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case s.oids.keyBag:try{p.key=s.privateKeyFromAsn1(m)}catch(y){p.key=null,p.asn1=m}continue;case s.oids.certBag:d=c,v=function(){if(i.derToOid(a.certId)!==s.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=i.derToOid(a.certId),e}var n=i.fromDer(a.cert,t);try{p.
cert=s.certificateFromAsn1(n,!0)}catch(r){p.cert=null,p.asn1=n}};break;default:var h=new Error("Unsupported PKCS#12 SafeBag type.");throw h.oid=p.type,h}if(d!==undefined&&!i.validate(m,d,a,l)){var h=new Error("Cannot read PKCS#12 "+d.name);throw h.errors=l,h}v()}return r}function g(e){var t={};if(e!==undefined)for(var n=0;n<e.length;++n){var r={},o=[];if(!i.validate(e[n],l,r,o)){var u=new Error("Cannot read PKCS#12 BagAttribute.");throw u.errors=o,u}var a=i.derToOid(r.oid);if(s.oids[a]===undefined)continue;t[s.oids[a]]=[];for(var f=0;f<r.values.length;++f)t[s.oids[a]].push(r.values[f].value)}return t}var r=e("./forge");e("./asn1"),e("./hmac"),e("./oids"),e("./pkcs7asn1"),e("./pbe"),e("./random"),e("./rsa"),e("./sha1"),e("./util"),e("./x509");var i=r.asn1,s=r.pki,o=t.exports=r.pkcs12=r.pkcs12||{},u={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},a={name:"PFX",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},u,{name:"PFX.macData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},f={name:"SafeBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},l={name:"Attribute",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,capture:"values"}]},c={name:"CertBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:i.Class.UNIVERSAL,type:i.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};o.pkcs12FromAsn1=function(e,t,n){typeof t=="string"?(n=t,t=!0):t===undefined&&(t=!0);var u={},f=[];if(!i.validate(e,a,u,f)){var l=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw l.errors=l,l}var c={version:u.version.charCodeAt(0),safeContents:[],getBags:function(e){var t={},n;return"localKeyId"in e?n=e.localKeyId:"localKeyIdHex"in e&&(n=r.util.hexToBytes(e.localKeyIdHex)),n===undefined&&!("friendlyName"in e)&&"bagType"in e&&(t[e.bagType]=h(c.safeContents,null,null,e.bagType)),n!==undefined&&(t.localKeyId=h(c.safeContents,"localKeyId",n,e.bagType)),"friendlyName"in e&&(t.friendlyName=h(c.safeContents,"friendlyName",e.friendlyName,e.bagType)),t},getBagsByFriendlyName:function(e,t){return h(c.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return h(c.safeContents,"localKeyId",e,t)}};if(u.version.charCodeAt(0)!==3){var l=new Error("PKCS#12 PFX of version other than 3 not supported.");throw l.version=u.version.charCodeAt(0),l}if(i.derToOid(u.contentType)!==s.oids.data){var l=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw l.oid=i.derToOid(u.contentType),l}var v=u.content.value[0];if(v.tagClass!==i.Class.UNIVERSAL||v.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");v=p(v);if(u.mac){var m=null,g=0,y=i.derToOid(u.macAlgorithm);switch(y){case s.oids.sha1:m=r.md.sha1.create(),g=20;break;case s.oids.sha256:m=r.md.sha256.create(),g=32;break;case s.oids.sha384:m=r.md.sha384.create(),g=48;break;case s.oids.sha512:m=r.md.sha512.create(),g=64;break;case s.oids.md5:m=r.md.md5.create(),g=16}if(m===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+y);var b=new r.util.ByteBuffer(u.macSalt),w="macIterations"in u?parseInt(r.util.bytesToHex(u.macIterations),16):1,E=o.generateKey(n,b,3,w,g,m),S=r.hmac.create();S.start(m,E),S.update(v.value);var x=S.getMac();if(x.getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return d(c,v.value,t,n),c},o.toPkcs12Asn1=function(e,t,n,u){u=u||{},u.saltSize=u.saltSize||8,u.count=u.count||2048,u.algorithm=u.algorithm||u.encAlgorithm||"aes128","useMac"in u||(u.useMac=!0),"localKeyId"in u||(u.localKeyId=null),"generateLocalKeyId"in u||(u.generateLocalKeyId=!0);var a=u.localKeyId,f;if(a!==null)a=r.util.hexToBytes(a);else if(u.generateLocalKeyId)if(t){var l=r.util.isArray(t)?t[0]:t;typeof l=="string"&&(l=s.certificateFromPem(l));var c=r.md.sha1.create();c.update(i.toDer(s.certificateToAsn1(l)).getBytes()),a=c.digest().getBytes()}else a=r.random.getBytes(20);var h=[];a!==null&&h.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.localKeyId).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,a)])])),"friendlyName"in u&&h.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.friendlyName).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.BMPSTRING,!1,u.friendlyName)])])),h.length>0&&(f=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,h));var p=[],d=[];t!==null&&(r.util.isArray(t)?d=t:d=[t]);var v=[];for(var m=0;m<d.length;++m){t=d[m],typeof t=="string"&&(t=s.certificateFromPem(t));var g=m===0?f:undefined,y=s.certificateToAsn1(t),b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.certBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.x509Certificate).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(y).getBytes())])])]),g]);v.push(b)}if(v.length>0){var w=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,v),E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(w).getBytes())])]);p.push(E)}var S=null;if(e!==null){var x=s.wrapRsaPrivateKey(s.privateKeyToAsn1(e));n===null?S=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.keyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[x]),f]):S=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(x,n,u)]),f]);var T=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[S]),N=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(T).getBytes())])]);p.push(N)}var C=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,p),k;if(u.useMac){var c=r.md.sha1.create(),L=new r.util.ByteBuffer(r.random.getBytes(u.saltSize)),A=u.count,e=o.generateKey(n,L,3,A,20),O=r.hmac.create();O.start(c,e),O.update(i.toDer(C).getBytes());var M=O.getMac();k=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.sha1).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,M.getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,L.getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(A).getBytes())])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(3).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(C).getBytes())])]),k])},o.generateKey=r.pbe.generatePkcs12Key},{"./asn1":29,"./forge":33,"./hmac":34,"./oids":39,"./pbe":40,"./pkcs7asn1":46,"./random":51,"./rsa":53,"./sha1":54,"./util":57,"./x509":58}],45:[function(e,t,n){function o(e){var t={},n=[];if(!i.validate(e,s.asn1.recipientInfoValidator,t,n)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=n,o}return{version:t.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(t.issuer),serialNumber:r.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:i.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}}}function u(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function a(e){var t=[];for(var n=0;n<e.length;++n)t.push(o(e[n]));return t}function f(e){var t=[];for(var n=0;n<e.length;++n)t.push(u(e[n]));return t}function l(e){var t={},n=[];if(!i.validate(e,s.asn1.signerInfoValidator,t,n)){var o=new Error("Cannot read PKCS#7 SignerInfo. ASN.1 object is not an PKCS#7 SignerInfo.");throw o.errors=n,o}var u={version:t.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(t.issuer),serialNumber:r.util.createBuffer(t.serial).toHex(),digestAlgorithm:i.derToOid(t.digestAlgorithm),signatureAlgorithm:i.derToOid(t.signatureAlgorithm),signature:t.signature,authenticatedAttributes:[],unauthenticatedAttributes:[]},a=t.authenticatedAttributes||[],f=t.unauthenticatedAttributes||[];return u}function c(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.signature));if(e.unauthenticatedAttributes.length>0){var n=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]);for(var s=0;s<e.unauthenticatedAttributes.length;++s){var o=e.unauthenticatedAttributes[s];n.values.push(d(o))}t.value.push(n)}return t}function h(e){var t=[];for(var n=0;n<e.length;++n)t.push(l(e[n]));return t}function p(e){var t=[];for(var n=0;n<e.length;++n)t.push(c(e[n]));return t}function d(e){var t;if(e.type===r.pki.oids.contentType)t=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.value).getBytes());else if(e.type===r.pki.oids.messageDigest)t=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===r.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=e.value;if(typeof o=="string"){var u=Date.parse(o);isNaN(u)?o.length===13?o=i.utcTimeToDate(o):o=i.generalizedTimeToDate(o):o=new Date(u)}o>=n&&o<s?t=i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):t=i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[t])])}function v(e){return[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(r.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.parameter.getBytes())]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.content.getBytes())])]}function m(e,t,n){var s={},o=[];if(!i.validate(t,n,s,o)){var u=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw u.errors=u,u}var a=i.derToOid(s.contentType);if(a!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var f="";if(r.util.isArray(s.encryptedContent))for(var l=0;l<s.encryptedContent.length;++l){if(s.encryptedContent[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");f+=s.encryptedContent[l].value}else f=s.encryptedContent;e.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:r.util.createBuffer(s.encParameter.value),content:r.util.createBuffer(f)}}if(s.content){var f="";if(r.util.isArray(s.content))for(var l=0;l<s.content.length;++l){if(s.content[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");f+=s.content[l].value}else f=s.content;e.content=r.util.createBuffer(f)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function g(e){if(e.encryptedContent.key===undefined)throw new Error("Symmetric key not available.");if(e.content===undefined){var t;switch(e.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:t=r.aes.createDecryptionCipher(e.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:t=r.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content);if(!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var r=e("./forge");e("./aes"),e("./asn1"),e("./des"),e("./oids"),e("./pem"),e("./pkcs7asn1"),e("./random"),e("./util"),e("./x509");var i=r.asn1,s=t.exports=r.pkcs7=r.pkcs7||{};s.messageFromPem=function(e){var t=r.pem.decode(e)[0];if(t.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.messageFromAsn1(o)},s.messageToPem=function(e,t){var n={type:"PKCS7",body:i.toDer(e.toAsn1()).getBytes()};return r.pem.encode(n,{maxline:t})},s.messageFromAsn1=function(e){var t={},n=[];if(!i.validate(e,s.asn1.contentInfoValidator,t,n)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=n,o}var u=i.derToOid(t.contentType),a;switch(u){case r.pki.oids.envelopedData:a=s.createEnvelopedData();break;case r.pki.oids.encryptedData:a=s.createEncryptedData();break;case r.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},s.createSignedData=function(){function t(){var t={};for(var n=0;n<e.signers.length;++n){var s=e.signers[n],o=s.digestAlgorithm;o in t||(t[o]=r.md[r.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=t[o]:s.md=r.md[r.pki.oids[o]].create()}e.digestAlgorithmIdentifiers=[];for(var o in t)e.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return t}function n(t){if(e.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var n=i.derToOid(e.contentInfo.value[0].value),s=e.contentInfo.value[1];s=s.value[0];var o=i.toDer(s);o.getByte(),i.getBerValueLength(o),o=o.getBytes();for(var u in t)t[u].start().update(o);var a=new Date;for(var f=0;f<e.signers.length;++f){var l=e.signers[f];if(l.authenticatedAttributes.length===0){if(n!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);var c=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]);for(var h=0;h<l.authenticatedAttributes.length;++h){var v=l.authenticatedAttributes[h];v.type===r.pki.oids.messageDigest?v.value=t[l.digestAlgorithm].digest():v.type===r.pki.oids.signingTime&&(v.value||(v.value=a)),c.value.push(d(v)),l.authenticatedAttributesAsn1.value.push(d(v))}o=i.toDer(c).getBytes(),l.md.start().update(o)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=p(e.signers)}var e=null;return e={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){m(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[];var n=e.rawCapture.certificates.value;for(var i=0;i<n.length;++i)e.certificates.push(r.pki.certificateFromAsn1(n[i]))},toAsn1:function(){e.contentInfo||e.sign();var t=[];for(var n=0;n<e.certificates.length;++n)t.push(r.pki.certificateToAsn1(e.certificates[n]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var n=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;typeof s=="string"&&(s=r.pki.certificateFromPem(s)),n=s.issuer.attributes,i=s.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=r.pki.privateKeyFromPem(o));var u=t.digestAlgorithm||r.pki.oids.sha1;switch(u){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var a=t.authenticatedAttributes||[];if(a.length>0){var f=!1,l=!1;for(var c=0;c<a.length;++c){var h=a[c];if(!f&&h.type===r.pki.oids.contentType){f=!0;if(l)break;continue}if(!l&&h.type===r.pki.oids.messageDigest){l=!0;if(f)break;continue}}if(!f||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:n,serialNumber:i,digestAlgorithm:u,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:a,unauthenticatedAttributes:[]})},sign:function(){if(typeof e.content!="object"||e.contentInfo===null){e.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(r.pki.oids.data).getBytes())]);if("content"in e){var s;e.content instanceof r.util.ByteBuffer?s=e.content.bytes():typeof e.content=="string"&&(s=r.util.encodeUtf8(e.content)),e.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,s)]))}}if(e.signers.length===0)return;var o=t();n(o)},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){typeof t=="string"&&(t=r.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}},e},s.createEncryptedData=function(){var e=null;return e={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(t){m(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){t!==undefined&&(e.encryptedContent.key=t),g(e)}},e},s.createEnvelopedData=function(){var e=null;return e={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=m(e,t,s.asn1.envelopedDataValidator);e.recipients=a(n.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,f(e.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,v(e.encryptedContent))])])])},findRecipient:function(t){var n=t.issuer.attributes;for(var r=0;r<e.recipients.length;++r){var i=e.recipients[r],s=i.issuer;if(i.serialNumber!==t.serialNumber)continue;if(s.length!==n.length)continue;var o=!0;for(var u=0;u<n.length;++u)if(s[u].type!==n[u].type||s[u].value!==n[u].value){o=!1;break}if(o)return i}return null},decrypt:function(t,n){if(e.encryptedContent.key===undefined&&t!==undefined&&n!==undefined)switch(t.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var i=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=r.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}g(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(e.encryptedContent.content===undefined){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var i,s,o;switch(n){case r.pki.oids["aes128-CBC"]:i=16,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:i=24,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:i=32,s=16,o=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(t===undefined)t=r.util.createBuffer(r.random.getBytes(i));else if(t.length()!=i)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+i+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(s));var u=o(t);u.start(e.encryptedContent.parameter.copy()),u.update(e.content);if(!u.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=u.output}for(var a=0;a<e.recipients.length;++a){var f=e.recipients[a];if(f.encryptedContent.content!==undefined)continue;switch(f.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:f.encryptedContent.content=f.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+f.encryptedContent.algorithm)}}}},e}},{"./aes":28,"./asn1":29,"./des":32,"./forge":33,"./oids":39,"./pem":42,"./pkcs7asn1":46,"./random":51,"./util":57,"./x509":58}],46:[function(e,t,n){var r=e("./forge");e("./asn1"),e("./util");var i=r.asn1,s=t.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var u={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(u)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(u)};var a={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[a]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},{"./asn1":29,"./forge":33,"./util":57}],47:[function(e,t,n){var r=e("./forge");e("./asn1"),e("./oids"),e("./pbe"),e("./pem"),e("./pbkdf2"),e("./pkcs12"),e("./pss"),e("./rsa"),e("./util"),e("./x509");var i=r.asn1,s=t.exports=r.pki=r.pki||{};s.pemToDer=function(e){var t=r.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return r.util.createBuffer(t.body)},s.privateKeyFromPem=function(e){var t=r.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.privateKeyFromAsn1(o)},s.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:i.toDer(s.privateKeyToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:i.toDer(e).getBytes()};return r.pem.encode(n,{maxline:t})}},{"./asn1":29,"./forge":33,"./oids":39,"./pbe":40,"./pbkdf2":41,"./pem":42,"./pkcs12":44,"./pss":50,"./rsa":53,"./util":57,"./x509":58}],48:[function(e,t,n){var r=e("./forge");e("./util"),e("./jsbn"),e("./random"),function(){function u(e,t,n,r){return"workers"in n?l(e,t,n,r):a(e,t,n,r)}function a(e,t,n,r){var i=c(e,t),s=0,o=h(i.bitLength());"millerRabinTests"in n&&(o=n.millerRabinTests);var u=10;"maxBlockTime"in n&&(u=n.maxBlockTime),f(i,e,t,s,o,u,r)}function f(e,t,n,s,o,u,a){var l=+(new Date);do{e.bitLength()>t&&(e=c(t,n));if(e.isProbablePrime(o))return a(null,e);e.dAddOffset(i[s++%8],0)}while(u<0||+(new Date)-l<u);r.util.setImmediate(function(){f(e,t,n,s,o,u,a)})}function l(e,t,i,s){function p(){function d(i){if(p)return;--a;var u=i.data;if(u.found){for(var h=0;h<r.length;++h)r[h].terminate();return p=!0,s(null,new n(u.prime,16))}o.bitLength()>e&&(o=c(e,t));var d=o.toString(16);i.target.postMessage({hex:d,workLoad:f}),o.dAddOffset(l,0)}u=Math.max(1,u);var r=[];for(var i=0;i<u;++i)r[i]=new Worker(h);var a=u;for(var i=0;i<u;++i)r[i].addEventListener("message",d);var p=!1}if(typeof Worker=="undefined")return a(e,t,i,s);var o=c(e,t),u=i.workers,f=i.workLoad||100,l=f*30/8,h=i.workerScript||"forge/prime.worker.js";if(u===-1)return r.util.estimateCores(function(e,t){e&&(t=2),u=t-1,p()});p()}function c
(e,t){var r=new n(e,t),i=e-1;return r.testBit(i)||r.bitwiseTo(n.ONE.shiftLeft(i),o,r),r.dAddOffset(31-r.mod(s).byteValue(),0),r}function h(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}if(r.prime){t.exports=r.prime;return}var e=t.exports=r.prime=r.prime||{},n=r.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new n(null);s.fromInt(30);var o=function(e,t){return e|t};e.generateProbablePrime=function(e,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};var i=t.algorithm||"PRIMEINC";typeof i=="string"&&(i={name:i}),i.options=i.options||{};var s=t.prng||r.random,o={nextBytes:function(e){var t=s.getBytesSync(e.length);for(var n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if(i.name==="PRIMEINC")return u(e,o,i.options,n);throw new Error("Invalid prime generation algorithm: "+i.name)}}()},{"./forge":33,"./jsbn":35,"./random":51,"./util":57}],49:[function(e,t,n){(function(n){var r=e("./forge");e("./util");var i=null;r.util.isNodejs&&!r.options.usePureJavaScript&&!n.versions["node-webkit"]&&(i=e("crypto"));var s=t.exports=r.prng=r.prng||{};s.create=function(e){function u(e){if(t.pools[0].messageLength>=32)return f(),e();var n=32-t.pools[0].messageLength<<5;t.seedFile(n,function(n,r){if(n)return e(n);t.collect(r),f(),e()})}function a(){if(t.pools[0].messageLength>=32)return f();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),f()}function f(){var e=t.plugin.md.create();e.update(t.pools[0].digest().getBytes()),t.pools[0].start();var n=1;for(var r=1;r<32;++r)n=n===31?2147483648:n<<2,n%t.reseeds===0&&(e.update(t.pools[r].digest().getBytes()),t.pools[r].start());var i=e.digest().getBytes();e.start(),e.update(i);var s=e.digest().getBytes();t.key=t.plugin.formatKey(i),t.seed=t.plugin.formatSeed(s),t.reseeds=t.reseeds===4294967295?0:t.reseeds+1,t.generated=0}function l(e){var t=null;if(typeof window!="undefined"){var n=window.crypto||window.msCrypto;n&&n.getRandomValues&&(t=function(e){return n.getRandomValues(e)})}var i=r.util.createBuffer();if(t)while(i.length()<e){var s=Math.max(1,Math.min(e-i.length(),65536)/4),o=new Uint32Array(Math.floor(s));try{t(o);for(var u=0;u<o.length;++u)i.putInt32(o[u])}catch(a){if(!(typeof QuotaExceededError!="undefined"&&a instanceof QuotaExceededError))throw a}}if(i.length()<e){var f,l,c,h=Math.floor(Math.random()*65536);while(i.length()<e){l=16807*(h&65535),f=16807*(h>>16),l+=(f&32767)<<16,l+=f>>15,l=(l&2147483647)+(l>>31),h=l&4294967295;for(var u=0;u<3;++u)c=h>>>(u<<3),c^=Math.floor(Math.random()*256),i.putByte(String.fromCharCode(c&255))}}return i.getBytes(e)}var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},n=e.md,s=new Array(32);for(var o=0;o<32;++o)s[o]=n.create();return t.pools=s,t.pool=0,t.generate=function(e,n){function l(c){if(c)return n(c);if(f.length()>=e)return n(null,f.getBytes(e));t.generated>1048575&&(t.key=null);if(t.key===null)return r.util.nextTick(function(){u(l)});var h=i(t.key,t.seed);t.generated+=h.length,f.putBytes(h),t.key=o(i(t.key,s(t.seed))),t.seed=a(i(t.key,t.seed)),r.util.setImmediate(l)}if(!n)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,f=r.util.createBuffer();t.key=null,l()},t.generateSync=function(e){var n=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;var u=r.util.createBuffer();while(u.length()<e){t.generated>1048575&&(t.key=null),t.key===null&&a();var f=n(t.key,t.seed);t.generated+=f.length,u.putBytes(f),t.key=s(n(t.key,i(t.seed))),t.seed=o(n(t.key,t.seed))}return u.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,function(e,n){if(e)return t(e);t(null,n.toString())})},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,l(e))}catch(n){t(n)}},t.seedFileSync=l),t.collect=function(e){var n=e.length;for(var r=0;r<n;++r)t.pools[t.pool].update(e.substr(r,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(e,n){var r="";for(var i=0;i<n;i+=8)r+=String.fromCharCode(e>>i&255);t.collect(r)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){function n(e){var r=e.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",n),t(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener("message",n),self.postMessage({forge:{prng:{needed:e}}})};else{var n=function(n){var r=n.data;r.forge&&r.forge.prng&&t.seedFile(r.forge.prng.needed,function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})})};e.addEventListener("message",n)}},t}}).call(this,e("_process"))},{"./forge":33,"./util":57,_process:124,crypto:6}],50:[function(e,t,n){var r=e("./forge");e("./random"),e("./util");var i=t.exports=r.pss=r.pss||{};i.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,i=t.digestLength,s=e.salt||null;typeof s=="string"&&(s=r.util.createBuffer(s));var o;if("saltLength"in e)o=e.saltLength;else{if(s===null)throw new Error("Salt length not specified or specific salt not given.");o=s.length()}if(s!==null&&s.length()!==o)throw new Error("Given salt length does not match length of given salt.");var u=e.prng||r.random,a={};return a.encode=function(e,a){var f,l=a-1,c=Math.ceil(l/8),h=e.digest().getBytes();if(c<i+o+2)throw new Error("Message is too long to encrypt.");var p;s===null?p=u.getBytesSync(o):p=s.bytes();var d=new r.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(p),t.start(),t.update(d.getBytes());var v=t.digest().getBytes(),m=new r.util.ByteBuffer;m.fillWithByte(0,c-o-i-2),m.putByte(1),m.putBytes(p);var g=m.getBytes(),y=c-i-1,b=n.generate(v,y),w="";for(f=0;f<y;f++)w+=String.fromCharCode(g.charCodeAt(f)^b.charCodeAt(f));var E=65280>>8*c-l&255;return w=String.fromCharCode(w.charCodeAt(0)&~E)+w.substr(1),w+v+String.fromCharCode(188)},a.verify=function(e,s,u){var a,f=u-1,l=Math.ceil(f/8);s=s.substr(-l);if(l<i+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(s.charCodeAt(l-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var c=l-i-1,h=s.substr(0,c),p=s.substr(c,i),d=65280>>8*l-f&255;if((h.charCodeAt(0)&d)!==0)throw new Error("Bits beyond keysize not zero as expected.");var v=n.generate(p,c),m="";for(a=0;a<c;a++)m+=String.fromCharCode(h.charCodeAt(a)^v.charCodeAt(a));m=String.fromCharCode(m.charCodeAt(0)&~d)+m.substr(1);var g=l-i-o-2;for(a=0;a<g;a++)if(m.charCodeAt(a)!==0)throw new Error("Leftmost octets not zero as expected");if(m.charCodeAt(g)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var y=m.substr(-o),b=new r.util.ByteBuffer;b.fillWithByte(0,8),b.putBytes(e),b.putBytes(y),t.start(),t.update(b.getBytes());var w=t.digest().getBytes();return p===w},a}},{"./forge":33,"./random":51,"./util":57}],51:[function(e,t,n){var r=e("./forge");e("./aes"),e("./sha256"),e("./prng"),e("./util"),function(){if(r.random&&r.random.getBytes){t.exports=r.random;return}(function(e){function o(){var e=r.prng.create(n);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}var n={},i=new Array(4),s=r.util.createBuffer();n.formatKey=function(e){var t=r.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),r.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=r.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return r.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},n.increment=function(e){return++e[3],e},n.md=r.md.sha256;var u=o(),a=null;if(typeof window!="undefined"){var f=window.crypto||window.msCrypto;f&&f.getRandomValues&&(a=function(e){return f.getRandomValues(e)})}if(r.options.usePureJavaScript||!r.util.isNodejs&&!a){typeof window=="undefined"||window.document===undefined,u.collectInt(+(new Date),32);if(typeof navigator!="undefined"){var l="";for(var c in navigator)try{typeof navigator[c]=="string"&&(l+=navigator[c])}catch(h){}u.collect(l),l=null}e&&(e().mousemove(function(e){u.collectInt(e.clientX,16),u.collectInt(e.clientY,16)}),e().keypress(function(e){u.collectInt(e.charCode,8)}))}if(!r.random)r.random=u;else for(var c in u)r.random[c]=u[c];r.random.createInstance=o,t.exports=r.random})(typeof jQuery!="undefined"?jQuery:null)}()},{"./aes":28,"./forge":33,"./prng":49,"./sha256":55,"./util":57}],52:[function(e,t,n){var r=e("./forge");e("./util");var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(e,t){return e<<t&65535|(e&65535)>>16-t},u=function(e,t){return(e&65535)>>t|e<<16-t&65535};t.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(e,t){typeof e=="string"&&(e=r.util.createBuffer(e)),t=t||128;var n=e,s=e.length(),o=t,u=Math.ceil(o/8),a=255>>(o&7),f;for(f=s;f<128;f++)n.putByte(i[n.at(f-1)+n.at(f-s)&255]);n.setAt(128-u,i[n.at(128-u)&a]);for(f=127-u;f>=0;f--)n.setAt(f,i[n.at(f+1)^n.at(f+u)]);return n};var a=function(e,t,n){var i=!1,a=null,f=null,l=null,c,h,p,d,v=[];e=r.rc2.expandKey(e,t);for(p=0;p<64;p++)v.push(e.getInt16Le());n?(c=function(e){for(p=0;p<4;p++)e[p]+=v[d]+(e[(p+3)%4]&e[(p+2)%4])+(~e[(p+3)%4]&e[(p+1)%4]),e[p]=o(e[p],s[p]),d++},h=function(e){for(p=0;p<4;p++)e[p]+=v[e[(p+3)%4]&63]}):(c=function(e){for(p=3;p>=0;p--)e[p]=u(e[p],s[p]),e[p]-=v[d]+(e[(p+3)%4]&e[(p+2)%4])+(~e[(p+3)%4]&e[(p+1)%4]),d--},h=function(e){for(p=3;p>=0;p--)e[p]-=v[e[(p+3)%4]&63]});var m=function(e){var t=[];for(p=0;p<4;p++){var r=a.getInt16Le();l!==null&&(n?r^=l.getInt16Le():l.putInt16Le(r)),t.push(r&65535)}d=n?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(p=0;p<4;p++)l!==null&&(n?l.putInt16Le(t[p]):t[p]^=l.getInt16Le()),f.putInt16Le(t[p])},g=null;return g={start:function(e,t){e&&typeof e=="string"&&(e=r.util.createBuffer(e)),i=!1,a=r.util.createBuffer(),f=t||new r.util.createBuffer,l=e,g.output=f},update:function(e){i||a.putBuffer(e);while(a.length()>=8)m([[5,c],[1,h],[6,c],[1,h],[5,c]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,a,!n);else{var r=a.length()===8?8:8-a.length();a.fillWithByte(r,r)}t&&(i=!0,g.update());if(!n){t=a.length()===0;if(t)if(e)t=e(8,f,!n);else{var s=f.length(),o=f.at(s-1);o>s?t=!1:f.truncate(o)}}return t}},g};r.rc2.startEncrypting=function(e,t,n){var i=r.rc2.createEncryptionCipher(e,128);return i.start(t,n),i},r.rc2.createEncryptionCipher=function(e,t){return a(e,t,!0)},r.rc2.startDecrypting=function(e,t,n){var i=r.rc2.createDecryptionCipher(e,128);return i.start(t,n),i},r.rc2.createDecryptionCipher=function(e,t){return a(e,t,!1)}},{"./forge":33,"./util":57}],53:[function(e,t,n){function d(e,t,n){var i=r.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=s-11,o}i.putByte(0),i.putByte(n);var u=s-3-e.length,a;if(n===0||n===1){a=n===0?0:255;for(var f=0;f<u;++f)i.putByte(a)}else while(u>0){var l=0,c=r.random.getBytes(u);for(var f=0;f<u;++f)a=c.charCodeAt(f),a===0?++l:i.putByte(a);u=l}return i.putByte(0),i.putBytes(e),i}function v(e,t,n,i){var s=Math.ceil(t.n.bitLength()/8),o=r.util.createBuffer(e),u=o.getByte(),a=o.getByte();if(u!==0||n&&a!==0&&a!==1||!n&&a!=2||n&&a===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(a===0){f=s-3-i;for(var l=0;l<f;++l)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1){f=0;while(o.length()>1){if(o.getByte()!==255){--o.read;break}++f}}else if(a===2){f=0;while(o.length()>1){if(o.getByte()===0){--o.read;break}++f}}var c=o.getByte();if(c!==0||f!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function m(e,t,n){function u(){a(e.pBits,function(t,r){if(t)return n(t);e.p=r;if(e.q!==null)return f(t,e.q);a(e.qBits,f)})}function a(e,t){r.prime.generateProbablePrime(e,s,t)}function f(t,r){if(t)return n(t);e.q=r;if(e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)!==0){e.p=null,u();return}if(e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)!==0){e.q=null,a(e.qBits,f);return}e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1);if(e.phi.gcd(e.e).compareTo(i.ONE)!==0){e.p=e.q=null,u();return}e.n=e.p.multiply(e.q);if(e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,f);return}var l=e.e.modInverse(e.phi);e.keys={privateKey:o.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:o.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}typeof t=="function"&&(n=t,t={}),t=t||{};var s={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(s.prng=t.prng),u()}function g(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=r.util.hexToBytes(t);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)===0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function y(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function b(e){return typeof window!="undefined"&&typeof window.crypto=="object"&&typeof window.crypto.subtle=="object"&&typeof window.crypto.subtle[e]=="function"}function w(e){return typeof window!="undefined"&&typeof window.msCrypto=="object"&&typeof window.msCrypto.subtle=="object"&&typeof window.msCrypto.subtle[e]=="function"}function E(e){var t=r.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length);for(var i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function S(e){if(e.kty!=="RSA")throw new Error('Unsupported key algorithm "'+e.kty+'"; algorithm must be "RSA".');return o.setRsaPrivateKey(T(e.n),T(e.e),T(e.d),T(e.p),T(e.q),T(e.dp),T(e.dq),T(e.qi))}function x(e){if(e.kty!=="RSA")throw new Error('Key algorithm must be "RSA".');return o.setRsaPublicKey(T(e.n),T(e.e))}function T(e){return new i(r.util.bytesToHex(r.util.decode64(e)),16)}var r=e("./forge");e("./asn1"),e("./jsbn"),e("./oids"),e("./pkcs1"),e("./prime"),e("./random"),e("./util");if(typeof i=="undefined")var i=r.jsbn.BigInteger;var s=r.asn1;r.pki=r.pki||{},t.exports=r.pki.rsa=r.rsa=r.rsa||{};var o=r.pki,u=[6,4,2,4,2,4,6,2],a={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},l={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},c=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},h=function(e){var t;if(e.algorithm in o.oids){t=o.oids[e.algorithm];var r=s.oidToDer(t).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);u.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,r)),u.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(u),i.value.push(a),s.toDer(i).getBytes()}var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n},p=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(i.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(i.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var s;do s=new i(r.util.bytesToHex(r.random.getBytes(t.n.bitLength()/8)),16);while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(i.ONE));e=e.multiply(s.modPow(t.e,t.n)).mod(t.n);var o=e.mod(t.p).modPow(t.dP,t.p),u=e.mod(t.q).modPow(t.dQ,t.q);while(o.compareTo(u)<0)o=o.add(t.p);var a=o.subtract(u).multiply(t.qInv).mod(t.p).multiply(t.q).add(u);return a=a.multiply(s.modInverse(t.n)).mod(t.n),a};o.rsa.encrypt=function(e,t,n){var s=n,o,u=Math.ceil(t.n.bitLength()/8);n!==!1&&n!==!0?(s=n===2,o=d(e,t,n)):(o=r.util.createBuffer(),o.putBytes(e));var a=new i(o.toHex(),16),f=p(a,t,s),l=f.toString(16),c=r.util.createBuffer(),h=u-Math.ceil(l.length/2);while(h>0)c.putByte(0),--h;return c.putBytes(r.util.hexToBytes(l)),c.getBytes()},o.rsa.decrypt=function(e,t,n,s){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var u=new Error("Encrypted message length is invalid.");throw u.length=e.length,u.expected=o,u}var a=new i(r.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");var f=p(a,t,n),l=f.toString(16),c=r.util.createBuffer(),h=o-Math.ceil(l.length/2);while(h>0)c.putByte(0),--h;return c.putBytes(r.util.hexToBytes(l)),s!==!1?v(c.getBytes(),t,n):c.getBytes()},o.rsa.createKeyPairGenerationState=function(e,t,n){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,n=n||{};var s=n.prng||r.random,o={nextBytes:function(e){var t=s.getBytesSync(e.length);for(var n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},u=n.algorithm||"PRIMEINC",a;if(u!=="PRIMEINC")throw new Error("Invalid key generation algorithm: "+u);return a={algorithm:u,state:0,bits:e,rng:o,eInt:t||65537,e:new i(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt),a},o.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new i(null);n.fromInt(30);var r=0,s=function(e,t){return e|t},a=+(new Date),f,l=0;while(e.keys===null&&(t<=0||l<t)){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,h=c-1;e.pqState===0?(e.num=new i(c,e.rng),e.num.testBit(h)||e.num.bitwiseTo(i.ONE.shiftLeft(h),s,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(y(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[r++%8],0):e.pqState===2?e.pqState=e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(i.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var p=e.e.modInverse(e.phi);e.keys={privateKey:o.rsa.setPrivateKey(e.n,e.e,p,e.p,e.q,p.mod(e.p1),p.mod(e.q1),e.q.modInverse(e.p)),publicKey:o.rsa.setPublicKey(e.n,e.e)}}f=+(new Date),l+=f-a,a=f}return e.keys!==null},o.rsa.generateKeyPair=function(e,t,n,i){arguments.length===1?typeof e=="object"?(n=e,e=undefined):typeof e=="function"&&(i=e,e=undefined):arguments.length===2?typeof e=="number"?typeof t=="function"?(i=t,t=undefined):typeof t!="number"&&(n=t,t=undefined):(n=e,i=t,e=undefined,t=undefined):arguments.length===3&&(typeof t=="number"?typeof n=="function"&&(i=n,n=undefined):(i=n,n=t,t=undefined)),n=n||{},e===undefined&&(e=n.bits||2048),t===undefined&&(t=n.e||65537);if(!r.options.usePureJavaScript&&i&&e>=256&&e<=16384&&(t===65537||t===3)){if(b("generateKey")&&b("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:E(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(undefined,function(e){i(e)}).then(function(e){if(e){var t=o.privateKeyFromAsn1(s.fromDer(r.util.createBuffer(e)));i(null,{privateKey:t,publicKey:o.setRsaPublicKey(t.n,t.e)})}});if(w("generateKey")&&w("exportKey")){var u=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:E(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);u.oncomplete=function(e){var t=e.target.result,n=window.msCrypto.subtle.exportKey("pkcs8",t.privateKey);n.oncomplete=function(e){var t=e.target.result,n=o.privateKeyFromAsn1(s.fromDer(r.util.createBuffer(t)));i(null,{privateKey:n,publicKey:o.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){i(e)}},u.onerror=function(e){i(e)};return}}var a=o.rsa.createKeyPairGenerationState(e,t,n);if(!i)return o.rsa.stepKeyPairGenerationState(a,0),a.keys;m(a,n,i)},o.setRsaPublicKey=o.rsa.setPublicKey=function(e,t){var n={n:e,e:t};return n.encrypt=function(e,t,i){typeof t=="string"?t=t.toUpperCase():t===undefined&&(t="RSAES-PKCS1-V1_5");if(t==="RSAES-PKCS1-V1_5")t={encode:function(e,t,n){return d(e,t,2).getBytes()}};else if(t==="RSA-OAEP"||t==="RSAES-OAEP")t={encode:function(e,t){return r.pkcs1.encode_rsa_oaep(t,e,i)}};else if(["RAW","NONE","NULL",null].indexOf(t)!==-1)t={encode:function(e){return e}};else if(typeof t=="string")throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,n,!0);return o.rsa.encrypt(s,n,!0)},n.verify=function(e,t,r){typeof r=="string"?r=r.toUpperCase():r===undefined&&(r="RSASSA-PKCS1-V1_5");if(r==="RSASSA-PKCS1-V1_5")r={verify:function(e,t){t=v(t,n,!0);var r=s.fromDer(t);return e===r.value[1].value}};else if(r==="NONE"||r==="NULL"||r===null)r={verify:function(e,t){return t=v(t,n,!0),e===t}};var i=o.rsa.decrypt(t,n,!0,!1);return r.verify(e,i,n.n.bitLength())},n},o.setRsaPrivateKey=o.rsa.setPrivateKey=function(e,t,n,i,s,u,a,f){var l={n:e,e:t,d:n,p:i,q:s,dP:u,dQ:a,qInv:f};return l.decrypt=function(e,t,n){typeof t=="string"?t=t.toUpperCase():t===undefined&&(t="RSAES-PKCS1-V1_5");var i=o.rsa.decrypt(e,l,!1,!1);if(t==="RSAES-PKCS1-V1_5")t={decode:v};else if(t==="RSA-OAEP"||t==="RSAES-OAEP")t={decode:function(e,t){return r.pkcs1.decode_rsa_oaep(t,e,n)}};else{if(["RAW","NONE","NULL",null].indexOf(t)===-1)throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,l,!1)},l.sign=function(e,t){var n=!1;typeof t=="string"&&(t=t.toUpperCase());if(t===undefined||t==="RSASSA-PKCS1-V1_5")t={encode:h},n=1;else if(t==="NONE"||t==="NULL"||t===null)t={encode:function(){return e}},n=1;var r=t.encode(e,l.n.bitLength());return o.rsa.encrypt(r,l,n)},l},o.wrapRsaPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(e).getBytes())])},o.privateKeyFromAsn1=function(e){var t={},n=[];s.validate(e,a,t,n)&&(e=s.fromDer(r.util.createBuffer(t.privateKey))),t={},n=[];if(!s.validate(e,f,t,n)){var u=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw u.errors=n,u}var l,c,h,p,d,v,m,g;return l=r.util.createBuffer(t.privateKeyModulus).toHex(),c=r.util.createBuffer(t.privateKeyPublicExponent).toHex(),h=r.util.createBuffer(t.privateKeyPrivateExponent).toHex(),p=r.util.createBuffer(t.privateKeyPrime1).toHex(),d=r.util.createBuffer(t.privateKeyPrime2).toHex(),v=r.util.createBuffer(t.privateKeyExponent1).toHex(),m=r.util.createBuffer(t.privateKeyExponent2).toHex(),g=r.util.createBuffer(t.privateKeyCoefficient).toHex(),o.setRsaPrivateKey(new i(l,16),new i(c,16),new i(h,16),new i(p,16),new i(d,16),new i(v,16),new i(m,16),new i(g,16))},o.privateKeyToAsn1=o.privateKeyToRSAPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.qInv))])},o.publicKeyFromAsn1=function(e){var t={},n=[];if(s.validate(e,c,t,n)){var u=s.derToOid(t.publicKeyOid);if(u!==o.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=u,a}e=t.rsaPublicKey}n=[];if(!s.validate(e,l,t,n)){var a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=n,a}var f=r.util.createBuffer(t.publicKeyModulus).toHex(),h=r.util.createBuffer(t.publicKeyExponent).toHex();return o.setRsaPublicKey(new i(f,16),new i(h,16))},o.publicKeyToAsn1=o.publicKeyToSubjectPublicKeyInfo=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[o.publicKeyToRSAPublicKey(e)])])},o.publicKeyToRSAPublicKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,g(e.e))])}},{"./asn1":29,"./forge":33,"./jsbn":35,"./oids":39,"./pkcs1":43,"./prime":48,"./random":51,"./util":57}],54:[function(e,t,n){function u(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),o=!0}function a(e,t,n){var r,i,s,o,u,a,f,l,c=n.length();while(c>=64){i=e.h0,s=e.h1,o=e.h2,u=e.h3,a=e.h4;for(l=0;l<16;++l)r=n.getInt32(),t[l]=r,f=u^s&(o^u),r=(i<<5|i>>>27)+f+a+1518500249+r,a=u,u=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;l<20;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,f=u^s&(o^u),r=(i<<5|i>>>27)+f+a+1518500249+r,a=u,u=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;l<32;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,f=s^o^u,r=(i<<5|i>>>27)+f+a+1859775393+r,a=u,u=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;l<40;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,f=s^o^u,r=(i<<5|i>>>27)+f+a+1859775393+r,a=u,u=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;l<60;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,f=s&o|u&(s^o),r=(i<<5|i>>>27)+f+a+2400959708+r,a=u,u=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;for(;l<80;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,f=s^o^u,r=(i<<5|i>>>27)+f+a+3395469782+r,a=u,u=o,o=(s<<30|s>>>2)>>>0,s=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+u|0,e.h4=e.h4+a|0,c-=64}}var r=e("./forge");e("./md"),e("./util");var i=t.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=i,i.create=function(){o||u();var e=null,t=r.util.createBuffer(),n=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];var n=i.messageLengthSize/4;for(var s=0;s<n;++s)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(s,o){o==="utf8"&&(s=r.util.encodeUtf8(s));var u=s.length;i.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=i.fullMessageLength.length-1;f>=0;--f)i.fullMessageLength[f]+=u[1],u[1]=u[0]+(i.fullMessageLength[f]/4294967296>>>0),i.fullMessageLength[f]=i.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(s),a(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),i},i.digest=function(){var o=r.util.createBuffer();o.putBytes(t.bytes());var u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,f=u&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-f));var l,c,h=i.fullMessageLength[0]*8;for(var p=0;p<i.fullMessageLength.length-1;++p)l=i.fullMessageLength[p+1]*8,c=l/4294967296>>>0,h+=c,o.putInt32(h>>>0),h=l>>>0;o.putInt32(h);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(d,n,o);var v=r.util.createBuffer();return v.putInt32(d.h0),v.putInt32(d.h1),v.putInt32(d.h2),v.putInt32(d.h3),v.putInt32(d.h4),v},i};var s=null,o=!1},{"./forge":33,"./md":36,"./util":57}],55:[function(e,t,n){function a(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function f(e,t,n){var r,i,s,o,a,f,l,c,h,p,d,v,m,g,y,b=n.length();while(b>=64){for(l=0;l<16;++l)t[l]=n.getInt32();for(;l<64;++l)r=t[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=r+t[l-7]+i+t[l-16]|0;c=e.h0,h=e.h1,p=e.h2,d=e.h3,v=e.h4,m=e.h5,g=e.h6,y=e.h7;for(l=0;l<64;++l)o=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),a=g^v&(m^g),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|p&(c^h),r=y+o+a+u[l]+t[l],i=s+f,y=g,g=m,m=v,v=d+r>>>0,d=p,p=h,h=c,c=r+i>>>0;e.h0=e.h0+c|0,e.h1=e.h1+h|0,e.h2=e.h2+p|0,e.h3=e.h3+d|0,e.h4=e.h4+v|0,e.h5=e.h5+m|0,e.h6=e.h6+g|0,e.h7=e.h7+y|0,b-=64}}var r=e("./forge");e("./md"),e("./util");var i=t.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=i,i.create=function(){o||a();var e=null,t=r.util.createBuffer(),n=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];var n=i.messageLengthSize/4
;for(var s=0;s<n;++s)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(s,o){o==="utf8"&&(s=r.util.encodeUtf8(s));var u=s.length;i.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=u[1],u[1]=u[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(s),f(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),i},i.digest=function(){var o=r.util.createBuffer();o.putBytes(t.bytes());var u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=u&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-a));var l,c,h=i.fullMessageLength[0]*8;for(var p=0;p<i.fullMessageLength.length-1;++p)l=i.fullMessageLength[p+1]*8,c=l/4294967296>>>0,h+=c,o.putInt32(h>>>0),h=l>>>0;o.putInt32(h);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};f(d,n,o);var v=r.util.createBuffer();return v.putInt32(d.h0),v.putInt32(d.h1),v.putInt32(d.h2),v.putInt32(d.h3),v.putInt32(d.h4),v.putInt32(d.h5),v.putInt32(d.h6),v.putInt32(d.h7),v},i};var s=null,o=!1,u=null},{"./forge":33,"./md":36,"./util":57}],56:[function(e,t,n){function l(){o=String.fromCharCode(128),o+=r.util.fillString(String.fromCharCode(0),128),a=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],f={},f["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],f["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],f["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],f["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],u=!0}function c(e,t,n){var r,i,s,o,u,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I=n.length();while(I>=128){for(_=0;_<16;++_)t[_][0]=n.getInt32()>>>0,t[_][1]=n.getInt32()>>>0;for(;_<80;++_)H=t[_-2],D=H[0],P=H[1],r=((D>>>19|P<<13)^(P>>>29|D<<3)^D>>>6)>>>0,i=((D<<13|P>>>19)^(P<<3|D>>>29)^(D<<26|P>>>6))>>>0,j=t[_-15],D=j[0],P=j[1],s=((D>>>1|P<<31)^(D>>>8|P<<24)^D>>>7)>>>0,o=((D<<31|P>>>1)^(D<<24|P>>>8)^(D<<25|P>>>7))>>>0,B=t[_-7],F=t[_-16],P=i+B[1]+o+F[1],t[_][0]=r+B[0]+s+F[0]+(P/4294967296>>>0)>>>0,t[_][1]=P>>>0;m=e[0][0],g=e[0][1],y=e[1][0],b=e[1][1],w=e[2][0],E=e[2][1],S=e[3][0],x=e[3][1],T=e[4][0],N=e[4][1],C=e[5][0],k=e[5][1],L=e[6][0],A=e[6][1],O=e[7][0],M=e[7][1];for(_=0;_<80;++_)l=((T>>>14|N<<18)^(T>>>18|N<<14)^(N>>>9|T<<23))>>>0,c=((T<<18|N>>>14)^(T<<14|N>>>18)^(N<<23|T>>>9))>>>0,h=(L^T&(C^L))>>>0,p=(A^N&(k^A))>>>0,u=((m>>>28|g<<4)^(g>>>2|m<<30)^(g>>>7|m<<25))>>>0,f=((m<<4|g>>>28)^(g<<30|m>>>2)^(g<<25|m>>>7))>>>0,d=(m&y|w&(m^y))>>>0,v=(g&b|E&(g^b))>>>0,P=M+c+p+a[_][1]+t[_][1],r=O+l+h+a[_][0]+t[_][0]+(P/4294967296>>>0)>>>0,i=P>>>0,P=f+v,s=u+d+(P/4294967296>>>0)>>>0,o=P>>>0,O=L,M=A,L=C,A=k,C=T,k=N,P=x+i,T=S+r+(P/4294967296>>>0)>>>0,N=P>>>0,S=w,x=E,w=y,E=b,y=m,b=g,P=i+o,m=r+s+(P/4294967296>>>0)>>>0,g=P>>>0;P=e[0][1]+g,e[0][0]=e[0][0]+m+(P/4294967296>>>0)>>>0,e[0][1]=P>>>0,P=e[1][1]+b,e[1][0]=e[1][0]+y+(P/4294967296>>>0)>>>0,e[1][1]=P>>>0,P=e[2][1]+E,e[2][0]=e[2][0]+w+(P/4294967296>>>0)>>>0,e[2][1]=P>>>0,P=e[3][1]+x,e[3][0]=e[3][0]+S+(P/4294967296>>>0)>>>0,e[3][1]=P>>>0,P=e[4][1]+N,e[4][0]=e[4][0]+T+(P/4294967296>>>0)>>>0,e[4][1]=P>>>0,P=e[5][1]+k,e[5][0]=e[5][0]+C+(P/4294967296>>>0)>>>0,e[5][1]=P>>>0,P=e[6][1]+A,e[6][0]=e[6][0]+L+(P/4294967296>>>0)>>>0,e[6][1]=P>>>0,P=e[7][1]+M,e[7][0]=e[7][0]+O+(P/4294967296>>>0)>>>0,e[7][1]=P>>>0,I-=128}}var r=e("./forge");e("./md"),e("./util");var i=t.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=i;var s=r.sha384=r.sha512.sha384=r.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=s,r.sha512.sha256=r.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,i.create=function(e){u||l(),typeof e=="undefined"&&(e="SHA-512");if(e in f){var t=f[e],n=null,i=r.util.createBuffer(),s=new Array(80);for(var a=0;a<80;++a)s[a]=new Array(2);var h=64;switch(e){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28}var p={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16};return p.start=function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];var e=p.messageLengthSize/4;for(var s=0;s<e;++s)p.fullMessageLength.push(0);i=r.util.createBuffer(),n=new Array(t.length);for(var s=0;s<t.length;++s)n[s]=t[s].slice(0);return p},p.start(),p.update=function(e,t){t==="utf8"&&(e=r.util.encodeUtf8(e));var o=e.length;p.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var u=p.fullMessageLength.length-1;u>=0;--u)p.fullMessageLength[u]+=o[1],o[1]=o[0]+(p.fullMessageLength[u]/4294967296>>>0),p.fullMessageLength[u]=p.fullMessageLength[u]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(e),c(n,s,i),(i.read>2048||i.length()===0)&&i.compact(),p},p.digest=function(){var t=r.util.createBuffer();t.putBytes(i.bytes());var u=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize,a=u&p.blockLength-1;t.putBytes(o.substr(0,p.blockLength-a));var f,l,h=p.fullMessageLength[0]*8;for(var d=0;d<p.fullMessageLength.length-1;++d)f=p.fullMessageLength[d+1]*8,l=f/4294967296>>>0,h+=l,t.putInt32(h>>>0),h=f>>>0;t.putInt32(h);var v=new Array(n.length);for(var d=0;d<n.length;++d)v[d]=n[d].slice(0);c(v,s,t);var m=r.util.createBuffer(),g;e==="SHA-512"?g=v.length:e==="SHA-384"?g=v.length-2:g=v.length-4;for(var d=0;d<g;++d)m.putInt32(v[d][0]),(d!==g-1||e!=="SHA-512/224")&&m.putInt32(v[d][1]);return m},p}throw new Error("Invalid SHA-512 algorithm: "+e)};var o=null,u=!1,a=null,f=null},{"./forge":33,"./md":36,"./util":57}],57:[function(e,t,n){(function(n){function s(e){if(e!==8&&e!==16&&e!==24&&e!==32)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function o(e){this.data="",this.read=0;if(typeof e=="string")this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e)){var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else if(e instanceof o||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")this.data=e.data,this.read=e.read;this._constructedStringLength=0}function a(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=i.isArrayBuffer(e),r=i.isArrayBufferView(e);if(n||r){n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!==null&&e!==undefined&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}var r=e("./forge"),i=t.exports=r.util=r.util||{};(function(){if(typeof n!="undefined"&&n.nextTick){i.nextTick=n.nextTick,typeof setImmediate=="function"?i.setImmediate=setImmediate:i.setImmediate=i.nextTick;return}if(typeof setImmediate=="function"){i.setImmediate=function(){return setImmediate.apply(undefined,arguments)},i.nextTick=function(e){return setImmediate(e)};return}i.setImmediate=function(e){setTimeout(e,0)};if(typeof window!="undefined"&&typeof window.postMessage=="function"){var e="forge.setImmediate",t=[];i.setImmediate=function(n){t.push(n),t.length===1&&window.postMessage(e,"*")};function r(n){if(n.source===window&&n.data===e){n.stopPropagation();var r=t.slice();t.length=0,r.forEach(function(e){e()})}}window.addEventListener("message",r,!0)}if(typeof MutationObserver!="undefined"){var s=Date.now(),o=!0,u=document.createElement("div"),t=[];(new MutationObserver(function(){var e=t.slice();t.length=0,e.forEach(function(e){e()})})).observe(u,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(e){Date.now()-s>15?(s=Date.now(),a(e)):(t.push(e),t.length===1&&u.setAttribute("a",o=!o))}}i.nextTick=i.setImmediate})(),i.isNodejs=typeof n!="undefined"&&n.versions&&n.versions.node,i.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},i.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&e.byteLength!==undefined},i.ByteBuffer=o,i.ByteStringBuffer=o;var u=4096;i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>u&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);var n=this.data;while(t>0)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){s(t);var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){s(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},i.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){var e="";for(var t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=a,i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var s=new Uint8Array(this.data.buffer,this.write);return s.set(n),this.write+=r,this}if(i.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var s=new Uint8Array(this.data.buffer);return s.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof i.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&i.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var s=new Uint8Array(e.data.byteLength,this.write);return s.set(n),this.write+=n.byteLength,this}e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary";if(typeof e=="string"){var o;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,o,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,o,this.write),this;t==="utf8"&&(e=i.encodeUtf8(e),t="binary");if(t==="binary"||t==="raw")return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(o),this;if(t==="utf16")return this.accommodate(e.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){s(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return s(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){s(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},i.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},i.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){var e="";for(var t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());e=e||"utf8";if(e==="binary"||e==="raw")return i.binary.raw.encode(t);if(e==="hex")return i.binary.hex.encode(t);if(e==="base64")return i.binary.base64.encode(t);if(e==="utf8")return i.text.utf8.decode(t);if(e==="utf16")return i.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return t=t||"raw",e!==undefined&&t==="utf8"&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){var n="";while(t>0)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n},i.xorBytes=function(e,t,n){var r="",i="",s="",o=0,u=0;for(;n>0;--n,++o)i=e.charCodeAt(o)^t.charCodeAt(o),u>=10&&(r+=s,s="",u=0),s+=String.fromCharCode(i),++u;return r+=s,r},i.hexToBytes=function(e){var t="",n=0;e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));for(;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];i.encode64=function(e,t){var n="",r="",i,s,o,u=0;while(u<e.length)i=e.charCodeAt(u++),s=e.charCodeAt(u++),o=e.charCodeAt(u++),n+=f.charAt(i>>2),n+=f.charAt((i&3)<<4|s>>4),isNaN(s)?n+="==":(n+=f.charAt((s&15)<<2|o>>6),n+=isNaN(o)?"=":f.charAt(o&63)),t&&n.length>t&&(r+=n.substr(0,t)+"\r\n",n=n.substr(t));return r+=n,r},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var t="",n,r,i,s,o=0;while(o<e.length)n=l[e.charCodeAt(o++)-43],r=l[e.charCodeAt(o++)-43],i=l[e.charCodeAt(o++)-43],s=l[e.charCodeAt(o++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;var i=n;for(var s=0;s<e.length;++s)r[i++]=e.charCodeAt(s);return t?i-n:r},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,s=n;e.length&1&&(i=1,r[s++]=parseInt(e[0],16));for(;i<e.length;i+=2)r[s++]=parseInt(e.substr(i,2),16);return t?s-n:r},i.binary.base64.encode=function(e,t){var n="",r="",i,s,o,u=0;while(u<e.byteLength)i=e[u++],s=e[u++],o=e[u++],n+=f.charAt(i>>2),n+=f.charAt((i&3)<<4|s>>4),isNaN(s)?n+="==":(n+=f.charAt((s&15)<<2|o>>6),n+=isNaN(o)?"=":f.charAt(o&63)),t&&n.length>t&&(r+=n.substr(0,t)+"\r\n",n=n.substr(t));return r+=n,r},i.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;var i,s,o,u,a=0,f=n;while(a<e.length)i=l[e.charCodeAt(a++)-43],s=l[e.charCodeAt(a++)-43],o=l[e.charCodeAt(a++)-43],u=l[e.charCodeAt(a++)-43],r[f++]=i<<2|s>>4,o!==64&&(r[f++]=(s&15)<<4|o>>2,u!==64&&(r[f++]=(o&3)<<6|u));return t?f-n:r.subarray(0,f)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,n){e=i.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;var s=n;for(var o=0;o<e.length;++o)r[s++]=e.charCodeAt(o);return t?s-n:r},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;var s=n,o=n;for(var u=0;u<e.length;++u)i[o++]=e.charCodeAt(u),s+=2;return t?s-n:r},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,n){t=i.decode64(e.deflate(i.encode64(t)).rval);if(n){var r=2,s=t.charCodeAt(1);s&32&&(r=6),t=t.substring(r,t.length-4)}return t},i.inflate=function(e,t,n){var r=e.inflate(i.encode64(t)).rval;return r===null?null:i.decode64(r)};var c=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;n===null?r=e.removeItem(t):(n=i.encode64(JSON.stringify(n)),r=e.setItem(t,n));if(typeof r!="undefined"&&r.rval!==!0){var s=new Error(r.error.message);throw s.id=r.error.id,s.name=r.error.name,s}},h=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(i.decode64(n))),n},p=function(e,t,n,r){var i=h(e,t);i===null&&(i={}),i[n]=r,c(e,t,i)},d=function(e,t,n){var r=h(e,t);return r!==null&&(r=n in r?r[n]:null),r},v=function(e,t,n){var r=h(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var s in r){i=!1;break}i&&(r=null),c(e,t,r)}},m=function(e,t){c(e,t,null)},g=function(e,t,n){var r=null;typeof n=="undefined"&&(n=["web","flash"]);var i,s=!1,o=null;for(var u in n){i=n[u];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");r=e.apply(this,t),s=i==="flash"}if(i==="web"||i==="both")t[0]=localStorage,r=e.apply(this,t),s=!0}catch(a){o=a}if(s)break}if(!s)throw o;return r};i.setItem=function(e,t,n,r,i){g(p,arguments,i)},i.getItem=function(e,t,n,r){return g(d,arguments,r)},i.removeItem=function(e,t,n,r){g(v,arguments,r)},i.clearItems=function(e,t,n){g(m,arguments,n)},i.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=n===null?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?r.port!==80&&r.scheme==="http"?r.fullHost+=":"+r.port:r.port!==443&&r.scheme==="https"&&(r.fullHost+=":"+r.port):r.scheme==="http"?r.port=80:r.scheme==="https"&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var y=null;i.getQueryVariables=function(e){var t=function(e){var t={},n=e.split("&");for(var r=0;r<n.length;r++){var i=n[r].indexOf("="),s,o;i>0?(s=n[r].substring(0,i),o=n[r].substring(i+1)):(s=n[r],o=null),s in t||(t[s]=[]),!(s in Object.prototype)&&o!==null&&t[s].push(unescape(o))}return t},n;return typeof e=="undefined"?(y===null&&(typeof window!="undefined"&&window.location&&window.location.search?y=t(window.location.search.substring(1)):y={}),n=y):n=t(e),n},i.parseFragment=function(e){var t=e,n="",r=e.indexOf("?");r>0&&(t=e.substring(0,r),n=e.substring(r+1));var s=t.split("/");s.length>0&&s[0]===""&&s.shift();var o=n===""?{}:i.getQueryVariables(n);return{pathString:t,queryString:n,path:s,query:o}},i.makeRequest=function(e){var t=i.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(e){return typeof e=="undefined"?t.path:t.path[e]},getQuery:function(e,n){var r;return typeof e=="undefined"?r=t.query:(r=t.query[e],r&&typeof n!="undefined"&&(r=r[n])),r},getQueryLast:function(e,t){var r,i=n.getQuery(e);return i?r=i[i.length-1]:r=t,r}};return n},i.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},i.setPath=function(e,t,n){if(typeof e=="object"&&e!==null){var r=0,i=t.length;while(r<i){var s=t[r++];if(r==i)e[s]=n;else{var o=s in e;if(!o||o&&typeof e[s]!="object"||o&&e[s]===null)e[s]={};e=e[s]}}}},i.getPath=function(e,t,n){var r=0,i=t.length,s=!0;while(s&&r<i&&typeof e=="object"&&e!==null){var o=t[r++];s=o in e,s&&(e=e[o])}return s?e:n},i.deletePath=function(e,t){if(typeof e=="object"&&e!==null){var n=0,r=t.length;while(n<r){var i=t[n++];if(n==r)delete e[i];else{if(!(i in e&&typeof e[i]=="object"&&e[i]!==null))break;e=e[i]}}}},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){var t=/%./g,n,r,i=0,s=[],o=0;while(n=t.exec(e)){r=e.substring(o,t.lastIndex-2),r.length>0&&s.push(r),o=t.lastIndex;var u=n[0][1];switch(u){case"s":case"o":i<arguments.length?s.push(arguments[i++ +1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+u+"?>")}}return s.push(e.substring(o)),s.join("")},i.formatNumber=function(e,t,n,r){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=n===undefined?",":n,u=r===undefined?".":r,a=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",l=f.length>3?f.length%3:0;return a+(l?f.substr(0,l)+u:"")+f.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+u)+(s?o+Math.abs(i-f).toFixed(s).slice(2):"")},i.formatSize=function(e){return e>=1073741824?e=i.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=i.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=i.formatNumber(e/1024,0)+" KiB":e=i.formatNumber(e,0)+" bytes",e},i.bytesFromIP=function(e){return e.indexOf(".")!==-1?i.bytesFromIPv4(e):e.indexOf(":")!==-1?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){e=e.split(".");if(e.length!==4)return null;var t=i.createBuffer();for(var n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()},i.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(e){return e.length===0&&++t,!0});var n=(8-e.length+t)*2,r=i.createBuffer();for(var s=0;s<8;++s){if(!e[s]||e[s].length===0){r.fillWithByte(0,n),n=0;continue}var o=i.hexToBytes(e[s]);o.length<2&&r.putByte(0),r.putBytes(o)}return r.getBytes()},i.bytesToIP=function(e){return e.length===4?i.bytesToIPv4(e):e.length===16?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(e.length!==4)return null;var t=[];for(var n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},i.bytesToIPv6=function(e){if(e.length!==16)return null;var t=[],n=[],r=0;for(var s=0;s<e.length;s+=2){var o=i.bytesToHex(e[s]+e[s+1]);while(o[0]==="0"&&o!=="0")o=o.substr(1);if(o==="0"){var u=n[n.length-1],a=t.length;!u||a!==u.end+1?n.push({start:a,end:a}):(u.end=a,u.end-u.start>n[r].end-n[r].start&&(r=n.length-1))}t.push(o)}if(n.length>0){var f=n[r];f.end-f.start>0&&(t.splice(f.start,f.end-f.start+1,""),f.start===0&&t.unshift(""),f.end===7&&t.push(""))}return t.join(":")},i.estimateCores=function(e,t){function r(e,u,a){if(u===0){var f=Math.floor(e.reduce(function(e,t){return e+t},0)/e.length);return i.cores=Math.max(1,f),URL.revokeObjectURL(n),t(null,i.cores)}s(a,function(t,n){e.push(o(a,n)),r(e,u-1,a)})}function s(e,t){var r=[],i=[];for(var s=0;s<e;++s){var o=new Worker(n);o.addEventListener("message",function(n){i.push(n.data);if(i.length===e){for(var s=0;s<e;++s)r[s].terminate();t(null,i)}}),r.push(o)}for(var s=0;s<e;++s)r[s].postMessage(s)}function o(e,t){var n=[];for(var r=0;r<e;++r){var i=t[r],s=n[r]=[];for(var o=0;o<e;++o){if(r===o)continue;var u=t[o];(i.st>u.st&&i.st<u.et||u.st>i.st&&u.st<i.et)&&s.push(o)}}return n.reduce(function(e,t){return Math.max(e,t.length)},0)}typeof e=="function"&&(t=e,e={}),e=e||{};if("cores"in i&&!e.update)return t(null,i.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in 
navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if(typeof Worker=="undefined")return i.cores=1,t(null,i.cores);if(typeof Blob=="undefined")return i.cores=2,t(null,i.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){var t=Date.now(),n=t+4;while(Date.now()<n);self.postMessage({st:t,et:n})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)}}).call(this,e("_process"))},{"./forge":33,_process:124}],58:[function(e,t,n){function p(e,t){typeof t=="string"&&(t={shortName:t});var n=null,r;for(var i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}function v(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),n,s,o=e.attributes;for(var u=0;u<o.length;++u){n=o[u];var a=n.value,f=i.Type.PRINTABLESTRING;"valueTagClass"in n&&(f=n.valueTagClass,f===i.Type.UTF8&&(a=r.util.encodeUtf8(a))),s=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.type).getBytes()),i.create(i.Class.UNIVERSAL,f,!1,a)])]),t.value.push(s)}return t}function m(e){var t={};for(var n=0;n<e.length;++n){var s=e[n];if(s.shortName&&(s.valueTagClass===i.Type.UTF8||s.valueTagClass===i.Type.PRINTABLESTRING||s.valueTagClass===i.Type.IA5STRING)){var o=s.value;s.valueTagClass===i.Type.UTF8&&(o=r.util.encodeUtf8(s.value)),s.shortName in t?r.util.isArray(t[s.shortName])?t[s.shortName].push(o):t[s.shortName]=[t[s.shortName],o]:t[s.shortName]=o}}return t}function g(e){var t;for(var n=0;n<e.length;++n){t=e[n],typeof t.name=="undefined"&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in u&&(t.name=s.oids[u[t.shortName]]));if(typeof t.type=="undefined"){if(!(t.name&&t.name in s.oids)){var r=new Error("Attribute type not specified.");throw r.attribute=t,r}t.type=s.oids[t.name]}typeof t.shortName=="undefined"&&t.name&&t.name in u&&(t.shortName=u[t.name]);if(t.type===o.extensionRequest){t.valueConstructed=!0,t.valueTagClass=i.Type.SEQUENCE;if(!t.value&&t.extensions){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(s.certificateExtensionToAsn1(y(t.extensions[a])))}}if(typeof t.value=="undefined"){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function y(e,t){t=t||{},typeof e.name=="undefined"&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]);if(typeof e.id=="undefined"){if(!(e.name&&e.name in s.oids)){var n=new Error("Extension ID not specified.");throw n.extension=e,n}e.id=s.oids[e.name]}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var u=0,a=0,f=0;e.digitalSignature&&(a|=128,u=7),e.nonRepudiation&&(a|=64,u=6),e.keyEncipherment&&(a|=32,u=5),e.dataEncipherment&&(a|=16,u=4),e.keyAgreement&&(a|=8,u=3),e.keyCertSign&&(a|=4,u=2),e.cRLSign&&(a|=2,u=1),e.encipherOnly&&(a|=1,u=0),e.decipherOnly&&(f|=128,u=7);var l=String.fromCharCode(u);f!==0?l+=String.fromCharCode(a)+String.fromCharCode(f):a!==0&&(l+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if(e.name==="basicConstraints")e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var h in e){if(e[h]!==!0)continue;h in o?c.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[h]).getBytes())):h.indexOf(".")!==-1&&c.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(h).getBytes()))}}else if(e.name==="nsCertType"){var u=0,a=0;e.client&&(a|=128,u=7),e.server&&(a|=64,u=6),e.email&&(a|=32,u=5),e.objsign&&(a|=16,u=4),e.reserved&&(a|=8,u=3),e.sslCA&&(a|=4,u=2),e.emailCA&&(a|=2,u=1),e.objCA&&(a|=1,u=0);var l=String.fromCharCode(u);a!==0&&(l+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var p;for(var d=0;d<e.altNames.length;++d){p=e.altNames[d];var l=p.value;if(p.type===7&&p.ip){l=r.util.bytesFromIP(p.ip);if(l===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else p.type===8&&(p.oid?l=i.oidToDer(i.oidToDer(p.oid)):l=i.oidToDer(l));e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,p.type,!1,l))}}else if(e.name==="subjectKeyIdentifier"&&t.cert){var m=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=m.toHex(),e.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,m.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var c=e.value.value;if(e.keyIdentifier){var g=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var y=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[v(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];c.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,y))}if(e.serialNumber){var b=r.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);c.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,b))}}else if(e.name==="cRLDistributionPoints"){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var c=e.value.value,w=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),E=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]),p;for(var d=0;d<e.altNames.length;++d){p=e.altNames[d];var l=p.value;if(p.type===7&&p.ip){l=r.util.bytesFromIP(p.ip);if(l===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else p.type===8&&(p.oid?l=i.oidToDer(i.oidToDer(p.oid)):l=i.oidToDer(l));E.value.push(i.create(i.Class.CONTEXT_SPECIFIC,p.type,!1,l))}w.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[E])),c.push(w)}if(typeof e.value=="undefined"){var n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function b(e,t){switch(e){case o["RSASSA-PSS"]:var n=[];return t.hash.algorithmOid!==undefined&&n.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==undefined&&n.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),t.saltLength!==undefined&&n.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,n);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function w(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;var n=e.attributes;for(var s=0;s<n.length;++s){var o=n[s],u=o.value,a=i.Type.UTF8;"valueTagClass"in o&&(a=o.valueTagClass),a===i.Type.UTF8&&(u=r.util.encodeUtf8(u));var f=!1;"valueConstructed"in o&&(f=o.valueConstructed);var l=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,a,f,u)])]);t.value.push(l)}return t}var r=e("./forge");e("./aes"),e("./asn1"),e("./des"),e("./md"),e("./mgf"),e("./oids"),e("./pem"),e("./pss"),e("./rsa"),e("./util");var i=r.asn1,s=t.exports=r.pki=r.pki||{},o=s.oids,u={};u.CN=o.commonName,u.commonName="CN",u.C=o.countryName,u.countryName="C",u.L=o.localityName,u.localityName="L",u.ST=o.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=o.organizationName,u.organizationName="O",u.OU=o.organizationalUnitName,u.organizationalUnitName="OU",u.E=o.emailAddress,u.emailAddress="E";var a=r.pki.rsa.publicKeyValidator,f={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},a,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},c={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},a,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},h={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[c,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};s.RDNAttributesAsArray=function(e,t){var n=[],r,s,a;for(var f=0;f<e.value.length;++f){r=e.value[f];for(var l=0;l<r.value.length;++l)a={},s=r.value[l],a.type=i.derToOid(s.value[0].value),a.value=s.value[1].value,a.valueTagClass=s.value[1].type,a.type in o&&(a.name=o[a.type],a.name in u&&(a.shortName=u[a.name])),t&&(t.update(a.type),t.update(a.value)),n.push(a)}return n},s.CRIAttributesAsArray=function(e){var t=[];for(var n=0;n<e.length;++n){var r=e[n],a=i.derToOid(r.value[0].value),f=r.value[1].value;for(var l=0;l<f.length;++l){var c={};c.type=a,c.value=f[l].value,c.valueTagClass=f[l].type,c.type in o&&(c.name=o[c.type],c.name in u&&(c.shortName=u[c.name]));if(c.type===o.extensionRequest){c.extensions=[];for(var h=0;h<c.value.length;++h)c.extensions.push(s.certificateExtensionFromAsn1(c.value[h]))}t.push(c)}}return t};var d=function(e,t,n){var r={};if(e!==o["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},u=[];if(!i.validate(t,l,s,u)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=u,a}return s.hashOid!==undefined&&(r.hash=r.hash||{},r.hash.algorithmOid=i.derToOid(s.hashOid)),s.maskGenOid!==undefined&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=i.derToOid(s.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),s.saltLength!==undefined&&(r.saltLength=s.saltLength.charCodeAt(0)),r};s.certificateFromPem=function(e,t,n){var o=r.pem.decode(e)[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=i.fromDer(o.body,n);return s.certificateFromAsn1(a,t)},s.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.publicKeyFromPem=function(e){var t=r.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||r.md.sha1.create(),o=t.type||"RSAPublicKey",u;switch(o){case"RSAPublicKey":u=i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":u=i.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(u);var a=n.digest();if(t.encoding==="hex"){var f=a.toHex();return t.delimiter?f.match(/.{2}/g).join(t.delimiter):f}if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return a},s.certificationRequestFromPem=function(e,t,n){var o=r.pem.decode(e)[0];if(o.type!=="CERTIFICATE REQUEST"){var u=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=i.fromDer(o.body,n);return s.certificationRequestFromAsn1(a,t)},s.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(e)).getBytes()};return r.pem.encode(n,{maxline:t})},s.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return p(e.issuer,t)},e.issuer.addField=function(t){g([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){g(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){g(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)y(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});var n=null,r;for(var i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(t,n){e.md=n||r.md.sha1.create();var u=o[e.md.algorithm+"WithRSAEncryption"];if(!u){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=u,e.tbsCertificate=s.getTBSCertificate(e);var f=i.toDer(e.tbsCertificate);e.md.update(f.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var u=t.issuer,a=e.subject,f=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw f.expectedIssuer=u.attributes,f.actualIssuer=a.attributes,f}var l=t.md;if(l===null){if(t.signatureOid in o){var c=o[t.signatureOid];switch(c){case"sha1WithRSAEncryption":l=r.md.sha1.create();break;case"md5WithRSAEncryption":l=r.md.md5.create();break;case"sha256WithRSAEncryption":l=r.md.sha256.create();break;case"sha512WithRSAEncryption":l=r.md.sha512.create();break;case"RSASSA-PSS":l=r.md.sha256.create()}}if(l===null){var f=new Error("Could not compute certificate digest. Unknown signature OID.");throw f.signatureOid=t.signatureOid,f}var h=t.tbsCertificate||s.getTBSCertificate(t),p=i.toDer(h);l.update(p.getBytes())}if(l!==null){var d;switch(t.signatureOid){case o.sha1WithRSAEncryption:d=undefined;break;case o["RSASSA-PSS"]:var v,m;v=o[t.signatureParameters.mgf.hash.algorithmOid];if(v===undefined||r.md[v]===undefined){var f=new Error("Unsupported MGF hash function.");throw f.oid=t.signatureParameters.mgf.hash.algorithmOid,f.name=v,f}m=o[t.signatureParameters.mgf.algorithmOid];if(m===undefined||r.mgf[m]===undefined){var f=new Error("Unsupported MGF function.");throw f.oid=t.signatureParameters.mgf.algorithmOid,f.name=m,f}m=r.mgf[m].create(r.md[v].create()),v=o[t.signatureParameters.hash.algorithmOid];if(v===undefined||r.md[v]===undefined)throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:v};d=r.pss.create(r.md[v].create(),m,t.signatureParameters.saltLength)}n=e.publicKey.verify(l.digest().getBytes(),t.signature,d)}return n},e.isIssuer=function(t){var n=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;var s,o;for(var u=0;n&&u<r.attributes.length;++u){s=r.attributes[u],o=i.attributes[u];if(s.type!==o.type||s.value!==o.value)n=!1}}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){var t=o.subjectKeyIdentifier;for(var n=0;n<e.extensions.length;++n){var i=e.extensions[n];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var n={},u=[];if(!i.validate(e,f,n,u)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=u,a}var l=i.derToOid(n.publicKeyOid);if(l!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificate();c.version=n.certVersion?n.certVersion.charCodeAt(0):0;var h=r.util.createBuffer(n.certSerialNumber);c.serialNumber=h.toHex(),c.signatureOid=r.asn1.derToOid(n.certSignatureOid),c.signatureParameters=d(c.signatureOid,n.certSignatureParams,!0),c.siginfo.algorithmOid=r.asn1.derToOid(n.certinfoSignatureOid),c.siginfo.parameters=d(c.siginfo.algorithmOid,n.certinfoSignatureParams,!1),c.signature=n.certSignature;var v=[];n.certValidity1UTCTime!==undefined&&v.push(i.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==undefined&&v.push(i.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==undefined&&v.push(i.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==undefined&&v.push(i.generalizedTimeToDate(n.certValidity4GeneralizedTime));if(v.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(v.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");c.validity.notBefore=v[0],c.validity.notAfter=v[1],c.tbsCertificate=n.tbsCertificate;if(t){c.md=null;if(c.signatureOid in o){var l=o[c.signatureOid];switch(l){case"sha1WithRSAEncryption":c.md=r.md.sha1.create();break;case"md5WithRSAEncryption":c.md=r.md.md5.create();break;case"sha256WithRSAEncryption":c.md=r.md.sha256.create();break;case"sha512WithRSAEncryption":c.md=r.md.sha512.create();break;case"RSASSA-PSS":c.md=r.md.sha256.create()}}if(c.md===null){var a=new Error("Could not compute certificate digest. Unknown signature OID.");throw a.signatureOid=c.signatureOid,a}var m=i.toDer(c.tbsCertificate);c.md.update(m.getBytes())}var y=r.md.sha1.create();c.issuer.getField=function(e){return p(c.issuer,e)},c.issuer.addField=function(e){g([e]),c.issuer.attributes.push(e)},c.issuer.attributes=s.RDNAttributesAsArray(n.certIssuer,y),n.certIssuerUniqueId&&(c.issuer.uniqueId=n.certIssuerUniqueId),c.issuer.hash=y.digest().toHex();var b=r.md.sha1.create();return c.subject.getField=function(e){return p(c.subject,e)},c.subject.addField=function(e){g([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(n.certSubject,b),n.certSubjectUniqueId&&(c.subject.uniqueId=n.certSubjectUniqueId),c.subject.hash=b.digest().toHex(),n.certExtensions?c.extensions=s.certificateExtensionsFromAsn1(n.certExtensions):c.extensions=[],c.publicKey=s.publicKeyFromAsn1(n.subjectPublicKeyInfo),c},s.certificateExtensionsFromAsn1=function(e){var t=[];for(var n=0;n<e.value.length;++n){var r=e.value[n];for(var i=0;i<r.value.length;++i)t.push(s.certificateExtensionFromAsn1(r.value[i]))}return t},s.certificateExtensionFromAsn1=function(e){var t={};t.id=i.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===i.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value;if(t.id in o){t.name=o[t.id];if(t.name==="keyUsage"){var n=i.fromDer(t.value),s=0,u=0;n.value.length>1&&(s=n.value.charCodeAt(1),u=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=(s&128)===128,t.nonRepudiation=(s&64)===64,t.keyEncipherment=(s&32)===32,t.dataEncipherment=(s&16)===16,t.keyAgreement=(s&8)===8,t.keyCertSign=(s&4)===4,t.cRLSign=(s&2)===2,t.encipherOnly=(s&1)===1,t.decipherOnly=(u&128)===128}else if(t.name==="basicConstraints"){var n=i.fromDer(t.value);n.value.length>0&&n.value[0].type===i.Type.BOOLEAN?t.cA=n.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;n.value.length>0&&n.value[0].type===i.Type.INTEGER?a=n.value[0].value:n.value.length>1&&(a=n.value[1].value),a!==null&&(t.pathLenConstraint=i.derToInteger(a))}else if(t.name==="extKeyUsage"){var n=i.fromDer(t.value);for(var f=0;f<n.value.length;++f){var l=i.derToOid(n.value[f].value);l in o?t[o[l]]=!0:t[l]=!0}}else if(t.name==="nsCertType"){var n=i.fromDer(t.value),s=0;n.value.length>1&&(s=n.value.charCodeAt(1)),t.client=(s&128)===128,t.server=(s&64)===64,t.email=(s&32)===32,t.objsign=(s&16)===16,t.reserved=(s&8)===8,t.sslCA=(s&4)===4,t.emailCA=(s&2)===2,t.objCA=(s&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];var c,n=i.fromDer(t.value);for(var h=0;h<n.value.length;++h){c=n.value[h];var p={type:c.type,value:c.value};t.altNames.push(p);switch(c.type){case 1:case 2:case 6:break;case 7:p.ip=r.util.bytesToIP(c.value);break;case 8:p.oid=i.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var n=i.fromDer(t.value);t.subjectKeyIdentifier=r.util.bytesToHex(n.value)}}return t},s.certificationRequestFromAsn1=function(e,t){var n={},u=[];if(!i.validate(e,h,n,u)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=u,a}var f=i.derToOid(n.publicKeyOid);if(f!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var l=s.createCertificationRequest();l.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,l.signatureOid=r.asn1.derToOid(n.csrSignatureOid),l.signatureParameters=d(l.signatureOid,n.csrSignatureParams,!0),l.siginfo.algorithmOid=r.asn1.derToOid(n.csrSignatureOid),l.siginfo.parameters=d(l.siginfo.algorithmOid,n.csrSignatureParams,!1),l.signature=n.csrSignature,l.certificationRequestInfo=n.certificationRequestInfo;if(t){l.md=null;if(l.signatureOid in o){var f=o[l.signatureOid];switch(f){case"sha1WithRSAEncryption":l.md=r.md.sha1.create();break;case"md5WithRSAEncryption":l.md=r.md.md5.create();break;case"sha256WithRSAEncryption":l.md=r.md.sha256.create();break;case"sha512WithRSAEncryption":l.md=r.md.sha512.create();break;case"RSASSA-PSS":l.md=r.md.sha256.create()}}if(l.md===null){var a=new Error("Could not compute certification request digest. Unknown signature OID.");throw a.signatureOid=l.signatureOid,a}var c=i.toDer(l.certificationRequestInfo);l.md.update(c.getBytes())}var v=r.md.sha1.create();return l.subject.getField=function(e){return p(l.subject,e)},l.subject.addField=function(e){g([e]),l.subject.attributes.push(e)},l.subject.attributes=s.RDNAttributesAsArray(n.certificationRequestInfoSubject,v),l.subject.hash=v.digest().toHex(),l.publicKey=s.publicKeyFromAsn1(n.subjectPublicKeyInfo),l.getAttribute=function(e){return p(l,e)},l.addAttribute=function(e){g([e]),l.attributes.push(e)},l.attributes=s.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),l},s.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return p(e,t)},e.addAttribute=function(t){g([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){g(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){g(t),e.attributes=t},e.sign=function(t,n){e.md=n||r.md.sha1.create();var u=o[e.md.algorithm+"WithRSAEncryption"];if(!u){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=u,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var f=i.toDer(e.certificationRequestInfo);e.md.update(f.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(n===null){if(e.signatureOid in o){var u=o[e.signatureOid];switch(u){case"sha1WithRSAEncryption":n=r.md.sha1.create();break;case"md5WithRSAEncryption":n=r.md.md5.create();break;case"sha256WithRSAEncryption":n=r.md.sha256.create();break;case"sha512WithRSAEncryption":n=r.md.sha512.create();break;case"RSASSA-PSS":n=r.md.sha256.create()}}if(n===null){var a=new Error("Could not compute certification request digest. Unknown signature OID.");throw a.signatureOid=e.signatureOid,a}var f=e.certificationRequestInfo||s.getCertificationRequestInfo(e),l=i.toDer(f);n.update(l.getBytes())}if(n!==null){var c;switch(e.signatureOid){case o.sha1WithRSAEncryption:break;case o["RSASSA-PSS"]:var h,p;h=o[e.signatureParameters.mgf.hash.algorithmOid];if(h===undefined||r.md[h]===undefined){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=h,a}p=o[e.signatureParameters.mgf.algorithmOid];if(p===undefined||r.mgf[p]===undefined){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=p,a}p=r.mgf[p].create(r.md[h].create()),h=o[e.signatureParameters.hash.algorithmOid];if(h===undefined||r.md[h]===undefined){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=e.signatureParameters.hash.algorithmOid,a.name=h,a}c=r.pss.create(r.md[h].create(),p,e.signatureParameters.saltLength)}t=e.publicKey.verify(n.digest().getBytes(),e.signature,c)}return t},e},s.getTBSCertificate=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.siginfo.algorithmOid).getBytes()),b(e.siginfo.algorithmOid,e.siginfo.parameters)]),v(e.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e.validity.notBefore)),i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e.validity.notAfter))]),v(e.subject),s.publicKeyToAsn1
(e.publicKey)]);return e.issuer.uniqueId&&t.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&t.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&t.value.push(s.certificateExtensionsToAsn1(e.extensions)),t},s.getCertificationRequestInfo=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),v(e.subject),s.publicKeyToAsn1(e.publicKey),w(e)]);return t},s.distinguishedNameToAsn1=function(e){return v(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),n=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(s.certificateExtensionToAsn1(e[r]));return t},s.certificateExtensionToAsn1=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.id).getBytes())),e.critical&&t.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return typeof e.value!="string"&&(n=i.toDer(n).getBytes()),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,n)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){function n(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=r.md.sha1.create();e.attributes=s.RDNAttributesAsArray(v(e),t),e.hash=t.digest().toHex()}}var t={certs:{}};t.getIssuer=function(e){var t=n(e.issuer);return t},t.addCertificate=function(e){typeof e=="string"&&(e=r.pki.certificateFromPem(e)),o(e.subject);if(!t.hasCertificate(e))if(e.subject.hash in t.certs){var n=t.certs[e.subject.hash];r.util.isArray(n)||(n=[n]),n.push(e),t.certs[e.subject.hash]=n}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){typeof e=="string"&&(e=r.pki.certificateFromPem(e));var t=n(e.subject);if(!t)return!1;r.util.isArray(t)||(t=[t]);var o=i.toDer(s.certificateToAsn1(e)).getBytes();for(var u=0;u<t.length;++u){var a=i.toDer(s.certificateToAsn1(t[u])).getBytes();if(o===a)return!0}return!1},t.listAllCertificates=function(){var e=[];for(var n in t.certs)if(t.certs.hasOwnProperty(n)){var i=t.certs[n];if(!r.util.isArray(i))e.push(i);else for(var s=0;s<i.length;++s)e.push(i[s])}return e},t.removeCertificate=function(e){var u;typeof e=="string"&&(e=r.pki.certificateFromPem(e)),o(e.subject);if(!t.hasCertificate(e))return null;var a=n(e.subject);if(!r.util.isArray(a))return u=t.certs[e.subject.hash],delete t.certs[e.subject.hash],u;var f=i.toDer(s.certificateToAsn1(e)).getBytes();for(var l=0;l<a.length;++l){var c=i.toDer(s.certificateToAsn1(a[l])).getBytes();f===c&&(u=a[l],a.splice(l,1))}return a.length===0&&delete t.certs[e.subject.hash],u};if(e)for(var u=0;u<e.length;++u){var a=e[u];t.addCertificate(a)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,n){t=t.slice(0);var i=t.slice(0),o=new Date,u=!0,a=null,f=0;do{var l=t.shift(),c=null,h=!1;if(o<l.validity.notBefore||o>l.validity.notAfter)a={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o};if(a===null){c=t[0]||e.getIssuer(l),c===null&&l.isIssuer(l)&&(h=!0,c=l);if(c){var p=c;r.util.isArray(p)||(p=[p]);var d=!1;while(!d&&p.length>0){c=p.shift();try{d=c.verify(l)}catch(v){}}d||(a={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}a===null&&(!c||h)&&!e.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}a===null&&c&&!l.isIssuer(c)&&(a={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate});if(a===null){var m={keyUsage:!0,basicConstraints:!0};for(var g=0;a===null&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in m)&&(a={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}}if(a===null&&(!u||t.length===0&&(!c||h))){var b=l.getExtension("basicConstraints"),w=l.getExtension("keyUsage");w!==null&&(!w.keyCertSign||b===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate}),a===null&&b!==null&&!b.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate});if(a===null&&w!==null&&"pathLenConstraint"in b){var E=f-1;E>b.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}}var S=a===null?!0:a.error,x=n?n(S,f,i):S;if(x!==!0){S===!0&&(a={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate});if(x||x===0)typeof x=="object"&&!r.util.isArray(x)?(x.message&&(a.message=x.message),x.error&&(a.error=x.error)):typeof x=="string"&&(a.error=x);throw a}a=null,u=!1,++f}while(t.length>0);return!0}},{"./aes":28,"./asn1":29,"./des":32,"./forge":33,"./md":36,"./mgf":37,"./oids":39,"./pem":42,"./pss":50,"./rsa":53,"./util":57}],59:[function(e,t,n){(function(n){"use strict";function f(e){if(16!==e.length)throw new Error("invalid iv")}function l(e){var t=function(e,t,n){try{f(n)}catch(r){return Promise.reject(r)}var i=Promise.resolve();return i=i.then(function(){var r=o.cipher.createCipher("AES-CBC",new u(e));r.start({iv:new u(n)}),r.update(new u(t));if(!r.finish())return Promise.reject(new Error("encryption failed"));var i=r.output.native();return i}),i},i=function(e,t,i){try{f(i)}catch(s){return Promise.reject(s)}var o=Promise.resolve();return o=o.then(function(){var t={name:"AES-CBC"};return r.subtleCrypto.importKey("raw",e,t,!0,["encrypt"])}),o=o.then(function(e){var n={name:"AES-CBC",iv:i};return r.subtleCrypto.encrypt(n,e,t)}),o=o.then(function(e){return e=new n(e),e}),o},s=function(t,i,s){try{f(s)}catch(o){return Promise.reject(o)}var u=Promise.resolve(i);return u=u.then(function(i){var o="AES-"+e+"-CBC",u=r.nodeCrypto.createCipheriv(o,t,s),a=n.concat([u.update(i),u.final()]);return a}),u};return r.setupFallback(s,i,t)}function c(e){var t=function(e,t,n){try{f(n)}catch(r){return Promise.reject(r)}var i=Promise.resolve();return i=i.then(function(){var r=o.cipher.createDecipher("AES-CBC",new u(e));r.start({iv:new u(n)}),r.update(new u(t));if(!r.finish())return Promise.reject(new Error("encryption failed"));var i=r.output.native();return i}),i},i=function(e,t,i){try{f(i)}catch(s){return Promise.reject(s)}var o=Promise.resolve();return o=o.then(function(){var t={name:"AES-CBC"};return r.subtleCrypto.importKey("raw",e,t,!0,["decrypt"])}),o=o.then(function(e){var n={name:"AES-CBC",iv:i};return r.subtleCrypto.decrypt(n,e,t)}),o=o.then(function(e){return e=new n(e),e}),o},s=function(t,i,s){try{f(s)}catch(o){return Promise.reject(o)}var u=Promise.resolve();return u=u.then(function(){var o="AES-"+e+"-CBC",u=r.nodeCrypto.createDecipheriv(o,t,s),a=n.concat([u.update(i),u.final()]);return a}),u};return r.setupFallback(s,i,t)}function h(e,t){if(t<<1!==e.length<<3)throw new Error("invalid encryption key size")}function p(e){var t=l(e);return function(s,o,u){try{h(s,e)}catch(a){return Promise.reject(a)}var f=s.slice(e/8),l=s.slice(0,e/8),c=u.iv||new n(0),p=u.aad||u.adata||new n(0),d=t(f,o,c);return d=d.then(function(t){var s=n.concat([p,c,t,r.int64ToBuffer(p.length*8)]),o;return o=i["HS"+e*2].sign(l,s,{loose:!0}),o=o.then(function(n){var r=n.mac.slice(0,e/8);return{data:t,tag:r}}),o}),d}}function d(e){var t=c(e);return function(s,o,u){try{h(s,e)}catch(a){return Promise.reject(a)}var f=s.slice(e/8),l=s.slice(0,e/8),c=u.iv||new n(0),p=u.aad||u.adata||new n(0),d=u.tag||u.mac||new n(0),v=Promise.resolve();return v=v.then(function(){var t,s=n.concat([p,c,o,r.int64ToBuffer(p.length*8)]);return t=i["HS"+e*2].verify(l,s,d,{loose:!0}),t=t.then(function(){return o},function(){throw new Error("mac check failed")}),t}),v=v.then(function(){return t(f,o,c)}),v}}function y(e,t,i,o){var u=e.length*8,a=u/2,f=Promise.resolve();return f=f.then(function(){var s=n.concat([r.int32ToBuffer(1),e,r.int32ToBuffer(a),new n(t,"utf8"),i,o,v]);return s}),f=f.then(function(e){return s["SHA-"+u].digest(e).then(function(e){return e.slice(0,a/8)})}),f=Promise.resolve(f),f}function b(e,t,i,o){var u=e.length*8,a=u,f=Promise.resolve();return f=f.then(function(){var s=n.concat([r.int32ToBuffer(1),e,r.int32ToBuffer(a),new n(t,"utf8"),i,o,m]);return s}),f=f.then(function(e){return s["SHA-"+u].digest(e).then(function(e){return e.slice(0,a/8)})}),f=Promise.resolve(f),f}function w(e,t){var s=l(e);return function(o,u,f){var l=f.epu||r.int32ToBuffer(0),c=f.epv||r.int32ToBuffer(0),h=f.iv||new n(0),p=f.aad||f.adata||new n(0),d=f.kdata||new n(0),v=[y(o,t,l,c),b(o,t,l,c)],m,w,E=Promise.all(v).then(function(e){m=e[0],w=e[1]});return E=E.then(function(){return s(m,u,h)}),E=E.then(function(t){var r=n.concat([p,g,new n(d),g,new n(a.base64url.encode(h),"utf8"),g,new n(a.base64url.encode(t),"utf8")]);return Promise.all([Promise.resolve(t),i["HS"+e*2].sign(w,r,{loose:!1})])}),E=E.then(function(e){return{data:e[0],tag:e[1].mac}}),E}}function E(e,t){var s=c(e);return function(o,u,f){var l=f.epu||r.int32ToBuffer(0),c=f.epv||r.int32ToBuffer(0),h=f.iv||new n(0),p=f.aad||f.adata||new n(0),d=f.kdata||new n(0),v=f.tag||f.mac||new n(0),m=[y(o,t,l,c),b(o,t,l,c)],w,E,S=Promise.all(m).then(function(e){w=e[0],E=e[1]});return S=S.then(function(){var t=n.concat([p,g,new n(d),g,new n(a.base64url.encode(h),"utf8"),g,new n(a.base64url.encode(u),"utf8")]);try{return i["HS"+e*2].verify(E,t,v,{loose:!1})}catch(r){throw new Error("mac check failed")}}),S=S.then(function(){return s(w,u,h)}),S}}var r=e("./helpers.js"),i=e("./hmac.js"),s=e("./sha.js"),o=e("../deps/forge.js"),u=e("../util/databuffer.js"),a=e("../util"),v=new n("Encryption","utf8"),m=new n("Integrity","utf8"),g=new n(".","utf8"),S={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach(function(e){var t=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(e)[1]);S[e]={encrypt:p(t),decrypt:d(t)}}),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach(function(e){var t=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(e)[1]);S[e]={encrypt:w(t,e),decrypt:E(t,e)}}),t.exports=S}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"../util":109,"../util/databuffer.js":108,"./helpers.js":68,"./hmac.js":70,"./sha.js":76,buffer:9}],60:[function(e,t,n){(function(n){"use strict";function o(e){function t(t,n){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==n.length)throw new Error("invalid iv")}var o=function(e,r,o){var u=o.iv||new n(0),a=o.aad||o.adata||new n(0),f,l;try{t(e,u,a)}catch(c){return Promise.reject(c)}f=s.createCipher({key:e,iv:u,additionalData:a}),l=new n(r.length);var h=new Promise(function(e,t){var n=i.CHUNK_SIZE,s=0,o=0;(function u(){var i=Math.min(n,r.length-o);s+=f.update(r,o,i,l,s),o+=i;if(r.length>o){setTimeout(u,0);return}s+=f.finish(l,s);if(s!==r.length){t(new Error("encryption failed"));return}var a=f.tag;e({data:l,tag:a})})()});return h},u=function(e,i,s){var o=s.iv||new n(0),u=s.aad||s.adata||new n(0);try{t(e,o,u)}catch(a){return Promise.reject(a)}var f={name:"AES-GCM"},l;return l=r.subtleCrypto.importKey("raw",e,f,!0,["encrypt"]),l=l.then(function(e){return f.iv=o,f.tagLength=128,u.length&&(f.additionalData=u),r.subtleCrypto.encrypt(f,e,i)}),l=l.then(function(e){var t=e.byteLength-16,r=e.slice(t);r=new n(r);var i=e.slice(0,t);return i=new n(i),{data:i,tag:r}}),l},a=function(e,i,s){var o=s.iv||new n(0),u=s.aad||s.adata||new n(0);try{t(e,o,u)}catch(a){return Promise.reject(a)}var f="aes-"+e.length*8+"-gcm",l;try{l=r.nodeCrypto.createCipheriv(f,e,o)}catch(a){throw new Error("unsupported algorithm: "+f)}if("function"!=typeof l.setAAD)throw new Error("unsupported algorithm: "+f);u.length&&l.setAAD(u);var c=n.concat([l.update(i),l.final()]),h=l.getAuthTag();return{data:c,tag:h}};return r.setupFallback(a,u,o)}function u(e){function t(t,n,r){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==n.length)throw new Error("invalid iv");if(16!==r.length)throw new Error("invalid tag length")}var o=function(e,r,o){var u=o.aad||o.adata||new n(0),a=o.iv||new n(0),f=o.tag||o.mac||new n(0),l,c;try{t(e,a,f)}catch(h){return Promise.reject(h)}l=s.createDecipher({key:e,iv:a,additionalData:u,tag:f}),c=new n(r.length);var p=new Promise(function(e,t){var n=i.CHUNK_SIZE,s=0,o=0;(function u(){var i=Math.min(n,r.length-o);s+=l.update(r,o,i,c,s),o+=i;if(r.length>o){setTimeout(u,0);return}try{s+=l.finish(c,s)}catch(a){t(new Error("decryption failed"));return}if(s!==r.length){t(new Error("decryption failed"));return}e(c)})()});return p},u=function(e,i,s){var o=s.aad||s.adata||new n(0),u=s.iv||new n(0),a=s.tag||s.mac||new n(0);try{t(e,u,a)}catch(f){return Promise.reject(f)}var l={name:"AES-GCM"},c;return c=r.subtleCrypto.importKey("raw",e,l,!0,["decrypt"]),c=c.then(function(e){return l.iv=u,l.tagLength=128,o.length&&(l.additionalData=o),i=n.concat([i,a],i.length+a.length),r.subtleCrypto.decrypt(l,e,i)}),c=c.then(function(e){return e=new n(e),e}),c},a=function(e,i,s){var o=s.aad||s.adata||new n(0),u=s.iv||new n(0),a=s.tag||s.mac||new n(0);try{t(e,u,a)}catch(f){return Promise.reject(f)}var l="aes-"+e.length*8+"-gcm",c;try{c=r.nodeCrypto.createDecipheriv(l,e,u)}catch(f){throw new Error("unsupported algorithm: "+l)}if("function"!=typeof c.setAAD)throw new Error("unsupported algorithm: "+l);c.setAuthTag(a),o.length&&c.setAAD(o);try{var h=n.concat([c.update(i),c.final()]);return h}catch(f){throw new Error("decryption failed")}};return r.setupFallback(a,u,o)}var r=e("./helpers.js"),i=e("./constants.js"),s=e("../deps/ciphermodes/gcm"),a={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach(function(e){var t=parseInt(/A(\d+)GCM(?:KW)?/g.exec(e)[1]);a[e]={encrypt:o(t),decrypt:u(t)}}),t.exports=a}).call(this,e("buffer").Buffer)},{"../deps/ciphermodes/gcm":78,"./constants.js":63,"./helpers.js":68,buffer:9}],61:[function(e,t,n){(function(n){"use strict";function u(e,t){var r=Math.max(e.length,t.length),i=new n(r);for(var s=0;r>s;s++)i[s]=(e[s]||0)^(t[s]||0);return i}function a(e,t){var n=[];for(var r=0;e.length>r;r+=t)n.push(e.slice(r,r+t));return n}function f(e){var t=Math.floor(e/4294967296),r=e%4294967296,i=new n(8);return i[0]=255&t>>>24,i[1]=255&t>>>16,i[2]=255&t>>>8,i[3]=255&t>>>0,i[4]=255&r>>>24,i[5]=255&r>>>16,i[6]=255&r>>>8,i[7]=255&r>>>0,i}function l(e){function t(t,n){if(e!==t.length<<3)throw new Error("invalid key size");if(0<n.length&&0!==n.length%8)throw new Error("invalid data length")}var l=function(e,r){try{t(e,r)}catch(l){return Promise.reject(l)}var c=i.cipher.createCipher("AES",new s(e)),h=a(r,8),p,d,v;p=o;for(var m=0;6>m;m++)for(var g=0;h.length>g;g++)v=h.length*m+g+1,d=n.concat([p,h[g]]),c.start(),c.update(new s(d)),c.finish(),d=c.output.native(),p=u(d.slice(0,8),f(v)),h[g]=d.slice(8,16);h=[p].concat(h);var y=n.concat(h);return Promise.resolve({data:y})},c=function(e,i){try{t(e,i)}catch(s){return Promise.reject(s)}var o={name:"AES-KW"},u=[r.subtleCrypto.importKey("raw",i,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),r.subtleCrypto.importKey("raw",e,o,!0,["wrapKey"])];return u=Promise.all(u),u=u.then(function(e){return r.subtleCrypto.wrapKey("raw",e[0],e[1],o)}),u=u.then(function(e){return e=new n(e),{data:e}}),u};return r.setupFallback(null,c,l)}function c(e){function t(t,n){if(e!==t.length<<3)throw new Error("invalid key size");if(0<n.length-8&&0!==n.length%8)throw new Error("invalid data length")}var l=function(e,r){try{t(e,r)}catch(l){return Promise.reject(l)}var c=i.cipher.createDecipher("AES",new s(e)),h=a(r,8),p,d,v;p=h[0],h=h.slice(1);for(var m=5;0<=m;--m)for(var g=h.length-1;0<=g;--g)v=h.length*m+g+1,d=u(p,f(v)),d=n.concat([d,h[g]]),c.start(),c.update(new s(d)),c.finish(),d=c.output.native(),p=d.slice(0,8),h[g]=d.slice(8,16);if(p.toString()!==o.toString())return Promise.reject(new Error("decryption failed"));var y=n.concat(h);return Promise.resolve(y)},c=function(e,i){try{t(e,i)}catch(s){return Promise.reject(s)}var o={name:"AES-KW"},u=r.subtleCrypto.importKey("raw",e,o,!0,["unwrapKey"]);return u=u.then(function(e){return r.subtleCrypto.unwrapKey("raw",i,e,o,{name:"HMAC",hash:"SHA-256"},!0,["sign"])}),u=u.then(function(e){return r.subtleCrypto.exportKey("raw",e)}),u=u.then(function(e){return e=new n(e),e}),u};return r.setupFallback(null,c,l)}var r=e("./helpers.js"),i=e("../deps/forge.js"),s=e("../util/databuffer.js"),o=new n("a6a6a6a6a6a6a6a6","hex"),h={};["A128KW","A192KW","A256KW"].forEach(function(e){var t=parseInt(/A(\d+)KW/g.exec(e)[1]);h[e]={encrypt:l(t),decrypt:c(t)}}),t.exports=h}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"../util/databuffer.js":108,"./helpers.js":68,buffer:9}],62:[function(e,t,n){(function(n){"use strict";function s(e){e=e.replace("CONCAT-","");var t=function(t,s){function p(){if(l===c++)return n.concat(h).slice(0,o);var e=new n(4+t.length+a.length);return e.writeUInt32BE(c,0),t.copy(e,4),a.copy(e,4+t.length),f(e).then(function(e){return h.push(e),p()})}s=s||{};var o=s.length,u=r.HASHLENGTH[e];if(!o)return Promise.reject(new Error("invalid key length"));if(!s.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var a=s.otherInfo,f=i[e].digest,l=Math.ceil(o/u),c=0,h=[];return p()};return t}var r=e("./constants.js"),i=e("./sha.js"),o={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach(function(e){o[e]={derive:s(e)}}),t.exports=o}).call(this,e("buffer").Buffer)},{"./constants.js":63,"./sha.js":76,buffer:9}],63:[function(e,t,n){"use strict";t.exports={CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}}},{}],64:[function(e,t,n){"use strict";function r(e){return Promise.resolve({data:e,once:!0,direct:!0})}function i(e){return Promise.resolve(e)}var s={dir:{encrypt:r,decrypt:i}};t.exports=s},{}],65:[function(e,t,n){(function(n){"use strict";function a(e,t){var n=t?["x","y"]:["d"];n=n.map(function(t){return new s.jsbn.BigInteger(e[t].toString("hex"),16)}),n=[e.crv].concat(n);var r=t?i.asPublicKey:i.asPrivateKey;return r.apply(i,n)}function f(e,t){var n=r(e),i=t?["x","y"]:["x","y","d"];return i.forEach(function(e){n[e]=o.base64url.encode(n[e])}),delete n.key_ops,delete n.use,delete n.alg,t&&delete n.d,n}function l(e,t){var n=r(e),i=t?["x","y"]:["d"];return i.forEach(function(e){n[e]=o.asBuffer(n[e],"base64url")}),n}function h(e,t){e=l(e,t);var r=t?n.concat([c,e.x,e.y]):e.d;return r}function p(e){return u[e||""]||NaN}var r=e("lodash.clone"),i=e("../deps/ecc"),s=e("../deps/forge.js"),o=e("../util"),u={"P-256":256,"P-384":384,"P-521":521},c=new n([4]);t.exports={convertToForge:a,convertToJWK:f,convertToObj:l,convertToBuffer:h,curveSize:p}}).call(this,e("buffer").Buffer)},{"../deps/ecc":83,"../deps/forge.js":85,"../util":109,buffer:9,"lodash.clone":18}],66:[function(e,t,n){(function(n){"use strict";function d(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+e)}}function m(){var e={name:"ECDH"},t=function(e,t){var n=e&&a.convertToForge(e,!0);if(!n||!n.isValid())return Promise.reject(new Error("invalid EC public key"));switch(t){case"jwk":n=a.convertToJWK(e,!0);break;case"buffer":n=a.convertToBuffer(e,!0)}return Promise.resolve(n)},s=function(e,n){n=n||{};var r=n.length||0,i=a.convertToForge(e,!1),s=t(n.public,"forge");return s=s.then(function(e){var t=i.computeSecret(e);if(r){if(t.length<r)return Promise.reject(new Error("key length too large: "+r));t=t.slice(0,r)}return t}),s},o=function(s,o){s=s||{},o=o||{};var u=o.length||0,f=i(r(e),{namedCurve:s.crv});u||(u=s.d.length);var l=a.convertToJWK(s,!1);l=h.subtleCrypto.importKey("jwk",l,f,!1,["deriveBits"]);var c=t(o.public,"jwk");c=c.then(function(e){return h.subtleCrypto.importKey("jwk",e,f,!1,[])});var p=Promise.all([l,c]);return p=p.then(function(t){var n=t[0],s=t[1],o=i(r(e),{"public":s});return h.subtleCrypto.deriveBits(o,n,u*8)}),p=p.then(function(e){return e=new n(e),e}),p},u=function(e,n){if("function"!=typeof h.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");n=n||{};var r=n.length||0,i;switch(e.crv){case"P-256":i="prime256v1";break;case"P-384":i="secp384r1";break;case"P-521":i="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+i))}var s=a.convertToBuffer(e,!1),o=t(n.public,"buffer");return o=o.then(function(e){var t=h.nodeCrypto.createECDH(i);t.setPrivateKey(s);var n=t.computeSecret(e);if(r){if(n.length<r)return Promise.reject(new Error("key length too large: "+r));n=n.slice(0,r)}return n}),o};return h.setupFallback(u,o,s)}function g(){var e=function(e,t){t=t||{};var n;try{n=t.hash||d(e.crv);if(!n)throw new Error("invalid hash: "+n);n.toUpperCase()}catch(r){return Promise.reject(r)}var i=["public"],u=v.ECDH.derive(e,o(t,i));return u=u.then(function(e){return l["CONCAT-"+n].derive(e,s(t,i))}),u};return e}function y(){var e=function(e,t){t=t||{};var n;try{n=t.hash||d(e.crv);if(!n)throw new Error("invalid hash: "+n);n.toUpperCase()}catch(r){return Promise.reject(r)}var i=["public"],u=v.ECDH.derive(e,o(t,i));return u=u.then(function(e){return f["HKDF-"+n].derive(e,s(t,i))}),u};return e}function b(e,t,r){function i(e){return n.concat([h.int32ToBuffer(e.length),e])}var s=r.algorithm||"",o=p.KEYLENGTH[s],a=u.asBuffer(r.apu||"","base64url"),f=u.asBuffer(r.apv||"","base64url"),l=n.concat([i(new n(s,"utf8")),i(a),i(f),h.int32ToBuffer(o)]),c={"public":t,length:o/8,hash:"SHA-256",otherInfo:l};return v["ECDH-CONCAT"].derive(e,c)}function w(){var e=function(e,t,n){n=n||{};if(!n.epk||!n.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var r=a.convertToObj(n.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var i=a.convertToObj(e,!0),s=b(r,i,{algorithm:n.enc,apu:n.apu,apv:n.apv});return s=s.then(function(e){return{data:e,once:!0,direct:!0}}),s};return e}function E(){var e=function(e,t,n){n=n||{};if(!n.epk||!n.epk.x||!n.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var r=a.convertToObj(n.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var i=a.convertToObj(e,!1),s=b(i,r,{algorithm:n.enc,apu:n.apu,apv:n.apv});return s=s.then(function(e){return e}),s};return e}function S(e){var t=function(t,n,r){r=r||{};if(!r.epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var i=a.convertToObj(r.epk,!1);if(!t||!t.x||!t.y)return Promise.reject(new Error("missing static public key"));var s=a.convertToObj(t,!0),o=b(i,s,{algorithm:r.alg,apu:r.apu,apv:r.apv});return o=o.then(function(t){return e(t,n)}),o};return t}function x(e){var t=function(t,n,r){r=r||{};if(!r.epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var i=a.convertToObj(r.epk,!0);if(!t||!t.d)return Promise.reject(new Error("missing static private key"));var s=a.convertToObj(t,!1),o=b(s,i,{algorithm:r.alg,apu:r.apu,apv:r.apv});return o=o.then(function(t){return e(t,n)}),o};return t}var r=e("lodash.clone"),i=e("../util/merge"),s=e("lodash.omit"),o=e("lodash.pick"),u=e("../util"),a=e("./ec-util.js"),f=e("./hkdf.js"),l=e("./concat.js"),c=e("./aes-kw.js"),h=e("./helpers.js"),p=e("./constants.js"),v=t.exports={};["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach(function(e){var t=/^ECDH(?:-(\w+))?$/g.exec(e||"")[1],n=v[e]=v[e]||{};switch(t||""){case"CONCAT":n.derive=g();break;case"HKDF":n.derive=y();break;case"":n.derive=m();break;default:n.derive=null}}),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach(function(e){var t=/^ECDH-ES(?:\+(.+))?/g.exec(e||"")[1],n=v[e]=v[e]||{};t?(t=c[t],t?(n.encrypt=S(t.encrypt),n.decrypt=x(t.decrypt)):n.ecrypt=n.decrypt=null):(n.encrypt=w(),n.decrypt=E())})}).call(this,e("buffer").Buffer)},{"../util":109,"../util/merge":110,"./aes-kw.js":61,"./concat.js":62,"./constants.js":63,"./ec-util.js":65,"./helpers.js":68,"./hkdf.js":69,buffer:9,"lodash.clone":18,"lodash.omit":23,"lodash.pick":25}],67:[function(e,t,n){(function(n){"use strict";function o(e){switch(e){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+e)}}function u(e){var t=o(e),u=function(i,o){if(t!==i.crv)return Promise.reject(new Error("invalid curve"));var u=r.convertToForge(i,!1),a;return a=s[e].digest(o),a=a.then(function(e){return e=u.sign(e),e=n.concat([e.r,e.s]),{data:o,mac:e}}),a},a=function(s,o){if(t!==s.crv)return Promise.reject(new Error("invalid curve"));var u=r.convertToJWK(s,!1),a,f={name:"ECDSA",namedCurve:u.crv,hash:{name:e}};return a=i.subtleCrypto.importKey("jwk",u,f,!0,["sign"]),a=a.then(function(e){return i.subtleCrypto.sign(f,e,o)}),a=a.then(function(e){return e=new n(e),{data:o,mac:e}}),a};return i.setupFallback(null,a,u)}function a(e){var t=o(e),n=function(n,i,o){if(t!==n.crv)return Promise.reject(new Error("invalid curve"));var u=r.convertToForge(n,!0),a;return a=s[e].digest(i),a=a.then(function(e){var t=o.length/2,n={r:o.slice(0,t),s:o.slice(t)};return u.verify(e,n)?{data:i,mac:o,valid:!0}:Promise.reject(new Error("verification failed"))}),a},u=function(n,s,o){if(t!==n.crv)return Promise.reject(new Error("invalid curve"));var u=r.convertToJWK(n,!0),a,f={name:"ECDSA",namedCurve:u.crv,hash:{name:e}};return a=i.subtleCrypto.importKey("jwk",u,f,!0,["verify"]),a=a.then(function(e){return i.subtleCrypto.verify(f,e,o,s)}),a=a.then(function(e){return e?{data:s,mac:o,valid:!0}:Promise.reject(new Error("verification failed"))}),a};return i.setupFallback(null,u,n)}var r=e("./ec-util.js"),i=e("./helpers.js"),s=e("./sha.js"),f={};["ES256","ES384","ES512"].forEach(function(e){var t=e.replace(/ES(\d+)/g,function(e,t){return"SHA-"+t});f[e]={sign:u(t),verify:a(t)}}),t.exports=f}).call(this,e("buffer").Buffer)},{"./ec-util.js":65,"./helpers.js":68,"./sha.js":76,buffer:9}],68:[function(e,t,n){(function(t){"use strict";function i(){return"undefined"!=typeof crypto&&"undefined"!=typeof crypto.subtle?crypto.subtle:undefined}function s(){var t;try{t=e("crypto")}catch(n){return undefined}return Object.keys(t).length?t:undefined}typeof Promise=="undefined"&&e("es6-promise").polyfill(),n.int32ToBuffer=function(e,n){return n=n||new t(4),n[0]=e>>>24&255,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n};var r=Math.pow(2,32);n.int64ToBuffer=function(e,i){i=i||new t(8);var s=Math.floor(e/r),o=e%r;return s=n.int32ToBuffer(s),o=n.int32ToBuffer(o),i=t.concat([s,o]),i};var o={};Object.defineProperty(n,"subtleCrypto",{get:function(){var e;return"subtleCrypto"in o?e=o.subtleCrypto:e=o.subtleCrypto=i(),e},enumerable:!0}),Object.defineProperty(n,"nodeCrypto",{get:function(){var e;return"nodeCrypto"in o?e=o.nodeCrypto:e=o.nodeCrypto=s(),e},enumerable:!0}),n.setupFallback=function(e,t,r){var i;return e&&n.nodeCrypto?i=function(){function o(e){return 0===e.message.indexOf("unsupported algorithm:")?(i=r,i.apply(null,n)):Promise.reject(e)}var n=arguments,s;try{s=Promise.resolve(e.apply(null,n))}catch(u){s=o(u)}return s}:t&&n.subtleCrypto?i=function(){function o(e){return e.code!==DOMException.NOT_SUPPORTED_ERR&&e.message!=="Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"&&e instanceof Error?Promise.reject(e):(i=r,i.apply(null,n))}var n=arguments,s;try{s=t.apply(null,n),s=s.catch(o)}catch(u){s=o(u)}return s}:i=r,i}}).call(this,e("buffer").Buffer)},{buffer:9,crypto:6,"es6-promise":11}],69:[function(e,t,n){(function(n){"use strict";function s(e){var t=e.replace("HKDF-",""),s=e.replace("HKDF-SHA-","HS"),o=function(e,o){function v(e,t){return h===d++?n.concat(p).slice(0,l):(t||(t=new n(0)),t=n.concat([t,f,new n([d])]),t=s(e,t,{loose:!0}),t=t.then(function(n){return t=n.mac,p.push(t),v(e,t)}),t)}var u=r.HASHLENGTH[t]/8;"string"==typeof s&&(s=i[s].sign),o=o||{};var a=o.salt;if(!a||0===a.length)a=new n(u),a.fill(0);var f=o.info||new n(0),l=o.length||u,c,h=Math.ceil(l/u),p=[],d=0;return c=s(a,e,{loose:!0}),c=c.then(function(e){return v(e.mac)}),c};return o}var r=e("./constants.js"),i=e("./hmac.js"),o={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach(function(e){o[e]={derive:s(e)}}),t.exports=o}).call(this,e("buffer").Buffer)},{"./constants.js":63,"./hmac.js":70,buffer:9}],70:[function(e,t,n){(function(n){"use strict";function u(e){var t=e.replace("HS","SHA").toLowerCase(),s=e.replace("HS","SHA-"),u=function(e,n,o){o=o||{};if(!o.loose&&r.HASHLENGTH[s]>e.length<<3)return Promise.reject(new Error("invalid key length"));var u=i.hmac.create();return u.start(t,e.toString("binary")),u.update(n),u=u.digest().native(),Promise.resolve({data:n,mac:u})},a=function(e,t,i){i=i||{};if(!i.loose&&r.HASHLENGTH[s]>e.length<<3)return Promise.reject(new Error("invalid key length"));var u={name:"HMAC",hash:{name:s}},a;return a=o.subtleCrypto.importKey("raw",e,u,!0,["sign"]),a=a.then(function(e){return o.subtleCrypto.sign(u,e,t)}),a=a.then(function(e){var r=new n(e);return{data:t,mac:r}}),a},f=function(e,n,i){i=i||{};if(!i.loose&&r.HASHLENGTH[s]>e.length<<3)return Promise.reject(new Error("invalid key length"));var u=o.nodeCrypto.createHmac(t,e);u.update(n);var a=u.digest();return{data:n,mac:a}};return o.setupFallback(f,a,u)}function a(e){function a(e,t,n){var i=e?t.length:r.HASHLENGTH[u]/8,s=!0;for(var o=0;i>o;o++)s=s&&t[o]===n[o];return s}var t=e.replace("HS","SHA").toLowerCase(),u=e.replace("HS","SHA-"),f=function(e,n,o,f){f=f||{};if(!f.loose&&r.HASHLENGTH[u]>e.length<<3)return Promise.reject(new Error("invalid key length"));var l=i.hmac.create();return l.start(t,new s(e)),l.update(n),l=l.digest().native(),a(f.loose,o,l)?Promise.resolve({data:n,mac:o,valid:!0}):Promise.reject(new Error("verification failed"))},l=function(e,t,i,s){s=s||{};if(!s.loose&&r.HASHLENGTH[u]>e.length<<3)return Promise.reject(new Error("invalid key length"));var f={name:"HMAC",hash:{name:u}},l;return s.loose?(l=o.subtleCrypto.importKey("raw",e,f,!0,["sign"]),l=l.then(function(e){return o.subtleCrypto.sign(f,e,t)}),l=l.then(function(e){var t=new n(e);return a(!0,i,t)})):(l=o.subtleCrypto.importKey("raw",e,f,!0,["verify"]),l=l.then(function(e){return o.subtleCrypto.verify(f,e,i,t)})),l=l.then(function(e){return e?{data:t,mac:i,valid:!0}:Promise.reject(new Error("verifaction failed"))}),l},c=function(e,n,i,s){s=s||{};if(!s.loose&&r.HASHLENGTH[u]>e.length<<3)return Promise.reject(new Error("invalid key length"));var f=o.nodeCrypto.createHmac(t,e);f.update(n);var l=f.digest();if(!a(s.loose,i,l))throw new Error("verification failed");return{data:n,mac:l,valid:!0}};return o.setupFallback(c,l,f)}var r=e("./constants"),i=e("../deps/forge.js"),s=e("../util/databuffer.js"),o=e("./helpers.js"),f={};["HS1","HS256","HS384","HS512"].forEach(function(e){f[e]={sign:u(e),verify:a(e)}}),t.exports=f}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"../util/databuffer.js":108,"./constants":63,"./helpers.js":68,buffer:9}],71:[function(
e,t,n){"use strict";var r=[e("./aes-cbc-hmac-sha2.js"),e("./aes-gcm.js"),e("./aes-kw.js"),e("./concat.js"),e("./dir.js"),e("./ecdh.js"),e("./ecdsa.js"),e("./hkdf.js"),e("./hmac.js"),e("./pbes2.js"),e("./rsaes.js"),e("./rsassa.js"),e("./sha.js")],i={},s={},o={},u={},a={},f={};r.forEach(function(e){Object.keys(e).forEach(function(t){var n=e[t];"function"==typeof n.encrypt&&(a[t]=n.encrypt),"function"==typeof n.decrypt&&(f[t]=n.decrypt),"function"==typeof n.sign&&(o[t]=n.sign),"function"==typeof n.verify&&(u[t]=n.verify),"function"==typeof n.digest&&(i[t]=n.digest),"function"==typeof n.derive&&(s[t]=n.derive)})}),n.digest=function(e,t,n){var r=i[e];return r?r(t,n):Promise.reject(new Error("unsupported algorithm: "+e))},n.derive=function(e,t,n){var r=s[e];return r?r(t,n):Promise.reject(new Error("unsupported algorithm: "+e))},n.sign=function(e,t,n,r){var i=o[e];return i?i(t,n,r||{}):Promise.reject(new Error("unsupported algorithm: "+e))},n.verify=function(e,t,n,r,i){var s=u[e];return s?s(t,n,r,i||{}):Promise.reject(new Error("unsupported algorithm: "+e))},n.encrypt=function(e,t,n,r){var i=a[e];return i?i(t,n,r||{}):Promise.reject(new Error("unsupported algorithm: "+e))},n.decrypt=function(e,t,n,r){var i=f[e];return i?i(t,n,r||{}):Promise.reject(new Error("unsupported algorithm: "+e))}},{"./aes-cbc-hmac-sha2.js":59,"./aes-gcm.js":60,"./aes-kw.js":61,"./concat.js":62,"./dir.js":64,"./ecdh.js":66,"./ecdsa.js":67,"./hkdf.js":69,"./hmac.js":70,"./pbes2.js":72,"./rsaes.js":74,"./rsassa.js":75,"./sha.js":76}],72:[function(e,t,n){(function(n){"use strict";function f(e,t,r){var i="PBES2-"+e+"+"+t,s=[new n(i,"utf8"),a,r];return n.concat(s)}function l(e,t){var a=o.KEYLENGTH[t]/8,l=function(s,o,l){l=l||{};var c=i.asBuffer(l.p2s||new n(0),"base64url"),h=l.p2c||0;if(0>=h)return Promise.reject(new Error("invalid iteration count"));if(8>c.length)return Promise.reject(new Error("salt too small"));c=f(e,t,c);var p;return p=new Promise(function(t,i){var o=r.md[e.replace("HS","SHA").toLowerCase()].create(),u=function(e,r){e?i(e):(r=new n(r,"binary"),t(r))};r.pkcs5.pbkdf2(s.toString("binary"),c.toString("binary"),h,a,o,u)}),p=p.then(function(e){return u[t].encrypt(e,o)}),p},c=function(r,o,u){var l=i.asBuffer(u.p2s||new n(0),"base64url"),c=u.p2c||0;if(0>=c)return Promise.reject(new Error("invalid iteration count"));if(8>l.length)return Promise.reject(new Error("salt too small"));l=f(e,t,l);var h,p=e.replace("HS","SHA-");return h=Promise.resolve(r),h=h.then(function(e){return s.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveKey"])}),h=h.then(function(e){var t={name:"PBKDF2",salt:l,iterations:c,hash:p},n={name:"AES-KW",length:a*8};return s.subtleCrypto.deriveKey(t,e,n,!0,["wrapKey","unwrapKey"])}),h=h.then(function(e){return Promise.all([s.subtleCrypto.importKey("raw",o,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),e])}),h=h.then(function(e){return s.subtleCrypto.wrapKey("raw",e[0],e[1],"AES-KW")}),h=h.then(function(e){return e=new n(e),{data:e}}),h},h=function(r,o,l){if(6>s.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+e+"+"+t);l=l||{};var c=i.asBuffer(l.p2s||new n(0),"base64url"),h=l.p2c||0;if(0>=h)return Promise.reject(new Error("invalid iteration count"));if(8>c.length)return Promise.reject(new Error("salt too small"));c=f(e,t,c);var p,d=e.replace("HS","SHA");return p=new Promise(function(e,t){function n(n,r){n?t(n):e(r)}s.nodeCrypto.pbkdf2(r,c,h,a,d,n)}),p=p.then(function(e){return u[t].encrypt(e,o)}),p};return s.setupFallback(h,c,l)}function c(e,t){var a=o.KEYLENGTH[t]/8,l=function(s,o,l){l=l||{};var c=i.asBuffer(l.p2s||new n(0),"base64url"),h=l.p2c||0;if(0>=h)return Promise.reject(new Error("invalid iteration count"));if(8>c.length)return Promise.reject(new Error("salt too small"));c=f(e,t,c);var p;return p=new Promise(function(t,i){var o=r.md[e.replace("HS","SHA").toLowerCase()].create(),u=function(e,r){e?i(e):(r=new n(r,"binary"),t(r))};r.pkcs5.pbkdf2(s.toString("binary"),c.toString("binary"),h,a,o,u)}),p=p.then(function(e){return u[t].decrypt(e,o)}),p},c=function(r,o,u){u=u||{};var l=i.asBuffer(u.p2s||new n(0),"base64url"),c=u.p2c||0;if(0>=c)return Promise.reject(new Error("invalid iteration count"));if(8>l.length)return Promise.reject(new Error("salt too small"));l=f(e,t,l);var h=e.replace("HS","SHA-"),p;return p=Promise.resolve(r),p=p.then(function(e){return s.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveKey"])}),p=p.then(function(e){var t={name:"PBKDF2",salt:l,iterations:c,hash:h},n={name:"AES-KW",length:a*8};return s.subtleCrypto.deriveKey(t,e,n,!0,["wrapKey","unwrapKey"])}),p=p.then(function(e){return s.subtleCrypto.unwrapKey("raw",o,e,"AES-KW",{name:"HMAC",hash:"SHA-256"},!0,["sign"])}),p=p.then(function(e){return s.subtleCrypto.exportKey("raw",e)}),p=p.then(function(e){return e=new n(e),e}),p},h=function(r,o,l){if(6>s.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+e+"+"+t);l=l||{};var c=i.asBuffer(l.p2s||new n(0),"base64url"),h=l.p2c||0;if(0>=h)return Promise.reject(new Error("invalid iteration count"));if(8>c.length)return Promise.reject(new Error("salt too small"));c=f(e,t,c);var p,d=e.replace("HS","SHA");return p=new Promise(function(e,t){function n(n,r){n?t(n):e(r)}s.nodeCrypto.pbkdf2(r,c,h,a,d,n)}),p=p.then(function(e){return u[t].decrypt(e,o)}),p};return s.setupFallback(h,c,l)}var r=e("../deps/forge.js"),i=e("../util"),s=e("./helpers.js"),o=e("./constants.js"),u=e("./aes-kw.js"),a=new n([0]),h={};["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach(function(e){var t=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(e),n=t[1],r=t[2];h[e]={encrypt:l(n,r),decrypt:c(n,r)}}),t.exports=h}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"../util":109,"./aes-kw.js":61,"./constants.js":63,"./helpers.js":68,buffer:9}],73:[function(e,t,n){"use strict";function o(e,t){var n=t?["n","e"]:["n","e","d","p","q","dp","dq","qi"];n=n.map(function(t){return new i.jsbn.BigInteger(e[t].toString("hex"),16)});var r=t?i.pki.rsa.setPublicKey:i.pki.rsa.setPrivateKey;return r.apply(i.pki.rsa,n)}function u(e,t){var n=r(e),i=t?["n","e"]:["n","e","d","p","q","dp","dq","qi"];return i.forEach(function(e){n[e]=s.base64url.encode(n[e])}),delete n.key_ops,delete n.use,delete n.alg,t&&(delete n.d,delete n.p,delete n.q,delete n.dp,delete n.dq,delete n.qi),n}function a(e,t){if(e.__cachedPem)return e.__cachedPem;var n;return t?n=i.pki.publicKeyToPem(o(e,t)):n=i.pki.privateKeyToPem(o(e,t)),Object.defineProperty(e,"__cachedPem",{value:n}),n}var r=e("lodash.clone"),i=e("../deps/forge.js"),s=e("../util");t.exports={convertToForge:o,convertToJWK:u,convertToPem:a}},{"../deps/forge.js":85,"../util":109,"lodash.clone":18}],74:[function(e,t,n){(function(n){"use strict";function u(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var u=function(e,n){n=(new s(n)).bytes();var i=o.convertToForge(e,!0),u={};"RSA-OAEP"===t.name&&(u.md=t.hash.name.toLowerCase().replace(/\-/g,""),u.md=r.md[u.md].create());var a=i.encrypt(n,t.name.toUpperCase(),u);return a=(new s(a)).native(),Promise.resolve({data:a})},a;return"RSAES-PKCS1-v1_5"!==t.name?a=function(e,r){e=o.convertToJWK(e,!0);var s;return s=i.subtleCrypto.importKey("jwk",e,t,!0,["encrypt"]),s=s.then(function(e){return i.subtleCrypto.encrypt(t,e,r)}),s=s.then(function(e){var t=new n(e);return{data:t}}),s}:a=null,i.setupFallback(null,a,u)}function a(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var u=function(e,n){n=(new s(n)).bytes();var i=o.convertToForge(e,!1),u={};"RSA-OAEP"===t.name&&(u.md=t.hash.name.toLowerCase().replace(/\-/g,""),u.md=r.md[u.md].create());var a=i.decrypt(n,t.name.toUpperCase(),u);return a=(new s(a)).native(),Promise.resolve(a)},a;"RSAES-PKCS1-v1_5"!==t.name?a=function(e,r){e=o.convertToJWK(e,!1);var s;return s=i.subtleCrypto.importKey("jwk",e,t,!0,["decrypt"]),s=s.then(function(e){return i.subtleCrypto.decrypt(t,e,r)}),s=s.then(function(e){var t=new n(e);return t}),s}:a=null;var f;return i.nodeCrypto&&e==="RSA-OAEP"&&(f=function(e,t){return e=o.convertToPem(e,!1),i.nodeCrypto.privateDecrypt(e,t)}),i.setupFallback(f,a,u)}var r=e("../deps/forge.js"),i=e("./helpers.js"),s=e("../util/databuffer.js"),o=e("./rsa-util.js"),f={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach(function(e){f[e]={encrypt:u(e),decrypt:a(e)}}),t.exports=f}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"../util/databuffer.js":108,"./helpers.js":68,"./rsa-util.js":73,buffer:9}],75:[function(e,t,n){(function(n){"use strict";function u(e){var t=e.replace("RS","SHA").toLowerCase(),i=e.replace("RS","SHA-"),u={name:"RSASSA-PKCS1-V1_5",hash:{name:i}},a=function(e,i){var s=r.md[t].create();s.start(),s.update(i);var u=o.convertToForge(e,!1),a=u.sign(s,"RSASSA-PKCS1-V1_5");return a=new n(a,"binary"),Promise.resolve({data:i,mac:a})},f=function(e,t){e=o.convertToJWK(e,!1);var r;return r=s.subtleCrypto.importKey("jwk",e,u,!0,["sign"]),r=r.then(function(e){return s.subtleCrypto.sign(u,e,t)}),r=r.then(function(e){var r=new n(e);return{data:t,mac:r}}),r},l;return s.nodeCrypto&&s.nodeCrypto.getHashes().indexOf(i)>-1&&(l=function(e,t){e=o.convertToPem(e,!1);var n=s.nodeCrypto.createSign(i);return n.update(t),{data:t,mac:n.sign(o.convertToPem(e,!1))}}),s.setupFallback(l,f,a)}function a(e){var t=e.replace("RS","SHA").toLowerCase(),n=e.replace("RS","SHA-"),i={name:"RSASSA-PKCS1-V1_5",hash:{name:n}},u=function(e,n,i){var s=r.md[t].create();s.start(),s.update(n),s=s.digest().bytes();var u=o.convertToForge(e,!0),a=i.toString("binary"),f=u.verify(s,a,"RSASSA-PKCS1-V1_5");return f?Promise.resolve({data:n,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))},a=function(e,t,n){e=o.convertToJWK(e,!0);var r;return r=s.subtleCrypto.importKey("jwk",e,i,!0,["verify"]),r=r.then(function(e){return s.subtleCrypto.verify(i,e,n,t)}),r=r.then(function(e){return e?{data:t,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),r},f;return s.nodeCrypto&&s.nodeCrypto.getHashes().indexOf(t)>-1&&(f=function(e,n,r){var i=s.nodeCrypto.createVerify(t);i.update(n),i.end();var u=i.verify(o.convertToPem(e,!0),r);return u?{data:n,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}),s.setupFallback(f,a,u)}function f(e){var t=e.replace("PS","SHA").toLowerCase(),s=e.replace("PS","SHA-");return function(e,u){var a=r.md[t].create();a.start(),a.update(u);var f=r.pss.create({md:r.md[t].create(),mgf:r.mgf.mgf1.create(r.md[t].create()),saltLength:i.HASHLENGTH[s]/8}),l=o.convertToForge(e,!1),c=l.sign(a,f);return c=new n(c,"binary"),Promise.resolve({data:u,mac:c})}}function l(e){var t=e.replace("PS","SHA").toLowerCase(),n=e.replace("PS","SHA-");return function(e,s,u){var a=r.md[t].create();a.start(),a.update(s),a=a.digest().bytes();var f=r.pss.create({md:r.md[t].create(),mgf:r.mgf.mgf1.create(r.md[t].create()),saltLength:i.HASHLENGTH[n]/8}),l=o.convertToForge(e,!0),c=u.toString("binary"),h=l.verify(a,c,f);return h?Promise.resolve({data:s,mac:u,valid:!0}):Promise.reject(new Error("verification failed"))}}var r=e("../deps/forge.js"),i=e("./constants"),s=e("./helpers.js"),o=e("./rsa-util.js"),c={};["PS256","PS384","PS512"].forEach(function(e){c[e]={sign:f(e),verify:l(e)}}),["RS256","RS384","RS512"].forEach(function(e){c[e]={sign:u(e),verify:a(e)}}),t.exports=c}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"./constants":63,"./helpers.js":68,"./rsa-util.js":73,buffer:9}],76:[function(e,t,n){(function(n){"use strict";function s(e){var t=e.replace("SHA-","SHA").toLowerCase(),s={name:e},o=function(e){var n=r.md[t].create();return n.update(e),n=n.digest().native(),Promise.resolve(n)},u=function(e){var t;return t=i.subtleCrypto.digest(s,e),t=t.then(function(e){return e=new n(e),e}),t},a=function(e){var n=i.nodeCrypto.createHash(t);return n.update(e),n.digest()};return i.setupFallback(a,u,o)}var r=e("../deps/forge.js"),i=e("./helpers.js"),o={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach(function(e){o[e]={digest:s(e)}}),t.exports=o}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"./helpers.js":68,buffer:9}],77:[function(e,t,n){(function(n){"use strict";function f(){var e=[];for(var t=0;t<256;++t){var n=0;for(var r=7;r>=0;--r)(t&1<<r)!==0&&(n^=o>>>7-r);e.push(n)}return e}var r=e("long"),i=e("lodash.fill"),s=e("../pack.js"),o=3774873600,u=225,a=new r(o>>8),l=t.exports={E1:o,E1B:u,E1L:a,LOOKUP:f(),arrayCopy:function(e,t,n,r,i){if(t<0||r<0||i<0)throw new TypeError("Invalid input.");if(n instanceof Uint8Array){if(r>=n.length||r+i>n.length)throw new TypeError("Invalid input.");if(t!==0||i<e.length)e instanceof Uint8Array?e=e.subarray(t,t+i):e=e.slice(t,t+i);n.set(e,r)}else for(var s=0;s<i;++s)n[r+s]=e[t+s]},arrayEqual:function(e,t){e=e||[],t=t||[];var n=Math.min(e.length,t.length),r=e.length===t.length;for(var i=0;i<n;i++)r=r&&"undefined"!=typeof e[i]&&"undefined"!=typeof t[i]&&e[i]===t[i];return r},asBytes:function(e,t){switch(arguments.length){case 1:return t=new n(16),t.fill(0),s.intToBigEndian(e,t,0),t;case 2:s.intToBigEndian(e,t,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(e,t){switch(arguments.length){case 1:return t=[],i(t,0,0,4),s.bigEndianToInt(e,0,t),t;case 2:s.bigEndianToInt(e,0,t);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){var e=[];for(var t=0;t<4;++t)e.push(1<<31);return e},shiftRight:function(e,t){var n,r;switch(arguments.length){case 1:return n=e[0],e[0]=n>>>1,r=n<<31,n=e[1],e[1]=n>>>1|r,r=n<<31,n=e[2],e[2]=n>>>1|r,r=n<<31,n=e[3],e[3]=n>>>1|r,n<<31&4294967295;case 2:return n=e[0],t[0]=n>>>1,r=n<<31,n=e[1],t[1]=n>>>1|r,r=n<<31,n=e[2],t[2]=n>>>1|r,r=n<<31,n=e[3],t[3]=n>>>1|r,n<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(e,t,n){var r,i,s;switch(arguments.length){case 2:return i=e[0],r=32-t,e[0]=i>>>t,s=i<<r,i=e[1],e[1]=i>>>t|s,s=i<<r,i=e[2],e[2]=i>>>t|s,s=i<<r,i=e[3],e[3]=i>>>t|s,i<<r;case 3:return i=e[0],r=32-t,n[0]=i>>>t,s=i<<r,i=e[1],n[1]=i>>>t|s,s=i<<r,i=e[2],n[2]=i>>>t|s,s=i<<r,i=e[3],n[3]=i>>>t|s,i<<r;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(e,t,n){switch(arguments.length){case 2:e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3];break;case 3:n[0]=e[0]^t[0],n[1]=e[1]^t[1],n[2]=e[2]^t[2],n[3]=e[3]^t[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(e,t){var n=e.slice(),r=[];for(var i=0;i<4;++i){var s=t[i];for(var o=31;o>=0;--o)(s&1<<o)!==0&&l.xor(r,n),l.shiftRight(n)!==0&&(n[0]^=l.E1)}l.arrayCopy(r,0,e,0,4)},multiplyP:function(e,t){switch(arguments.length){case 1:l.shiftRight(e)!==0&&(e[0]^=l.E1);break;case 2:l.shiftRight(e,t)!==0&&(t[0]^=l.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(e,t){var n;switch(arguments.length){case 1:n=l.shiftRightN(e,8),e[0]^=l.LOOKUP[n>>>24];break;case 2:n=l.shiftRightN(e,8,t),t[0]^=l.LOOKUP[n>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}}).call(this,e("buffer").Buffer)},{"../pack.js":81,buffer:9,"lodash.fill":19,"long":27}],78:[function(e,t,n){(function(n){"use strict";function c(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=this.blockSize||16}var r=e("long"),i=e("../../../deps/forge.js"),s=e("./multipliers.js"),o=e("./helpers.js"),u=e("../pack.js"),a=e("../../../util/databuffer.js"),f=e("../helpers.js"),l=16;t.exports={createCipher:function(e){var t=new i.aes.Algorithm("AES-GCM",c);return t.initialize({key:new a(e.key)}),t.mode.start(e),t.mode},createDecipher:function(e){var t=new i.aes.Algorithm("AES-GCM",c);return t.initialize({key:new a(e.key)}),t.mode._decrypt=!0,t.mode.start(e),t.mode}},c.prototype.start=function(e){this.tag=null,e=e||{};if(!("iv"in e))throw new Error("Gcm needs ParametersWithIV or AEADParameters");this.nonce=e.iv;if(this.nonce==null||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in e&&(this.tag=new n(e.tag));var t=this._decrypt?this.blockSize+this.tagLength:this.blockSize;this.bufBlock=new n(t),this.bufBlock.fill(0);var i=e.multiplier;i==null&&(i=new s["8k"]),this.multiplier=i,this.H=this.zeroBlock(),f.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock();if(this.nonce.length===12)this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1;else{this.gHASH(this.J0,this.nonce,this.nonce.length);var o=this.zeroBlock();u.longToBigEndian((new r(this.nonce.length)).multiply(8),o,8),this.gHASHBlock(this.J0,o)}this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=r.ZERO,this.atLengthPre=r.ZERO,this.counter=new n(this.J0),this.bufOff=0,this.totalLength=r.ZERO,"additionalData"in e&&this.processAADBytes(e.additionalData,0,e.additionalData.length)},c.prototype.update=function(e,t,n,r,i){var s=0;while(n>0){var o=Math.min(n,this.bufBlock.length-this.bufOff);e.copy(this.bufBlock,this.bufOff,t,t+o),n-=o,t+=o,this.bufOff+=o,this.bufOff===this.bufBlock.length&&(this.outputBlock(r,i+s),s+=this.blockSize)}return s},c.prototype.finish=function(e,t){var r=0;this._decrypt&&(r+=this.update(this.tag,0,this.tag.length,e,t)),this.totalLength.isZero()&&this.initCipher();var i=this.bufOff;if(this._decrypt){if(i<this.tagLength)throw new Error("data too short");i-=this.tagLength}i>0&&(this.gCTRPartial(this.bufBlock,0,i,e,t+r),r+=i),this.atLength=this.atLength.add(this.atBlockPos);var s=this.zeroBlock();u.longToBigEndian(this.atLength.multiply(8),s,0),u.longToBigEndian(this.totalLength.multiply(8),s,8),this.gHASHBlock(this.S,s);var a=new n(this.blockSize);a.fill(0),f.encrypt(this.cipher,this.J0,0,a,0),this.xor(a,this.S);if(this._decrypt){if(!o.arrayEqual(this.tag,a))throw new Error("mac check in Gcm failed")}else this.tag=new n(this.tagLength),a.copy(this.tag,0,0,this.tagLength);return r},c.prototype.initCipher=function(){this.atLength.greaterThan(r.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(r.ZERO)),this.atBlockPos>0&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(r.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},c.prototype.outputBlock=function(e,t){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,e,t),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},c.prototype.processAADBytes=function(e,t,n){for(var r=0;r<n;++r)this.atBlock[this.atBlockPos]=e[t+r],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},c.prototype.getNextCounterBlock=function(){for(var e=15;e>=12;--e){var t=this.counter[e]+1&255;this.counter[e]=t;if(t!==0)break}var r=new n(this.blockSize);return r.fill(0),f.encrypt(this.cipher,this.counter,0,r,0),r},c.prototype.gCTRBlock=function(e,t,n){var r=this.getNextCounterBlock();this.xor(r,e),r.copy(t,n,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?e:r),this.totalLength=this.totalLength.add(this.blockSize)},c.prototype.gCTRPartial=function(e,t,n,r,i){var s=this.getNextCounterBlock();this.xor(s,e,t,n),s.copy(r,i,0,n),this.gHASHPartial(this.S,this._decrypt?e:s,0,n),this.totalLength=this.totalLength.add(n)},c.prototype.gHASHBlock=function(e,t){this.xor(e,t),this.multiplier.multiplyH(e)},c.prototype.gHASHPartial=function(e,t,n,r){this.xor(e,t,n,r),this.multiplier.multiplyH(e)},c.prototype.xor=function(e,t,n,r){switch(arguments.length){case 2:for(var i=15;i>=0;--i)e[i]^=t[i];break;case 4:while(r-->0)e[r]^=t[n+r];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return e},c.prototype.zeroBlock=function(){var e=new n(l);return e.fill(0),e}}).call(this,e("buffer").Buffer)},{"../../../deps/forge.js":85,"../../../util/databuffer.js":108,"../helpers.js":80,"../pack.js":81,"./helpers.js":77,"./multipliers.js":79,buffer:9,"long":27}],79:[function(e,t,n){"use strict";function s(){this.H=[],this.M=null}var r=e("./helpers.js"),i=e("../pack.js");s.prototype.init=function(e){var t,n,i;if(this.M==null){this.M=[];for(t=0;t<32;++t){this.M[t]=[];for(n=0;n<16;++n){this.M[t][n]=[];for(i=0;i<4;++i)this.M[t][n][i]=0}}}else if(r.arrayEqual(this.H,e))return;this.H=e.slice(),r.asInts(e,this.M[1][8]);for(n=4;n>=1;n>>=1)r.multiplyP(this.M[1][n+n],this.M[1][n]);r.multiplyP(this.M[1][1],this.M[0][8]);for(n=4;n>=1;n>>=1)r.multiplyP(this.M[0][n+n],this.M[0][n]);t=0;for(;;){for(n=2;n<16;n+=n)for(i=1;i<n;++i)r.xor(this.M[t][n],this.M[t][i],this.M[t][n+i]);if(++t===32)return;if(t>1)for(n=8;n>0;n>>=1)r.multiplyP8(this.M[t-2][n],this.M[t][n])}},s.prototype.multiplyH=function(e){var t=[];for(var n=15;n>=0;--n){var r=this.M[n+n][e[n]&15];t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],r=this.M[n+n+1][(e[n]&240)>>>4],t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3]}i.intToBigEndian(t,e,0)},t.exports={"8k":s}},{"../pack.js":81,"./helpers.js":77}],80:[function(e,t,n){"use strict";function i(e,t,n,i,s){var o=new Array(4),u=new Array(4);r.bigEndianToInt(t,n,o),e.encrypt(o,u),r.intToBigEndian(u,i,s)}var r=e("./pack.js");t.exports={encrypt:i}},{"./pack.js":81}],81:[function(e,t,n){(function(n){"use strict";var r=e("long"),i=t.exports={intToBigEndian:function(e,t,r){if(typeof e=="number")switch(arguments.length){case 1:t=new n(4),t.fill(0),i.intToBigEndian(e,t,0);break;case 3:t[r]=255&e>>>24,t[++r]=255&e>>>16,t[++r]=255&e>>>8,t[++r]=255&e;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:t=new n(4*e.length),t.fill(0),i.intToBigEndian(e,t,0);break;case 3:for(var s=0;s<e.length;++s)i.intToBigEndian(e[s],t,r),r+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return t},longToBigEndian:function(e,t,r){if(!Array.isArray(e))switch(arguments.length){case 1:t=new n(8),t.fill(0),i.longToBigEndian(e,t,0);break;case 3:var s=e.low,o=e.high;i.intToBigEndian(o,t,r),i.intToBigEndian(s,t,r+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:t=new n(8*e.length),t.fill(0),i.longToBigEndian(e,t,0);break;case 3:for(var u=0;u<e.length;++u)i.longToBigEndian(e[u],t,r),r+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return t},bigEndianToInt:function(e,t,n){switch(arguments.length){case 2:var r=e[t]<<24;return r|=(e[++t]&255)<<16,r|=(e[++t]&255)<<8,r|=e[++t]&255,r;case 3:for(var s=0;s<n.length;++s)n[s]=i.bigEndianToInt(e,t),t+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(e,t,n){switch(arguments.length){case 2:var s=i.bigEndianToInt(e,t),o=i.bigEndianToInt(e,t+4),u=new r(o,s);return u;case 3:for(var a=0;a<n.length;++a)n[a]=i.bigEndianToLong(e,t),t+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}}).call(this,e("buffer").Buffer)},{buffer:9,"long":27}],82:[function(e,t,n){"use strict";function s(e,t,n,r){this.curve=e,this.g=t,this.n=n,this.h=r}function o(){return this.curve}function u(){return this.g}function a(){return this.n}function f(){return this.h}function l(e){return new r(e,16)}function c(){var e=l("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),t=l("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),n=l("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),o=l("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),u=r.ONE,a=new i.ECCurveFp(e,t,n),f=a.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new s(a,f,o,u)}function h(){var e=l("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),t=l("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),n=l("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),o=l("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),u=r.ONE,a=new i.ECCurveFp(e,t,n),f=a.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F");return new s(a,f,o,u)}function p(){var e=l("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),t=l("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),n=l("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),o=l("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),u=r.ONE,a=new i.ECCurveFp(e,t,n),f=a.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650");return new s(a,f,o,u)}var r=e("../../deps/forge").jsbn.BigInteger,i=e("./math.js");s.prototype.getCurve=o,s.prototype.getG=u,s.prototype.getN=a,s.prototype.getH=f;var d=t.exports={secp256r1:c(),secp384r1:h(),secp521r1:p()};d["P-256"]=d.secp256r1,d["P-384"]=d.secp384r1,d["P-521"]=d.secp521r1},{"../../deps/forge":85,"./math.js":84}],83:[function(e,t,n){(function(t){"use strict";function u(e){return new i(e,16)}function a(e,n){n||(n=Math.ceil(e.bitLength()/8)),n*=2;var r=e.toString(16);r=r.substring(Math.max(r.length-n,0));while(n>r.length)r="0"+r;return new t(r,"hex")}function f(e){return"string"==typeof e&&(e=new t(e,"binary")),u(e.toString("hex"))}function l(e){return Math.ceil(e.getN().bitLength()/8)}function c(e){var t=o[e];if(!t)throw new TypeError("unsupported named curve: "+e);return t}function h(e,t){var n=e.getN().bitLength(),r=t.length*8,i=f(t);return n<r&&(i=i.shiftRight(r-n)),i}function p(e,t,n){var r=c(e),i=r.getCurve(),o=new s.ECPointFp(i,i.fromBigInteger(t),i.fromBigInteger(n));this.curve=e,this.params=r,this.point=o;var u=l(r);this.x=a(t,u),this.y=a(n,u)}function d(e,t){var n=c(e);this.curve=e,this.params=n;var r=l(n);this.d=a(t,r)}var r=e("../../deps/forge"),i=r.jsbn.BigInteger,s=e("./math.js"),o=e("./curves.js");p.prototype.isValid=function(){return this.params.curve.contains(this.point)},p.prototype.verify=function(e,t){var n=this.params.getN(),r=this.params.getG(),s=f(t.r),o=f(t.s);if(s.compareTo(i.ONE)<0||s.compareTo(n)>=0)return!1;if(o.compareTo(i.ONE)<0||s.compareTo(n)>=0)return!1;var u=h(this.params,e),a=o.modInverse(n),l=u.multiply(a).mod(n),c=s.multiply(a).mod(n),p=r.multiplyTwo(l,this.point,c).getX().toBigInteger();return p=p.mod(n),p.equals(s)},d.prototype.toPublicKey=function(){var e=f(this.d),t=this.params.getG().multiply(e);return new p(this.curve,t.getX().toBigInteger(),t.getY().toBigInteger())},d.prototype.sign=function(e){var t=l(this.params),n=this.params.getN(),s=this.params.getG(),o=h(this.params,e),u=f(this.d),c,p,d,v,m;do{do{do d=f(r.random.getBytes(t));while(d.equals(i.ZERO)||d.compareTo(n)>=0);v=s.multiply(d).getX().toBigInteger(),c=v.mod(n)}while(c.equals(i.ZERO));m=u.multiply(c),m=o.add(m),p=d.modInverse(n).multiply(m).mod(n)}while(p.equals(i.ONE));var g=l(this.params);return c=a(c,g),p=a(p,g),{r:c,s:p}},d.prototype.isValid=function(){var e=f(this.d),t=params.getN().subtract(BigIneger.ONE);return e.compareTo(i.ONE)>=0&&e.compareTo(t)<0},d.prototype.computeSecret=function(e){var t=f(this.d),n=e.point.multiply(t).getX().toBigInteger();return n=a(n,l(this.params)),n},n.generateKeyPair=function(e){var t=c(e),n=t.getN(),s=r.random.getBytes(l(t));s=f(s);var o=n.subtract(i.ONE),u=s.mod(o).add(i.ONE),a=new d(e,u),h=a.toPublicKey();return{"private":a,"public":h}},n.asPublicKey=function(e,n,r){"string"==typeof n?n=u(n):t.isBuffer(n)&&(n=f(n)),"string"==typeof r?r=u(r):t.isBuffer(r)&&(r=f(r));var i=new p(e,n,r);return i},n.asPrivateKey=function(e,n){"string"==typeof n?n=u(n):t.isBuffer(n)&&(n=f(n));var r=new d(e,n);return r}}).call(this,e("buffer").Buffer)},{"../../deps/forge":85,"./curves.js":82,"./math.js":84,buffer:9}],84:[function(e,t,n){"use strict";function i(){return new r(null)}function s(e){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function o(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=i();return e.copyTo(t),this.reduce(t),t}function u(e){return e}function a(e){e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(e.compareTo(this.r2)<0)e.dAddOffset(1,this.m.t+1);e.subTo(this.r2,e);while(e.compareTo(this.m)>=0)e.subTo(this.m,e)}function f(e,t){e.squareTo(t),this.reduce(t)}function l(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function c(e,t){this.x=t,this.p=e}function h(e){return e===this?!0:this.p.equals(e.p)&&this.x.equals(e.x)}function p(){return this.x}function d(){return new c(this.p,this.x.negate().mod(this.p))}function v(e){return new c(this.p,this.x.add(e.toBigInteger()).mod(this.p))}function m(e){return new c(this.p,this.x.subtract(e.toBigInteger()).mod(this.p))}function g(e){return new c(this.p,this.x.multiply(e.toBigInteger()).mod(this.p))}function y(){return new c(this.p,this.x.pow(2).mod(this.p))}function b(e){return new c(this.p,this.x.multiply(e.toBigInteger().modInverse(this.p)).mod(this.p))}function w(e,t,n,i){this.curve=e,this.x=t,this.y=n,i?this.z=i:this.z=r.ONE,this.zinv=null}function E(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)}function S(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)}function x(e){if(e===this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,n;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p),t.equals(r.ZERO)?(n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p),n.equals(r.ZERO)):!1}function T(){return this.x==null&&this.y==null?!0:this.z.equals(r.ZERO)&&!this.y.toBigInteger().equals(r.ZERO)}function N(){return new w(this.curve,this.x,this.y.negate(),this.z)}function C(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p);if(r.ZERO.equals(n))return r.ZERO.equals(t)?this.twice():this.curve.getInfinity();var i=new r("3"),s=this.x.toBigInteger(),o=this.y.toBigInteger(),u=n.pow(2),a=u.multiply(n),f=s.multiply(u),l=t.pow(2).multiply(this.z),c=l.subtract(f.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.p),h=f.multiply(i).multiply(t).subtract(o.multiply(a)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.p),p=a.multiply(this.z).multiply(e.z).mod(this.curve.p);return new w(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),p)}function k(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()===0)return this.curve.getInfinity();var e=new r("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),i=n.multiply(this.z),s=i.multiply(n).mod(this.curve.p),o=this.curve.a.toBigInteger(),u=t.pow(2).multiply(e);r.ZERO.equals(o)||(u=u.add(this.z.pow(2).multiply(o))),u=u.mod(this.curve.p);var a=u.pow(2).subtract(t.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(i).mod(this.curve.p),f=u.multiply(e).multiply(t).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(u.pow(2).multiply(u)).mod(this.curve.p),l=i.pow(2).multiply(i).shiftLeft(3).mod(this.curve.p);return new w(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(f),l)}function L(e){if(this.isInfinity())return this;if(e.signum()===0)return this.curve.getInfinity();var t=e,n=t.multiply(new r("3")),i=this.negate(),s=this,o;for(o=n.bitLength()-2;o>0;--o){s=s.twice();var u=n.testBit(o),a=t.testBit(o);u!==a&&(s=s.add(u?this:i))}return s}function A(e,t,n){var r;e.bitLength()>n.bitLength()?r=e.bitLength()-1:r=n.bitLength()-1;var i=this
.curve.getInfinity(),s=this.add(t);while(r>=0)i=i.twice(),e.testBit(r)?n.testBit(r)?i=i.add(s):i=i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i}function O(e,t,n){this.p=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new w(this,null,null),this.reducer=new s(this.p)}function M(){return this.p}function _(){return this.a}function D(){return this.b}function P(e){return e===this?!0:this.p.equals(e.p)&&this.a.equals(e.a)&&this.b.equals(e.b)}function H(e){var t=e.getX().toBigInteger(),n=e.getY().toBigInteger(),r=this.a.toBigInteger(),i=this.b.toBigInteger(),s=this.p,o=n.pow(2).mod(s),u=t.pow(3).add(r.multiply(t)).add(i).mod(s);return o.equals(u)}function B(){return this.infinity}function j(e){return new c(this.p,e)}function F(e){this.reducer.reduce(e)}function I(e){switch(parseInt(e.substring(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),i=e.substr(t+2,t);return new w(this,this.fromBigInteger(new r(n,16)),this.fromBigInteger(new r(i,16)));default:return null}}function q(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),n=e.getY().toBigInteger().toString(16),r=this.getP().toString(16).length;r%2!==0&&r++;while(t.length<r)t="0"+t;while(n.length<r)n="0"+n;return"04"+t+n}var r=e("../../deps/forge").jsbn.BigInteger;s.prototype.convert=o,s.prototype.revert=u,s.prototype.reduce=a,s.prototype.mulTo=l,s.prototype.sqrTo=f,c.prototype.equals=h,c.prototype.toBigInteger=p,c.prototype.negate=d,c.prototype.add=v,c.prototype.subtract=m,c.prototype.multiply=g,c.prototype.square=y,c.prototype.divide=b,w.prototype.getX=E,w.prototype.getY=S,w.prototype.equals=x,w.prototype.isInfinity=T,w.prototype.negate=N,w.prototype.add=C,w.prototype.twice=k,w.prototype.multiply=L,w.prototype.multiplyTwo=A,O.prototype.getP=M,O.prototype.getA=_,O.prototype.getB=D,O.prototype.equals=P,O.prototype.contains=H,O.prototype.getInfinity=B,O.prototype.fromBigInteger=j,O.prototype.reduce=F,O.prototype.decodePointHex=I,O.prototype.encodePointHex=q,t.exports={ECFieldElementFp:c,ECPointFp:w,ECCurveFp:O}},{"../../deps/forge":85}],85:[function(e,t,n){"use strict";function i(e){e=e||{},this.name="",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}var r=e("node-forge/lib/forge");e("node-forge/lib/aes"),e("node-forge/lib/asn1"),e("node-forge/lib/cipher"),e("node-forge/lib/hmac"),e("node-forge/lib/mgf1"),e("node-forge/lib/pbkdf2"),e("node-forge/lib/pem"),e("node-forge/lib/pkcs1"),e("node-forge/lib/pkcs7"),e("node-forge/lib/pki"),e("node-forge/lib/prime"),e("node-forge/lib/prng"),e("node-forge/lib/pss"),e("node-forge/lib/random"),e("node-forge/lib/sha1"),e("node-forge/lib/sha256"),e("node-forge/lib/sha512"),e("node-forge/lib/util"),i.prototype.start=function(){},i.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;var r;for(r=0;r<this._blocks;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(r=0;r<this._blocks;++r)t.putInt32(this._outBlock[r])},i.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;var r;for(r=0;r<this._blocks;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(r=0;r<this._blocks;++r)t.putInt32(this._outBlock[r])},function(){var e="AES",t=i,n;n=function(){return new r.aes.Algorithm(e,t)},r.cipher.registerAlgorithm(e,n)}(),"function"==typeof setImmediate&&(r.util.setImmediate=r.util.nextTick=function(e){setImmediate(e)}),t.exports=r},{"node-forge/lib/aes":28,"node-forge/lib/asn1":29,"node-forge/lib/cipher":30,"node-forge/lib/forge":33,"node-forge/lib/hmac":34,"node-forge/lib/mgf1":38,"node-forge/lib/pbkdf2":41,"node-forge/lib/pem":42,"node-forge/lib/pkcs1":43,"node-forge/lib/pkcs7":45,"node-forge/lib/pki":47,"node-forge/lib/prime":48,"node-forge/lib/prng":49,"node-forge/lib/pss":50,"node-forge/lib/random":51,"node-forge/lib/sha1":54,"node-forge/lib/sha256":55,"node-forge/lib/sha512":56,"node-forge/lib/util":57}],86:[function(e,t,n){(function(n){"use strict";function u(e,t){var u,a;if(i.isKey(e))u=e,a=u.keystore;else{if(!i.isKeyStore(e))throw new TypeError("Keystore must be provided");a=e}t=s({},t),Object.defineProperty(this,"decrypt",{value:function(e,f){f=s({},t,f||{});var l=f.handlers||{},c=Object.keys(l);if(typeof e=="string")e=e.split("."),e={"protected":e[0],recipients:[{encrypted_key:e[1]}],iv:e[2],ciphertext:e[3],tag:e[4]};else if(!e||typeof e!="object")throw new Error("invalid input");"encrypted_key"in e&&(e.recipients=[{encrypted_key:e.encrypted_key}]);var h,p=e.recipients||[{}];h=Promise.resolve(p);var d,v;h=h.then(function(t){if(e.protected){v=r.decode(e.protected).toString("utf8"),v=JSON.parse(v);var n=v.crit;if(n){if(!Array.isArray(n))return Promise.reject(new Error("Invalid 'crit' header"));for(var o=0;n.length>o;o++)if(-1===c.indexOf(n[o]))return Promise.reject(new Error("Critical extension is not supported: "+n[o]))}d=v,v=Object.keys(v)}else d={},v=[];return d=s(e.unprotected||{},d),t=t.map(function(e){var t=Promise.resolve(),n=e.header||{};return n=s(n,d),e.header=n,e.protected=v,n.epk&&(t=t.then(function(){return i.asKey(n.epk)}),t=t.then(function(e){n.epk=e.toObject(!1)})),t.then(function(){return e})}),Promise.all(t)});var m,g,y;return h=h.then(function(e){var t={};return new Promise(function(n,s){var o=function(){var f=e.shift();if(!f){s(new Error("no key found"));return}var l=Promise.resolve(f);l=l.then(function(e){var t=y=e.encrypted_key||"";return t=r.decode(t),m=u||a.get({use:"enc",alg:e.header.alg,kid:e.header.kid}),m?m.unwrap(e.header.alg,t,e.header):Promise.reject()}),l=l.then(function(e){g={kty:"oct",k:r.encode(e)},g=i.asKey(g),t.key=m,t.header=f.header,t.protected=f.protected,n(t)}),l.catch(o)};o()})}),h=h.then(function(t){return t.iv=e.iv,t.tag=e.tag,t.ciphertext=e.ciphertext,t}),h=h.then(function(e){var t=[];return c.forEach(function(n){n=l[n];var r;"function"==typeof n?r=n(e):"object"==typeof n&&"function"==typeof n.prepare&&(r=n.prepare(e)),r&&t.push(Promise.resolve(r))}),Promise.all(t).then(function(){return e})}),h=h.then(function(e){return n.isBuffer(e.ciphertext)||(e.ciphertext=r.decode(e.ciphertext)),e}),h=h.then(function(t){var n=e.protected;"aad"in e&&null!=e.aad&&(n+="."+e.aad);var r={iv:t.iv,adata:n,tag:t.tag,kdata:y,epu:t.epu,epv:t.epv},i=t.ciphertext;return delete t.iv,delete t.tag,delete t.ciphertext,g.then(function(e){return e.decrypt(t.header.enc,i,r).then(function(e){return t.payload=t.plaintext=e,t})})}),h=h.then(function(e){return"DEF"===e.header.zip?new Promise(function(t,r){o.inflateRaw(new n(e.plaintext),function(n,i){n?r(n):(e.payload=e.plaintext=i,t(e))})}):e}),h=h.then(function(e){var t=[];return c.forEach(function(n){n=l[n];var r;"object"==typeof n&&"function"==typeof n.complete&&(r=n.complete(e)),r&&t.push(Promise.resolve(r))}),Promise.all(t).then(function(){return e})}),h}})}function a(e,t){var n=new u(e,t);return n}var r=e("../util/base64url"),i=e("../jwk"),s=e("../util/merge"),o=e("zlib");t.exports={decrypter:u,createDecrypt:a}}).call(this,e("buffer").Buffer)},{"../jwk":95,"../util/base64url":107,"../util/merge":110,buffer:9,zlib:8}],87:[function(e,t,n){"use strict";var r={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"};t.exports=r},{}],88:[function(e,t,n){(function(n){"use strict";function h(e,t,a){var c=!1,h=e.format||"general",p=!!e.protectAll,d=new n(0);Object.defineProperty(this,"zip",{get:function(){return t.zip||""},enumerable:!0}),Object.defineProperty(this,"compact",{get:function(){return"compact"===h},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return h},enumerable:!0}),Object.defineProperty(this,"protected",{get:function(){return i(e.protect)},enumerable:!0}),Object.defineProperty(this,"header",{get:function(){return i(t)},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(c)throw new Error("already final");return e!=null&&(e=s.asBuffer(e,t),d.length?d=n.concat([d,e],d.length+e.length):d=e),this}}),Object.defineProperty(this,"final",{value:function(v,m){if(c)return Promise.reject(new Error("already final"));this.update(v,m),c=!0;var g=Promise.resolve({}),y=t.enc,b;g=g.then(function(t){return e.cek&&(b=u.asKey(e.cek)),t}),g=g.then(function(n){var f=function(n,a){var f={};f=r(f,t),f=r(f,n.header);var l=n.key,c=f.alg,h,p;return f.alg.indexOf("ECDH-ES")===0?(h=l.keystore.temp(),n.epk?p=Promise.resolve(n.epk).then(function(e){n.header.epk=e.toJSON(!1,["kid"]),f.epk=e.toObject(!0,["kid"])}):p=h.generate("EC",l.get("crv")).then(function(e){n.header.epk=e.toJSON(!1,["kid"]),f.epk=e.toObject(!0,["kid"])})):p=Promise.resolve(),p=p.then(function(){var n,r;return"dir"===c&&a?(b=Promise.resolve(l),r=b.then(function(e){return y||(f.enc=t.enc=y=e.algorithms(u.MODE_ENCRYPT)[0]),{once:!0,direct:!0}})):(b||(y||(f.enc=t.enc=y=e.contentAlg),b=o(y)),r=b.then(function(e){return n=e.get("k",!0),l}),r=r.then(function(e){return e.wrap(c,n,f)})),r}),p=p.then(function(e){if(e.once&&!a)return Promise.reject(new Error("cannot use 'alg':'"+c+"' with multiple recipients"));var t={},o;return e.data&&(o=e.data,o=s.base64url.encode(o)),e.direct&&o?b=u.asKey({kty:"oct",k:o}):o&&(t.encrypted_key=o),n.header&&Object.keys(n.header).length&&(t.header=i(n.header||{})),e.header&&(t.header=r(t.header||{},e.header)),t}),p},l=Promise.all(a);return l=l.then(function(e){var t=1===e.length;return e=e.map(function(e){return f(e,t)}),Promise.all(e)}),l=l.then(function(e){return n.recipients=e.filter(function(e){return!!e}),n}),l});var w={};g=g.then(function(n){var o,u,a,f;return a=i(t),p&&n.recipients.length===1||"compact"===h?(o=r(n.recipients[0].header||{},a),u=Object.keys(o).length,a=undefined,f=0,delete n.recipients[0].header,Object.keys(n.recipients[0]).length===0&&n.recipients.splice(0,1)):(o={},u=0,f=Object.keys(a).length,e.protect.forEach(function(e){if(!(e in a))return;o[e]=a[e],u++,delete a[e],f--})),(!n.recipients||n.recipients.length===0)&&delete n.recipients,a&&f>0&&(w=r(w,a),n.unprotected=a),o&&u>0&&(w=r(w,o),o=JSON.stringify(o),n.protected=s.base64url.encode(o,"utf8")),n}),g=g.then(function(e){var t=d;return w.zip?w.zip==="DEF"?new Promise(function(r,i){f.deflateRaw(new n(t,"binary"),function(t,n){t?i(t):(e.plaintext=n,r(e))})}):Promise.reject(new Error("unsupported 'zip' mode")):(e.plaintext=t,e)}),g=g.then(function(t){w.adata=t.protected,"aad"in e&&e.aad!=null&&(w.adata+="."+e.aad,w.adata=new n(w.adata,"utf8"));var r=e.iv||s.randomBytes(l.NONCELENGTH[y]/8);"string"==typeof r&&(r=s.base64url.decode(r)),w.iv=r,"recipients"in t&&t.recipients.length===1&&(w.kdata=t.recipients[0].encrypted_key),"epu"in e&&e.epu!=null&&(w.epu=e.epu),"epv"in e&&e.epv!=null&&(w.epv=e.epv);var i=t.plaintext;return delete t.plaintext,b.then(function(n){var o=n.encrypt(y,i,w);return o=o.then(function(n){return t.iv=s.base64url.encode(r,"binary"),"aad"in e&&e.aad!=null&&(t.aad=e.aad),t.ciphertext=s.base64url.encode(n.data,"binary"),t.tag=s.base64url.encode(n.tag,"binary"),t}),o})});switch(h){case"compact":g=g.then(function(e){var t=new Array(5);return t[0]=e.protected,e.recipients&&e.recipients[0]&&(t[1]=e.recipients[0].encrypted_key),t[2]=e.iv,t[3]=e.ciphertext,t[4]=e.tag,t=t.join("."),t});break;case"flattened":g=g.then(function(e){var t={},n=e.recipients&&e.recipients[0];return e.protected&&(t.protected=e.protected),e.unprotected&&(t.unprotected=e.unprotected),["header","encrypted_key"].forEach(function(e){if(!n)return;if(!(e in n))return;t[e]=n[e]}),e.aad&&(t.aad=e.aad),t.iv=e.iv,t.ciphertext=e.ciphertext,t.tag=e.tag,t})}return g}})}function p(e,t){var n=e,o=1,f=t;if(arguments.length===0)throw new Error("at least one recipient must be provided");arguments.length===1?(f=e,o=0,n={}):u.isKey(e)||e&&"kty"in e||e&&"key"in e&&(u.isKey(e.key)||"kty"in e.key)?(f=e,o=0,n={}):n=i(e),Array.isArray(f)||(f=a(arguments,o)),n=r(i(c),n);var l=i(n.fields||{});n.zip&&(l.zip=typeof n.zip=="boolean"?n.zip?"DEF":!1:n.zip),n.format=(n.compact?"compact":n.format)||"general";switch(n.format){case"compact":if("aad"in e)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(f.length>1)throw new Error("too many recipients for compact serialization")}var p=!1;if("compact"===n.format||"*"===n.protect)p=!0,n.protect=Object.keys(l).concat("enc");else if(typeof n.protect=="string")n.protect=[n.protect];else if(Array.isArray(n.protect))n.protect=n.protect.concat();else{if(!!n.protect)throw new Error("protect must be a list of fields");n.protect=[]}if(p&&1<f.length)throw new Error("too many recipients to protect all header parameters");f=f.map(function(e,t){var n;return e&&"kty"in e?(n=u.asKey(e),n=n.then(function(e){return{key:e}})):e?(n=u.asKey(e.key),n=n.then(function(t){return{header:e.header,reference:e.reference,key:t}})):n=Promise.reject(new Error("missing key for recipient "+t)),e.epk&&(n=n.then(function(t){return u.asKey(e.epk).then(function(e){return t.epk=e,t})})),n=n.then(function(e){var t=e.key,n=e.header||{};e.header=n;var i={};i=r(i,l),i=r(i,e.header),i.alg||(i.alg=t.algorithms(u.MODE_WRAP)[0]),n.alg=i.alg;var s=e.reference;delete e.reference,undefined===s?(s=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in n}),s=s?null:"kid"):"boolean"==typeof s&&(s=s?"kid":null);var o;if(s){o=t.toJSON();if("jwk"===s){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));n.jwk=o}else s in o&&(n[s]=o[s])}return e=Object.freeze(e),e}),n});var d={aad:"aad"in n?s.base64url.encode(n.aad||""):null,contentAlg:n.contentAlg,format:n.format,protect:n.protect,cek:n.cek,iv:n.iv,protectAll:p},v=new h(d,l,f);return v}var r=e("lodash.assign"),i=e("lodash.clone"),s=e("../util"),o=e("./helpers").generateCEK,u=e("../jwk"),a=e("./helpers").slice,f=e("zlib"),l=e("../algorithms/constants"),c=e("./defaults");t.exports={encrypter:h,createEncrypt:p}}).call(this,e("buffer").Buffer)},{"../algorithms/constants":63,"../jwk":95,"../util":109,"./defaults":87,"./helpers":89,buffer:9,"lodash.assign":17,"lodash.clone":18,zlib:8}],89:[function(e,t,n){"use strict";var r=e("../algorithms/constants"),i=e("../jwk");t.exports={slice:function(e,t){return Array.prototype.slice.call(e,t||0)},generateCEK:function(e){var t=i.createKeyStore(),n=r.KEYLENGTH[e];if(n)return t.generate("oct",n);throw new Error("unsupported encryption algorithm")}}},{"../algorithms/constants":63,"../jwk":95}],90:[function(e,t,n){"use strict";var r={createEncrypt:e("./encrypt").createEncrypt,createDecrypt:e("./decrypt").createDecrypt};t.exports=r},{"./decrypt":86,"./encrypt":88}],91:[function(e,t,n){(function(n){"use strict";var r=e("lodash.assign"),i=e("lodash.clone"),s=e("lodash.flatten"),o=e("lodash.intersection"),u=e("../util/merge"),a=e("lodash.omit"),f=e("lodash.pick"),l=e("lodash.uniq"),c=e("uuid"),h=e("../algorithms"),p=e("./constants.js"),d=e("./helpers.js"),v=e("../util"),m=function(e,t,m,g){if(!e)throw new Error("kty cannot be null");if(!t)throw new Error("keystore cannot be null");if(!m)throw new Error("props cannot be null");"string"==typeof m&&(m=JSON.parse(m));if(!g)throw new Error("cfg cannot be null");var y=[],b={},w={},E,S;m=i(m),E=r({},m[d.INTERNALS.THUMBPRINT_KEY]||{}),delete m[d.INTERNALS.THUMBPRINT_KEY],Object.keys(E).forEach(function(e){var t=E[e];S||(S=t,n.isBuffer(S)&&(S=v.base64url.encode(S))),n.isBuffer(t)||(t=v.base64url.decode(t),E[e]=t)}),m.kty=e,m.kid=m.kid||S||c();var x=Object.keys(d.COMMON_PROPS).map(function(e){return d.COMMON_PROPS[e].name});w.base=f(m,x),y=y.concat(Object.keys(w.base)),w.public=i(m),b.public=g.publicKey(w.public),b.public&&(y=y.concat(Object.keys(w.public))),w.private=i(m),b.private=g.privateKey(w.private),b.private&&(y=y.concat(Object.keys(w.private))),w.extra=a(m,y);var T;b.public&&"length"in b.public?T=b.public.length:b.private&&"length"in b.private?T=b.private.length:T=NaN,Object.defineProperty(this,"keystore",{value:t,enumerable:!0}),Object.defineProperty(this,"length",{value:T,enumerable:!0}),Object.defineProperty(this,"kty",{value:e,enumerable:!0}),Object.defineProperty(this,"kid",{value:w.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:w.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:w.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(e){e=(e||d.INTERNALS.THUMBPRINT_HASH).toUpperCase();if(E[e])return Promise.resolve(E[e]);var t=d.thumbprint(g,w,e);return t=t.then(function(t){return t&&(E[e]=t),t}),t}}),Object.defineProperty(this,"algorithms",{value:function(t){var n=[];if(!this.use||this.use==="sig")(!t||p.MODE_SIGN===t)&&n.push(p.MODE_SIGN),(!t||p.MODE_VERIFY===t)&&n.push(p.MODE_VERIFY);if(!this.use||this.use==="enc")(!t||p.MODE_ENCRYPT===t)&&n.push(p.MODE_ENCRYPT),(!t||p.MODE_DECRYPT===t)&&n.push(p.MODE_DECRYPT),(!t||p.MODE_WRAP===t)&&n.push(p.MODE_WRAP),(!t||p.MODE_UNWRAP===t)&&n.push(p.MODE_UNWRAP);var r=this,i=n.map(function(e){return g.algorithms.call(r,b,e)});i=s(i),i=l(i);if(this.alg){var u;"oct"===e?u=[this.alg,"dir"]:u=[this.alg],i=o(i,u)}return i}}),Object.defineProperty(this,"supports",{value:function(e,t){return this.algorithms(t).indexOf(e)!==-1}}),Object.defineProperty(this,"has",{value:function(e,t){var n=!1;return n=n||!!(w.base&&e in w.base),n=n||!!(b.public&&e in b.public),n=n||!!(w.extra&&e in w.extra),n=n||!!(t&&b.private&&e in b.private),n}}),Object.defineProperty(this,"get",{value:function(e,t){var n;return w.base&&e in w.base?n=w.base:b.public&&e in b.public?n=b.public:w.extra&&e in w.extra?n=w.extra:t&&b.private&&e in b.private&&(n=b.private),n&&n[e]||null}}),Object.defineProperty(this,"toJSON",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var n={};return n=u(n,w.base,w.public,"boolean"==typeof e&&e?w.private:{},w.extra),n=a(n,t||[]),n}}),Object.defineProperty(this,"toPEM",{value:function(e){e===null&&(e=!1);if(!g.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var t=e?b.private:b.public;if(!t)throw new Error("Invalid key");return g.convertToPEM.call(this,t,e)}}),Object.defineProperty(this,"toObject",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var n={};return n=u(n,w.base,b.public,"boolean"==typeof e&&e?b.private:{},w.extra),n=a(n,(t||[]).concat("length")),n}}),Object.defineProperty(this,"sign",{value:function(e,t,n){if(this.algorithms("sign").indexOf(e)===-1)return Promise.reject(new Error("unsupported algorithm"));var r=g.signKey.call(this,e,b);return r?(n=n?i(n):{},g.signProps&&(n=u(n,g.signProps.call(this,e,n))),h.sign(e,r,t,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(e,t,n,r){if(this.algorithms("verify").indexOf(e)===-1)return Promise.reject(new Error("unsupported algorithm"));var s=g.verifyKey.call(this,e,b);return s?(r=r?i(r):{},g.verifyProps&&(r=u(r,g.verifyProps.call(this,e,r))),h.verify(e,s,t,n,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(e,t,n){if(this.algorithms("encrypt").indexOf(e)===-1)return Promise.reject(new Error("unsupported algorithm"));var r=g.encryptKey.call(this,e,b);return r?(n=n?i(n):{},g.encryptProps&&(n=u(n,g.encryptProps.call(this,e,n))),h.encrypt(e,r,t,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(e,t,n){if(this.algorithms("decrypt").indexOf(e)===-1)return Promise.reject(new Error("unsupported algorithm"));var r=g.decryptKey.call(this,e,b);return r?(n=n?i(n):{},g.decryptProps&&(n=u(n,g.decryptProps.call(this,e,n))),h.decrypt(e,r,t,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(e,t,n){if(this.algorithms("wrap").indexOf(e)===-1)return Promise.reject(new Error("unsupported algorithm"));var r=g.wrapKey.call(this,e,b);return r?(n=n?i(n):{},g.wrapProps&&(n=u(n,g.wrapProps.call(this,e,n))),h.encrypt(e,r,t,n)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(e,t,n){if(this.algorithms("unwrap").indexOf(e)===-1)return Promise.reject(new Error("unsupported algorithm"));var r=g.unwrapKey.call(this,e,b);return r?(n=n?i(n):{},g.unwrapProps&&(n=u(n,g.unwrapProps.call(this,e,n))),h.decrypt(e,r,t,n)):Promise.reject(new Error("improper key"))}})};t.exports=m}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":15,"../algorithms":71,"../util":109,"../util/merge":110,"./constants.js":92,"./helpers.js":94,"lodash.assign":17,"lodash.clone":18,"lodash.flatten":20,"lodash.intersection":21,"lodash.omit":23,"lodash.pick":25,"lodash.uniq":26,uuid:141}],92:[function(e,t,n){"use strict";t.exports={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"}},{}],93:[function(e,t,n){(function(n){"use strict";function l(e){switch(e){case"1.2.840.10045.3.1.7":return"P-256";case"1.3.132.0.34":return"P-384";case"1.3.132.0.35":return"P-521";default:return null}}function c(e){switch(e){case"P-256":return"1.2.840.10045.3.1.7";case"P-384":return"1.3.132.0.34";case"P-521":return"1.3.132.0.35";default:return null}}var r=e("../algorithms/ec-util.js"),i=e("../deps/forge"),s=e("../deps/ecc"),o={BaseKey:e("./basekey.js"),helpers:e("./helpers.js")},u=["ES256","ES384","ES512"],a=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"],f="1.2.840.10045.2.1",h={publicKey:function(e){var t=o.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),n=o.helpers.unpackProps(e,t);return n&&n.crv&&n.x&&n.y?n.length=r.curveSize(n.crv):(delete n.crv,delete n.x,delete n.y),n},privateKey:function(e){var t=o.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),n=o.helpers.unpackProps(e,t);return n&&n.crv&&n.x&&n.y&&n.d?n.length=r.curveSize(n.crv):n=undefined,n},thumbprint:function(e){e.public&&(e=e.public);var t={crv:e.crv,kty:"EC",x:e.x,y:e.y};return t},algorithms:function(e,t){var n=e.public&&e.public.length||e.private&&e.private.length||0;n===521&&(n=512);switch(t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&a||[];case"unwrap":return e.private&&a||[];case"sign":if(!e.private)return[];return u.filter(function(e){return e==="ES"+n});case"verify":if(!e.public)return[];return u.filter(function(e){return e==="ES"+n})}},encryptKey:function(e,t){return t.public},decryptKey:function(e,t){return t.private},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){var r=e.crv;r=c(r),r=i.asn1.oidToDer(r);var s,o,u;t?(s="EC PRIVATE KEY",o=n.concat([new n([0,4]),e.x,e.y]).toString("binary"),e=e.d.toString("binary"),u=i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.SEQUENCE,!0,[i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.INTEGER,!1,""),i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.OCTETSTRING,!1,e),i.asn1.create(i.asn1.Class.CONTEXT_SPECIFIC,0,!0,[i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.OID,!1,r.bytes())]),i.asn1.create(i.asn1.Class.CONTEXT_SPECIFIC,1,!0,[i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.BITSTRING,!1,o)])])):(s="PUBLIC KEY",e=n.concat([new n([0,4]),e.x,e.y]).toString("binary"),u=i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.SEQUENCE,!0,[i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.SEQUENCE,!0,[i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.OID,!1,i.asn1.oidToDer(f).bytes()),i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.OID,!1,r.bytes())]),i.asn1.create(i.asn1.Class.UNIVERSAL,i.asn1.Type.BITSTRING,!1,e)])),u=i.asn1.toDer(u).bytes();var a=i.pem.encode({type:s,body:u});return a}},p={oid:f,privateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:i.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},d={kty:"EC",validators:p,prepare:function(e){var t=h,n=Promise.resolve(e);return n=n.then(function(e){return o.helpers.thumbprint(t,e)}),n=n.then(function(n){var r={};return r[o.helpers.INTERNALS.THUMBPRINT_HASH]=n,e[o.helpers.INTERNALS.THUMBPRINT_KEY]=r,t}),n},generate:function(e){var t=s.generateKeyPair(e),n={crv:e,x:t.public.x,y:t.public.y,d:t.private.d};return Promise.resolve(n)},"import":function(e){if(p.oid!==e.keyOid)return null;var t;e.keyParams&&i.asn1.Type.OID===e.keyParams.type?(t=i.asn1.derToOid(e.keyParams.value),t=l(t)):e.crv&&(t=i.asn1.derToOid(e.crv),t=l(t));if(!t)return null;if(!e.parsed){var r={},s=[];if("private"===e.type){"string"==typeof e.keyValue?e.keyValue=i.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]);if(!i.asn1.validate(e.keyValue,p.embeddedPrivateKey,r,s))return null}else r.point=e.keyValue;e=r}var o={kty:"EC",crv:t};e.d&&(o.d=new n(e.d,"binary"));if(e.point){var u=new n(e.point,"binary");if(4!==u.readUInt16BE(0))return null;u=u.slice(2);var a=u.length/2;o.x=u.slice(0,a),o.y=u.slice(a)}return o}};t.exports=Object.freeze({config:h,factory:d}),function(e){e.register(d)}(e("./keystore").registry)}).call(this,e("buffer").Buffer)},{"../algorithms/ec-util.js":65,"../deps/ecc":83,"../deps/forge":85,"./basekey.js":91,"./helpers.js":94,"./keystore":96,buffer:9}],94:[function(e,t,n){(function(n){"use strict";var r=e("lodash.clone"),i=e("../util"),s=e("../deps/forge"),o=e("../algorithms"),u={name:"PrivateKeyInfo",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},a={name:"SubjectPublicKeyInfo",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},f={name:"Certificate",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},a,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:s.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:s.asn1.Class.UNIVERSAL,type:s.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},l={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"};t.exports={validators:{privateKey:u,publicKey:a,certificate:f},thumbprint:function(e,t,r){if("function"!=typeof e.thumbprint)return Promise.reject(new Error("thumbprint not supported"));r=(r||l.THUMBPRINT_HASH).toUpperCase();var s=e.thumbprint(t),u=Object.keys(s).sort().map(function(e){var t=s[e];return n.isBuffer(t)&&(t=i.base64url.encode(t)),JSON.stringify(e)+":"+JSON.stringify(t)});u="{"+u.join(",")+"}";try{return o.digest(r,new n(u,"utf8"))}catch(a){return Promise.reject(a)}},unpackProps:function(e,t){var s;t.forEach(function(t){if(!(t.name in e))return;s=s||{};var o=e[t.name];switch(t.type){case"binary":n.isBuffer(o)?(o=o,e[t.name]=i.base64url.encode(o)):o=i.base64url.decode(o);break;case"string":case"number":case"boolean":o=o;break;case"array":o=[].concat(o);break;case"object":o=r(o);break;default:o=o}s[t.name]=o});var o=s||{};return Object.keys(e).forEach(function(t){if(t in o)return;delete e[t]}),s},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:l}}).call(this,e("buffer").Buffer)},{"../algorithms":71,"../deps/forge":85,"../util":109,buffer:9,"lodash.clone":18}],95:[function(e,t,n){"use strict";var r=e("./keystore.js");Object.keys(r.KeyStore).forEach(function(e){n[e]=r.KeyStore
[e]});var i=e("./constants.js");Object.keys(i).forEach(function(e){n[e]=i[e]}),e("./octkey.js"),e("./rsakey.js"),e("./eckey.js")},{"./constants.js":92,"./eckey.js":93,"./keystore.js":96,"./octkey.js":97,"./rsakey.js":98}],96:[function(e,t,n){(function(n){"use strict";function l(e){return["certIssuer","certSubject"].forEach(function(t){var n=s.pki.RDNAttributesAsArray(e[t]),r=e[t]={};n.forEach(function(e){r[e.name||e.type]=e.value})}),e}function c(e){var t={},n=s.pem.decode(e),r=n.some(function(e){switch(e.type){case"CERTIFICATE":t.form="pkix";break;case"PUBLIC KEY":t.form="spki";break;case"PRIVATE KEY":t.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":t.form="private";break;default:return!1}return t.body=e.body,!0});if(!r)throw new Error("supported PEM type not found");return t}function h(e,t){var r={},i=[],a,c=t.form,h=t.body,p=null;t=s.asn1.fromDer(h);switch(c){case"private":e.all().some(function(e){if(a)return!1;if(!e.validators)return!1;var n=e.validators.oid,o=e.validators.privateKey;return o?(r={},i=[],a=s.asn1.validate(t,o,r,i),a&&(r.keyOid=s.asn1.oidToDer(n),r.parsed=!0),a):!1}),r.type="private";break;case"pkcs8":a=s.asn1.validate(t,u.helpers.validators.privateKey,r,i),r.type="private";break;case"public":case"spki":a=s.asn1.validate(t,u.helpers.validators.publicKey,r,i),r.type="public";break;case"pkix":case"x509":a=s.asn1.validate(t,u.helpers.validators.certificate,r,i);if(a){r=l(r);var d=s.md.sha1.create();d.update(h),p=o.base64url.encode(new n(d.digest().toHex(),"hex"))}r.type="public"}return a?(r.keyOid&&(r.keyOid=s.asn1.derToOid(r.keyOid)),a=null,f.all().forEach(function(e){if(a)return;if(!e)return;if("function"!=typeof e.import)return;a=e.import(r)}),a&&r.certSubject&&r.certSubject.commonName&&(a.kid=r.certSubject.commonName),a&&p&&(a.x5t=p),a):null}var r=e("lodash.clone"),i=e("../util/merge"),s=e("../deps/forge"),o=e("../util"),u={BaseKey:e("./basekey.js"),helpers:e("./helpers.js")},a=function(){var e={};Object.defineProperty(this,"register",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var n=t.kty;return e[n]=t,this}}),Object.defineProperty(this,"unregister",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var n=t.kty;return t===e[n]&&delete e[n],this}}),Object.defineProperty(this,"get",{value:function(t){return e[t||""]||undefined}}),Object.defineProperty(this,"all",{value:function(){return Object.keys(e).map(function(t){return e[t]})}})},f=new a,p=function(e,t){var s={};Object.defineProperty(this,"generate",{value:function(t,n,s){var o=e.get(t);if(!o)return Promise.reject(new Error("unsupported key type"));s=r(s||{}),s.kty=t;var u=this,a=o.generate(n);return a.then(function(e){return e=i(s,e,{kty:t}),u.add(e)})}}),Object.defineProperty(this,"add",{value:function(t,r,i){i=i||{};var o;if(n.isBuffer(t)||typeof t=="string"){r=(r||"json").toLowerCase();if("json"===r)t=JSON.parse(t.toString("utf8"));else try{"pem"===r?o=c(t):o={body:t.toString("binary"),form:r},t=h(e,o);if(!t)throw new Error("no importer for key");Object.keys(i).forEach(function(e){t[e]=i[e]})}catch(a){return Promise.reject(a)}}else p.isKey(t)&&(t=t.toJSON(!0));var f=e.get(t.kty);if(!f)return Promise.reject(new Error("unsupported key type"));var l=this,d=f.prepare(t);return d.then(function(e){return new u.BaseKey(t.kty,l,t,e)}).then(function(e){var t=e.kid||"",n=s[t]=s[t]||[];return n.push(e),e})}}),Object.defineProperty(this,"remove",{value:function(e){if(!e)return;var t=s[e.kid];if(!t)return;var n=t.indexOf(e);if(n===-1)return;t.splice(n,1),t.length||delete s[e.kid]}}),Object.defineProperty(this,"all",{value:function(e,n){e=e||{},e.kid!==undefined&&e.kid!==null&&typeof e.kid!="string"&&(e.kid=String(e.kid));var r=[],i=function(t){return e.kty&&t.kty&&e.kty!==t.kty?!1:e.use&&t.use&&e.use!==t.use?!1:e.alg?e.alg!=="dir"&&t.alg&&e.alg!==t.alg?!1:t.supports(e.alg):!0};return Object.keys(s).forEach(function(t){if(e.kid&&e.kid!==t)return;var n=s[t].filter(i);n.length&&(r=r.concat(n))}),!n&&t&&(r=r.concat(t.all(e))),r}}),Object.defineProperty(this,"get",{value:function(e,n,r){typeof e=="boolean"?(r=e,n=e=null):typeof e=="object"&&(r=n,n=e,e=null),n=n||{},e&&(n.kid=e),n.kid!==undefined&&n.kid!==null&&typeof n.kid!="string"&&(n.kid=String(n.kid));var i=this.all(n,!0);return!i.length&&t&&!r&&(i=t.get(n,r)),i[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new p(e,this)}}),Object.defineProperty(this,"toJSON",{value:function(e){var t=[];return Object.keys(s).forEach(function(n){var r=s[n].map(function(t){return t.toJSON(e)});t=t.concat(r)}),{keys:t}}})};p.isKeyStore=function(e){return e?"object"!=typeof e?!1:"function"!=typeof e.get||"function"!=typeof e.all||"function"!=typeof e.generate||"function"!=typeof e.add||"function"!=typeof e.remove?!1:!0:!1},p.createKeyStore=function(){return new p(f)},p.asKeyStore=function(e){if(p.isKeyStore(e))return Promise.resolve(e);var t=p.createKeyStore(),n;typeof e=="string"&&(e=JSON.parse(e));if(Array.isArray(e))n=e;else{if(!("keys"in e))return Promise.reject(new Error("invalid keystore"));n=e.keys}n=n.map(function(e){return t.add(e)});var r=Promise.all(n);return r=r.then(function(){return t}),r},p.isKey=function(e){return e?"object"!=typeof e?!1:p.isKeyStore(e.keystore)?"string"!=typeof e.kty||"number"!=typeof e.length||"function"!=typeof e.algorithms||"function"!=typeof e.supports||"function"!=typeof e.encrypt||"function"!=typeof e.decrypt||"function"!=typeof e.wrap||"function"!=typeof e.unwrap||"function"!=typeof e.sign||"function"!=typeof e.verify?!1:!0:!1:!1},p.asKey=function(e,t,n){if(p.isKey(e))return Promise.resolve(e);var r=p.createKeyStore();return e=r.add(e,t,n),e},t.exports={KeyRegistry:a,KeyStore:p,registry:f}}).call(this,e("buffer").Buffer)},{"../deps/forge":85,"../util":109,"../util/merge":110,"./basekey.js":91,"./helpers.js":94,buffer:9,"lodash.clone":18}],97:[function(e,t,n){(function(n){"use strict";function a(e,t){return"iv"in t&&(t.iv=n.isBuffer(t.iv)?t.iv:r.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=n.isBuffer(t.adata)?t.adata:new n(t.adata||"","utf8")),"mac"in t&&(t.mac=n.isBuffer(t.mac)?t.mac:r.base64url.decode(t.mac||"")),"tag"in t&&(t.tag=n.isBuffer(t.tag)?t.tag:r.base64url.decode(t.tag||"")),t}function f(e,t){return"iv"in t&&(t.iv=n.isBuffer(t.iv)?t.iv:r.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=n.isBuffer(t.adata)?t.adata:new n(t.adata||"","utf8")),t}var r=e("../util"),i={BaseKey:e("./basekey.js"),helpers:e("./helpers.js")},s=["HS256","HS384","HS512"],o=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],u=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"],l={publicKey:function(e){var t=i.helpers.COMMON_PROPS.concat([]),n;return n=i.helpers.unpackProps(e,t),n},privateKey:function(e){var t=i.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]),n;return n=i.helpers.unpackProps(e,t),n&&n.k?n.length=n.k.length*8:n=undefined,n},thumbprint:function(e){e.private&&(e=e.private);var t;return t={k:e.k||"",kty:"oct"},t},algorithms:function(e,t){var n=e.private&&e.private.k.length*8,r=[256,384,512];if(!n)return[];switch(t){case"encrypt":case"decrypt":return o.filter(function(e){return e==="A"+n/2+"CBC-HS"+n||e==="A"+n/2+"CBC+HS"+n||e==="A"+n+"GCM"});case"sign":case"verify":return s.filter(function(e){var t=!1;return r.forEach(function(r){if(r>n)return;t|=e==="HS"+r}),t});case"wrap":case"unwrap":return u.filter(function(e){return e==="A"+n+"KW"||e==="A"+n+"GCMKW"||e.indexOf("PBES2-")===0||e==="dir"})}return[]},encryptKey:function(e,t){return t.private&&t.private.k},encryptProps:f,decryptKey:function(e,t){return t.private&&t.private.k},decryptProps:a,wrapKey:function(e,t){return t.private&&t.private.k},wrapProps:f,unwrapKey:function(e,t){return t.private&&t.private.k},unwrapProps:a,signKey:function(e,t){return t.private&&t.private.k},verifyKey:function(e,t){return t.private&&t.private.k}},c={kty:"oct",prepare:function(e){var t=l,n=Promise.resolve(e);return n=n.then(function(e){return i.helpers.thumbprint(t,e)}),n=n.then(function(n){var r={};return r[i.helpers.INTERNALS.THUMBPRINT_HASH]=n,e[i.helpers.INTERNALS.THUMBPRINT_KEY]=r,t}),n},generate:function(e){var t=r.randomBytes(e/8);return Promise.resolve({k:t})}};t.exports=Object.freeze({config:l,factory:c}),function(e){e.register(c)}(e("./keystore").registry)}).call(this,e("buffer").Buffer)},{"../util":109,"./basekey.js":91,"./helpers.js":94,"./keystore":96,buffer:9}],98:[function(e,t,n){(function(n){"use strict";function l(e){return e=e.toString(16),e.length%2&&(e="0"+e),new n(e,"hex")}var r=e("../deps/forge.js"),i=e("../algorithms/rsa-util"),s=e("../algorithms/helpers").nodeCrypto,o={BaseKey:e("./basekey.js"),helpers:e("./helpers.js")},u=["RS256","RS384","RS512","PS256","PS384","PS512"],a=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],f={publicKey:function(e){var t=o.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]),n;return n=o.helpers.unpackProps(e,t),n&&n.n&&n.e?n.length=n.n.length*8:(delete n.e,delete n.n),n},privateKey:function(e){var t=o.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]),n;return n=o.helpers.unpackProps(e,t),n&&n.d&&n.n&&n.e&&n.p&&n.q&&n.dp&&n.dq&&n.qi?n.length=n.d.length*8:n=undefined,n},thumbprint:function(e){e.public&&(e=e.public);var t={e:e.e,kty:"RSA",n:e.n};return t},algorithms:function(e,t){switch(t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&a.slice()||[];case"unwrap":return e.private&&a.slice()||[];case"sign":return e.private&&u.slice()||[];case"verify":return e.public&&u.slice()||[]}return[]},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){var n=i.convertToForge(e,!t);return t?r.pki.privateKeyToPem(n):r.pki.publicKeyToPem(n)}},c={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:r.asn1.Class.UNIVERSAL,type:r.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},h={kty:"RSA",validators:c,prepare:function(e){var t=f,n=Promise.resolve(e);return n=n.then(function(e){return o.helpers.thumbprint(t,e)}),n=n.then(function(n){var r={};return r[o.helpers.INTERNALS.THUMBPRINT_HASH]=n,e[o.helpers.INTERNALS.THUMBPRINT_KEY]=r,t}),n},generate:function(e){var t;if(s)t=new Promise(function(t,n){r.pki.rsa.generateKeyPair({bits:e,e:65537},function(e,r){if(e)return n(e);t(r.privateKey)})});else{var n=r.pki.rsa.generateKeyPair({bits:e,e:65537});t=Promise.resolve(n.privateKey)}return t.then(function(e){var t={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach(function(n){var r,i;"string"==typeof n?r=i=n:(r=n.incoming,i=n.outgoing),r in e&&(t[i]=l(e[r]))}),t})},"import":function(e){if(c.oid!==e.keyOid)return null;if(!e.parsed){"string"==typeof e.keyValue?e.keyValue=r.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]);var t="private"===e.type?c.privateKey:c.publicKey,i={},s=[];if(!r.asn1.validate(e.keyValue,t,i,s))return null;e=i}var o={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach(function(t){if(!(t in e))return;var r=new n(e[t],"binary");0===r[0]&&(r=r.slice(1)),o[t]=r}),o}};t.exports=Object.freeze({config:f,factory:h}),function(e){e.register(h)}(e("./keystore").registry)}).call(this,e("buffer").Buffer)},{"../algorithms/helpers":68,"../algorithms/rsa-util":73,"../deps/forge.js":85,"./basekey.js":91,"./helpers.js":94,"./keystore":96,buffer:9}],99:[function(e,t,n){"use strict";var r={compact:!1,protect:"*"};t.exports=r},{}],100:[function(e,t,n){"use strict";t.exports={slice:function(e,t){return Array.prototype.slice.call(e,t||0)}}},{}],101:[function(e,t,n){"use strict";var r={createSign:e("./sign").createSign,createVerify:e("./verify").createVerify};t.exports=r},{"./sign":102,"./verify":103}],102:[function(e,t,n){(function(n){"use strict";function c(e,t){var n=e,o=1,c=t;if(arguments.length===0)throw new Error("at least one signatory must be provided");arguments.length===1?(c=e,o=0,n={}):u.isKey(e)||e&&"kty"in e||e&&"key"in e&&(u.isKey(e.key)||"kty"in e.key)?(c=e,o=0,n={}):n=r(e),Array.isArray(c)||(c=a(arguments,o)),n=i(r(f),n);var h=n.fields||{},p=n.format;p||(p=n.compact?"compact":"general");if(("compact"===p||"flattened"===p)&&1<c.length)throw new Error("too many signatories for compact or flattened JSON serialization");var d="*"===n.protect;n.compact&&(d=!0),c=c.map(function(e,t){var n;return e&&"kty"in e?(n=u.asKey(e),n=n.then(function(e){return{key:e}})):e?(n=u.asKey(e.key),n=n.then(function(t){return{header:e.header,reference:e.reference,protect:e.protect,key:t}})):n=Promise.reject(new Error("missing key for signatory "+t)),n=n.then(function(e){var t=e.key,n=e.header||{};n=i(i({},h),n),e.header=n,n.alg||(n.alg=t.algorithms(u.MODE_SIGN)[0]||"");var r=e.reference;delete e.reference,undefined===r?(r=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in n}),r=r?null:"kid"):"boolean"==typeof r&&(r=r?"kid":null);var o;if(r){o=t.toJSON();if("jwk"===r){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));n.jwk=o}else r in o&&(n[r]=o[r])}var a=e.protect;if(d||"*"===a)a=Object.keys(n);else if("string"===a)a=[a];else if(Array.isArray(a))a=a.concat();else{if(!!a)return Promise.reject(new Error("protect must be a list of fields"));a=[]}return a=s(a),e.protected=a,e=Object.freeze(e),e}),n});var v={format:p};return new l(v,c)}var r=e("lodash.clone"),i=e("../util/merge"),s=e("lodash.uniq"),o=e("../util"),u=e("../jwk"),a=e("./helpers").slice,f=e("./defaults"),l=function(e,t){var i=!1,s=e.format||"general",u=new n(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===s},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return s},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(i)throw new Error("already final");return e!=null&&(e=o.asBuffer(e,t),u.length?u=n.concat([u,e],u.length+e.length):u=e),this}}),Object.defineProperty(this,"final",{value:function(e,a){if(i)return Promise.reject(new Error("already final"));this.update(e,a),i=!0;var f;f=Promise.all(t),f=f.then(function(e){return u=o.base64url.encode(u),e=e.map(function(e){var t={},i=0,s=r(e.header),a=Object.keys(s).length;e.protected.forEach(function(e){if(!(e in s))return;t[e]=s[e],i++,delete s[e],a--}),i>0?(t=JSON.stringify(t),t=o.base64url.encode(t)):t="";var f=new n(t+"."+u,"ascii");return e=e.key.sign(e.header.alg,f,e.header),e=e.then(function(e){var n={};return 0<i&&(n.protected=t),0<a&&(n.header=s),n.signature=o.base64url.encode(e.mac),n}),e}),e=[Promise.resolve(u)].concat(e),Promise.all(e)}),f=f.then(function(e){var t=e[0];return{payload:t,signatures:e.slice(1)}});switch(s){case"compact":f=f.then(function(e){var t=[e.signatures[0].protected,e.payload,e.signatures[0].signature];return t=t.join("."),t});break;case"flattened":f=f.then(function(e){var t={};t.payload=e.payload;var n=e.signatures[0];return n.protected&&(t.protected=n.protected),n.header&&(t.header=n.header),t.signature=n.signature,t})}return f}})};t.exports={signer:l,createSign:c}}).call(this,e("buffer").Buffer)},{"../jwk":95,"../util":109,"../util/merge":110,"./defaults":99,"./helpers":100,buffer:9,"lodash.clone":18,"lodash.uniq":26}],103:[function(e,t,n){(function(n){"use strict";function a(e){var t=new u(e);return t}var r=e("lodash.clone"),i=e("../util/merge"),s=e("../util/base64url"),o=e("../jwk"),u=function(e,t){var u,a;o.isKey(e)?(u=e,a=u.keystore):o.isKeyStore(e)?a=e:a=o.createKeyStore(),t=i({},t),Object.defineProperty(this,"defaultKey",{value:u||undefined,enumerable:!0}),Object.defineProperty(this,"keystore",{value:a,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(e,f){f=i({},t,f||{});var l=f.handlers||{},c=Object.keys(l);if("string"==typeof e)e=e.split("."),e={payload:e[1],signatures:[{"protected":e[0],signature:e[2]}]};else if(!e||"object"===e)throw new Error("invalid input");e.signature&&(e.signatures=[{"protected":e.protected||undefined,header:e.header||undefined,signature:e.signature}]);var h=e.signatures||[{}];h=h.map(function(e){var t=r(e.header||{}),n=e.protected?JSON.parse(s.decode(e.protected,"utf8")):{};t=i(t,n);var o=s.decode(e.signature),u=n.crit;if(u){if(!Array.isArray(u))return Promise.reject(new Error("Invalid 'crit' header"));for(var a=0;u.length>a;a++)if(-1===c.indexOf(u[a]))return Promise.reject(new Error("Critical extension is not supported: "+u[a]))}return n=Object.keys(n),Promise.resolve({"protected":n,aad:e.protected||"",header:t,signature:o})});var p=Promise.all(h);return p=p.then(function(t){return new Promise(function(r,f){var h=function(){var p=t.shift();if(!p){f(new Error("no key found"));return}p=i({},p,{payload:e.payload});var d=Promise.resolve(p);d=d.then(function(e){var t;return e.header.jwk?t=o.asKey(e.header.jwk):e.header.x5c?(t=e.header.x5c[0],t=new n(t,"base64"),t=o.asKey(t,"pkix")):t=Promise.resolve(u||a.get({use:"sig",alg:e.header.alg,kid:e.header.kid})),t.then(function(t){return t?(e.key=t,e):Promise.reject(new Error("key does not match"))})}),d=d.then(function(e){var t=[];return c.forEach(function(n){n=l[n];var r;"function"==typeof n?r=n(e):"object"==typeof n&&"function"==typeof n.prepare&&(r=n.prepare(e)),r&&t.push(Promise.resolve(r))}),Promise.all(t).then(function(){return e})}),d=d.then(function(e){var t=e.aad||"",r=e.payload||"",i=new n(1+t.length+r.length),s=0;return i.write(t,s,"ascii"),s+=t.length,i.write(".",s,"ascii"),s++,n.isBuffer(r)?r.copy(i,s):i.write(r,s,"binary"),e.content=i,e}),d=d.then(function(e){return e.key.verify(e.header.alg,e.content,e.signature)}),d=d.then(function(e){var t=p.payload;return t=s.decode(t),{"protected":p.protected,header:p.header,payload:t,signature:e.mac,key:p.key}}),d=d.then(function(e){var t=[];return c.forEach(function(n){n=l[n];var r;"object"==typeof n&&"function"==typeof n.complete&&(r=n.complete(e)),r&&t.push(Promise.resolve(r))}),Promise.all(t).then(function(){return e})}),d.then(r,h)};h()})}),p}})};t.exports={verifier:u,createVerify:a}}).call(this,e("buffer").Buffer)},{"../jwk":95,"../util/base64url":107,"../util/merge":110,buffer:9,"lodash.clone":18}],104:[function(e,t,n){"use strict";function i(e){var t=e.split("."),n,i;if(3===t.length)n="JWS",i=function(t){return r.JWS.createVerify(t).verify(e)};else{if(5!==t.length)throw new TypeError("invalid jose serialization");n="JWE",i=function(t){return r.JWE.createDecrypt(t).decrypt(e)}}var s;return s=r.util.base64url.decode(t[0],"utf8"),s=JSON.parse(s),{type:n,format:"compact",input:e,header:s,perform:i}}var r={JWE:e("../jwe"),JWS:e("../jws"),util:e("../util")};t.exports=i},{"../jwe":90,"../jws":101,"../util":109}],105:[function(e,t,n){(function(n){"use strict";var r=e("./compact"),i=e("./json"),s=t.exports=function(e){if(n.isBuffer(e))return r(e.toString("ascii"));if("string"==typeof e)return r(e);if(e)return i(e);throw new TypeError("invalid input")};s.compact=r,s.json=i}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":15,"./compact":104,"./json":106}],106:[function(e,t,n){"use strict";function s(e){var t,n,s;if("signatures"in e||"signature"in e)t="JWS",n=function(t){return i.JWS.createVerify(t).verify(e)},s=e.signatures||[{"protected":e.protected,header:e.header,signature:e.signature}],s=s.map(function(e){var t={};e.header&&(t=r(t,e.header));var n;return e.protected&&(n=e.protected,n=i.util.base64url.decode(n,"utf8"),n=JSON.parse(n),t=r(t,n)),t});else if("ciphertext"in e){t="JWE",n=function(t){return i.JWE.createDecrypt(t).decrypt(e)};var o={};e.protected&&(o.protected=e.protected,o.protected=i.util.base64url.decode(o.protected,"utf8"),o.protected=JSON.parse(o.protected)),e.unprotected&&(o.unprotected=e.unprotected),s=e.recipients||[{}],s=s.map(function(e){var t={};return e.header&&(t=r(t,e.header)),o.unprotected&&(t=r(t,o.unprotected)),o.protected&&(t=r(t,o.protected)),t})}return{type:t,format:"json",input:e,all:s,perform:n}}var r=e("../util/merge"),i={JWE:e("../jwe"),JWS:e("../jws"),util:e("../util")};t.exports=s},{"../jwe":90,"../jws":101,"../util":109,"../util/merge":110}],107:[function(e,t,n){(function(n){"use strict";var r=e("base64url"),i={encode:function(t,i){return t instanceof ArrayBuffer&&(t=new Uint8Array(t)),n.isBuffer(t)||(t=new n(t,i)),r.encode(t)},decode:r.toBuffer};t.exports=i}).call(this,e("buffer").Buffer)},{base64url:5,buffer:9}],108:[function(e,t,n){(function(n){"use strict";function s(e,t){t=t||{},n.isBuffer(e)?this.data=e:r.util.isArrayBuffer(e)?(e=new Uint8Array(e),this.data=new n(e)):r.util.isArrayBufferView(e)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.data=new n(e)),this.data&&(this.write=this.data.length,e=undefined),this.growSize=t.growSize||s.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,e?this.putBytes(e):this.data||this.accommodate(0),t.readOffset="readOffset"in t?t.readOffset:this.read,this.write="writeOffset"in t?t.writeOffset:this.write,this.read=Math.min(t.readOffset,this.write)}var r=e("../deps/forge.js"),i=e("./base64url.js");s.DEFAULT_GROW_SIZE=16,s.prototype.length=function(){return this.write-this.read},s.prototype.available=function(){return this.data.length-this.write},s.prototype.isEmpty=function(){return this.length()<=0},s.prototype.accommodate=function(e){if(!this.data)e=Math.max(this.write+e,this.growSize),this.data=new n(e);else if(this.available()<e){e=Math.max(e,this.growSize);var t=this.data,r=new n(t.length+e);t.copy(r,0),this.data=r}return this.data.fill(0,this.write),this},s.prototype.clear=function(){return this.read=this.write=0,this.data=new n(0),this},s.prototype.truncate=function(e){return this.write=this.read+Math.max(0,this.length()-e),this.data.fill(0,this.write),this},s.prototype.compact=function(){return this.read>0&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},s.prototype.copy=function(){return new s(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},s.prototype.equals=function(e){if(!s.isBuffer(e))return!1;if(e.length()!==this.length())return!1;var t=!0,n=this.read-e.read;for(var r=e.read;e.write>r;r++)t=t&&this.data[r+n]===e.data[r];return t},s.prototype.at=function(e){return this.data[this.read+e]},s.prototype.setAt=function(e,t){return this.data[this.read+e]=t,this},s.prototype.last=function(){return this.data[this.write-1]},s.prototype.bytes=function(e){var t;undefined===e?e=this.length():e&&(e=Math.min(e,this.length()));if(0===e)t="";else{var n=this.read,r=n+e,i=this.data.slice(n,r);t=String.fromCharCode.apply(null,i)}return t},s.prototype.buffer=function(e){var t;undefined===e?e=this.length():e&&(e=Math.min(e,this.length()));if(0===e)t=new ArrayBuffer(0);else{var n=this.read,r=n+e,i=this.data.slice(n,r);t=new Uint8Array(r-n),t.set(i)}return t},s.prototype.native=function(e){var t;"undefined"==typeof e?e=this.length():e&&(e=Math.min(e,this.length()));if(0===e)t=new n(0);else{var r=this.read,i=r+e;t=this.data.slice(r,i)}return t},s.prototype.toHex=function(){return this.toString("hex")},s.prototype.toString=function(e){if(0===this.length())return"";var t=this.data.slice(this.read,this.write);e=e||"utf8";switch(e){case"raw":return t.toString("binary");case"base64url":return i.encode(t);case"utf16":return t.toString("ucs2");default:return t.toString(e)}},s.prototype.fillWithByte=function(e,t){return t||(t=this.available()),this.accommodate(t),this.data.fill(e,this.write,this.write+t),this.write+=t,this},s.prototype.getBuffer=function(e){var t=this.buffer(e);return this.read+=t.byteLength,t},s.prototype.putBuffer=function(e){return this.putBytes(e)},s.prototype.getBytes=function(e){var t=this.bytes(e);return this.read+=t.length,t},s.prototype.putBytes=function(e,t){if("string"==typeof e){t=t||"binary";switch(t){case"utf16":t="ucs-2";break;case"raw":t="binary";break;case"base64url":e=i.decode(e)}n.isBuffer(e)||(e=new n(e,t))}var o,u;if(e instanceof s){var a=e;e=a.data.slice(a.read,a.write),a.read=a.write}else e instanceof r.util.ByteStringBuffer&&(e=e.getBytes());if(n.isBuffer(e))o=e;else if(Array.isArray(e))o=new n(e);else if(r.util.isArrayBuffer(e))o=new Uint8Array(e),o=new n(o);else{if(!r.util.isArrayBufferView(e))throw new TypeError("invalid source type");o=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=new n(o)}return this.accommodate(o.length),u=this.data,o.copy(u,this.write),this.write+=o.length,this},s.prototype.getNative=function(e){var t=this.native(e);return this.read+=t.length,t},s.prototype.putNative=s.prototype.putBuffer,s.prototype.getByte=function(){var e=this.data[this.read];return this.read=Math.min(this.read+1,this.write),e},s.prototype.putByte=function(e){return this.accommodate(1),this.data[this.write]=e&255,this.write++,this},s.prototype.getInt16=function(){var e=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),e},s.prototype.putInt16=function(e){return this.accommodate(2),this.data[this.write]=e>>>8&255,this.data[this.write+1]=e&255,this.write+=2,this},s.prototype.getInt24=function(){var e=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),e},s.prototype.putInt24=function(e){return this.accommodate(3),this.data[this.write]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write+2]=e&255,this.write+=3,this},s.prototype.getInt32=function(){var e=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),e},s.prototype.putInt32=function(e){return this.accommodate(4),this.data[this.write]=e>>>24&255,this.data[this.write+1]=e>>>16&255,this.data[this.write+2]=e>>>8&255,this.data[this.write+3]=e&255,this.write+=4,this},s.prototype.getInt16Le=function(){var e=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),e},s.prototype.putInt16Le=function(e){return this.accommodate(2),this.data[this.write+1]=e>>>8&255,this.data[this.write]=e&255,this.write+=2,this},s.prototype.getInt24Le=function(){var e=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),e},s.prototype.putInt24Le=function(e){return this.accommodate(3),this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=e&255,this.write+=3,this},s.prototype.getInt32Le=function(){var e=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),e},s.prototype.putInt32Le=function(e){return this.accommodate(4),this.data[this.write+3]=e>>>24&255,this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=e&255,this.write+=4,this},s.prototype.getInt=function(e){var t=0;do t=t<<8|this.getByte(),e-=8;while(e>0);return t},s.prototype.putInt=function(e,t){this.accommodate(Math.ceil(t/8));do t-=8,this.putByte(e>>t&255);while(t>0);return this},s.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},s.prototype.putString=function(e){return this.putBytes(e,"utf16")},s.isBuffer=function(e){return e instanceof s},s.asBuffer=function(e){return s.isBuffer(e)?e:e?new s(e):new s},t.exports=r.util.ByteBuffer=s}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"./base64url.js":107,buffer:9}],109:[function(e,t,n){(function(n){"use strict";function s(e,t){if(n.isBuffer(e))return e;if("string"==typeof e)return t=t||"binary","base64url"===t?i.base64url.decode(e):new n(e,t);r.util.isArrayBufferView(e)?e=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteOffset+e.byteLength):r.util.isArrayBuffer(e)&&(e=new Uint8Array(e));var s;return s=new n(e),s}function o(e){return new n(r.random.getBytes(e),"binary")}var r=e("../deps/forge.js"),i;i={base64url:e("./base64url.js"),utf8:e("./utf8.js"),asBuffer:s,randomBytes:o},t.exports=i}).call(this,e("buffer").Buffer)},{"../deps/forge.js":85,"./base64url.js":107,"./utf8.js":111,buffer:9}],110:[function(e,t,n){(function(n){"use strict";function o(e){var t;for(var n=0;!t&&s.length>n;n++)e instanceof s[n]&&(t=s[n]);return t}function u(e,t){if(n.isBuffer(t))t=new n(t);else{var r=o(t);t=r?new r(t,t.byteOffset,t.byteLength):undefined}return e=t,t}var r=e("lodash.partialright"),i=e("lodash.merge"),s=function(){var e=[];return"undefined"!=typeof Uint8ClampedArray&&e.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&e.push(Uint8Array),"undefined"!=typeof Uint16Array&&e.push(Uint16Array),"undefined"!=typeof Uint32Array&&e.push(Uint32Array),"undefined"!=typeof Float32Array&&e.push(Float32Array),"undefined"!=typeof Float64Array&&e.push(Float64Array),e}();t.exports=r(i,u)}).call(this,e("buffer").Buffer)},{buffer:9,"lodash.merge":22,"lodash.partialright":24}],111:[function(e,t,n){"use strict";var r=n;r.encode=function(e){var t=encodeURIComponent(e||"");return t=t.replace(/\%([0-9a-fA-F]{2})/g,function(e,t){return t=parseInt(t,16),String.fromCharCode(t)}),t},r.decode=function(e){var t=(e||"").replace(/[\u0080-\u00ff]/g,function(e){var t=(256|e.charCodeAt(0)).toString(16).substring(1);return"%"+t});return t=decodeURIComponent(t),t}},{}],112:[function(e,t,n){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";n.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var n=t.shift();if(!n)continue;if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+r),i);return}for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;r=0;for(t=0,n=e.length;t<n;t++)r+=e[t].length;o=new Uint8Array(r),i=0;for(t=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],113:[function(e,t,n){"use strict";function r(e,t,n,r){var i=e&65535|0,s=e>>>16&65535|0,o=0;while(n!==0){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}t.exports=r},{}],114:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED
:8}},{}],115:[function(e,t,n){"use strict";function r(){var e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}function s(e,t,n,r){var s=i,o=r+n;e^=-1;for(var u=r;u<o;u++)e=e>>>8^s[(e^t[u])&255];return e^-1}var i=r();t.exports=s},{}],116:[function(e,t,n){"use strict";function Y(e,t){return e.msg=u[t],t}function Z(e){return(e<<1)-(e>4?9:0)}function et(e){var t=e.length;while(--t>=0)e[t]=0}function tt(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out);if(n===0)return;r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0)}function nt(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,tt(e.strm)}function rt(e,t){e.pending_buf[e.pending++]=t}function it(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function st(e,t,n,i){var u=e.avail_in;return u>i&&(u=i),u===0?0:(e.avail_in-=u,r.arraySet(t,e.input,e.next_in,u,n),e.state.wrap===1?e.adler=s(e.adler,t,u,n):e.state.wrap===2&&(e.adler=o(e.adler,t,u,n)),e.next_in+=u,e.total_in+=u,u)}function ot(e,t){var n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,u=e.nice_match,a=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,f=e.window,l=e.w_mask,c=e.prev,h=e.strstart+j,p=f[r+o-1],d=f[r+o];e.prev_length>=e.good_match&&(n>>=2),u>e.lookahead&&(u=e.lookahead);do{i=t;if(f[i+o]!==d||f[i+o-1]!==p||f[i]!==f[r]||f[++i]!==f[r+1])continue;r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<h);s=j-(h-r),r=h-j;if(s>o){e.match_start=t,o=s;if(s>=u)break;p=f[r+o-1],d=f[r+o]}}while((t=c[t&l])>a&&--n!==0);return o<=e.lookahead?o:e.lookahead}function ut(e){var t=e.w_size,n,i,s,o,u;do{o=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-F)){r.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do s=e.head[--n],e.head[n]=s>=t?s-t:0;while(--i);i=t,n=i;do s=e.prev[--n],e.prev[n]=s>=t?s-t:0;while(--i);o+=t}if(e.strm.avail_in===0)break;i=st(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i;if(e.lookahead+e.insert>=B){u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+B-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--;if(e.lookahead+e.insert<B)break}}}while(e.lookahead<F&&e.strm.avail_in!==0)}function at(e,t){var n=65535;n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);for(;;){if(e.lookahead<=1){ut(e);if(e.lookahead===0&&t===a)return $;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if(e.strstart===0||e.strstart>=r){e.lookahead=e.strstart-r,e.strstart=r,nt(e,!1);if(e.strm.avail_out===0)return $}if(e.strstart-e.block_start>=e.w_size-F){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=0;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.strstart>e.block_start){nt(e,!1);if(e.strm.avail_out===0)return $}return $}function ft(e,t){var n,r;for(;;){if(e.lookahead<F){ut(e);if(e.lookahead<F&&t===a)return $;if(e.lookahead===0)break}n=0,e.lookahead>=B&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-F&&(e.match_length=ot(e,n));if(e.match_length>=B){r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-B),e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=B){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=e.strstart<B-1?e.strstart:B-1;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function lt(e,t){var n,r,s;for(;;){if(e.lookahead<F){ut(e);if(e.lookahead<F&&t===a)return $;if(e.lookahead===0)break}n=0,e.lookahead>=B&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=B-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-F&&(e.match_length=ot(e,n),e.match_length<=5&&(e.strategy===b||e.match_length===B&&e.strstart-e.match_start>4096)&&(e.match_length=B-1));if(e.prev_length>=B&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-B,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-B),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+B-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);e.match_available=0,e.match_length=B-1,e.strstart++;if(r){nt(e,!1);if(e.strm.avail_out===0)return $}}else if(e.match_available){r=i._tr_tally(e,0,e.window[e.strstart-1]),r&&nt(e,!1),e.strstart++,e.lookahead--;if(e.strm.avail_out===0)return $}else e.match_available=1,e.strstart++,e.lookahead--}e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<B-1?e.strstart:B-1;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function ct(e,t){var n,r,s,o,u=e.window;for(;;){if(e.lookahead<=j){ut(e);if(e.lookahead<=j&&t===a)return $;if(e.lookahead===0)break}e.match_length=0;if(e.lookahead>=B&&e.strstart>0){s=e.strstart-1,r=u[s];if(r===u[++s]&&r===u[++s]&&r===u[++s]){o=e.strstart+j;do;while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<o);e.match_length=j-(o-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}}e.match_length>=B?(n=i._tr_tally(e,1,e.match_length-B),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++);if(n){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=0;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function ht(e,t){var n;for(;;){if(e.lookahead===0){ut(e);if(e.lookahead===0){if(t===a)return $;break}}e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n){nt(e,!1);if(e.strm.avail_out===0)return $}}e.insert=0;if(t===c)return nt(e,!0),e.strm.avail_out===0?K:Q;if(e.last_lit){nt(e,!1);if(e.strm.avail_out===0)return $}return J}function pt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function vt(e){e.window_size=2*e.w_size,et(e.head),e.max_lazy_match=dt[e.level].max_lazy,e.good_match=dt[e.level].good_length,e.nice_match=dt[e.level].nice_length,e.max_chain_length=dt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=B-1,e.match_available=0,e.ins_h=0}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(P*2),this.dyn_dtree=new r.Buf16((2*_+1)*2),this.bl_tree=new r.Buf16((2*D+1)*2),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(H+1),this.heap=new r.Buf16(2*M+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*M+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(e){var t;return!e||!e.state?Y(e,v):(e.total_in=e.total_out=0,e.data_type=T,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?q:X,e.adler=t.wrap===2?0:1,t.last_flush=a,i._tr_init(t),p)}function yt(e){var t=gt(e);return t===p&&vt(e.state),t}function bt(e,t){return!e||!e.state?v:e.state.wrap!==2?v:(e.state.gzhead=t,p)}function wt(e,t,n,i,s,o){if(!e)return v;var u=1;t===y&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16);if(s<1||s>C||n!==N||i<8||i>15||t<0||t>9||o<0||o>S)return Y(e,v);i===8&&(i=9);var a=new mt;return e.state=a,a.strm=e,a.wrap=u,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+B-1)/B),a.window=new r.Buf8(a.w_size*2),a.head=new r.Buf16(a.hash_size),a.prev=new r.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new r.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,yt(e)}function Et(e,t){return wt(e,t,N,k,L,x)}function St(e,t){var n,r,s,u;if(!e||!e.state||t>h||t<0)return e?Y(e,v):v;r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===V&&t!==c)return Y(e,e.avail_out===0?g:v);r.strm=e,n=r.last_flush,r.last_flush=t;if(r.status===q)if(r.wrap===2)e.adler=0,rt(r,31),rt(r,139),rt(r,8),r.gzhead?(rt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),rt(r,r.gzhead.time&255),rt(r,r.gzhead.time>>8&255),rt(r,r.gzhead.time>>16&255),rt(r,r.gzhead.time>>24&255),rt(r,r.level===9?2:r.strategy>=w||r.level<2?4:0),rt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(rt(r,r.gzhead.extra.length&255),rt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=o(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=R):(rt(r,0),rt(r,0),rt(r,0),rt(r,0),rt(r,0),rt(r,r.level===9?2:r.strategy>=w||r.level<2?4:0),rt(r,G),r.status=X);else{var m=N+(r.w_bits-8<<4)<<8,y=-1;r.strategy>=w||r.level<2?y=0:r.level<6?y=1:r.level===6?y=2:y=3,m|=y<<6,r.strstart!==0&&(m|=I),m+=31-m%31,r.status=X,it(r,m),r.strstart!==0&&(it(r,e.adler>>>16),it(r,e.adler&65535)),e.adler=1}if(r.status===R)if(r.gzhead.extra){s=r.pending;while(r.gzindex<(r.gzhead.extra.length&65535)){if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),tt(e),s=r.pending;if(r.pending===r.pending_buf_size)break}rt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++}r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=U)}else r.status=U;if(r.status===U)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),tt(e),s=r.pending;if(r.pending===r.pending_buf_size){u=1;break}}r.gzindex<r.gzhead.name.length?u=r.gzhead.name.charCodeAt(r.gzindex++)&255:u=0,rt(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),u===0&&(r.gzindex=0,r.status=z)}else r.status=z;if(r.status===z)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),tt(e),s=r.pending;if(r.pending===r.pending_buf_size){u=1;break}}r.gzindex<r.gzhead.comment.length?u=r.gzhead.comment.charCodeAt(r.gzindex++)&255:u=0,rt(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>s&&(e.adler=o(e.adler,r.pending_buf,r.pending-s,s)),u===0&&(r.status=W)}else r.status=W;r.status===W&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(e),r.pending+2<=r.pending_buf_size&&(rt(r,e.adler&255),rt(r,e.adler>>8&255),e.adler=0,r.status=X)):r.status=X);if(r.pending!==0){tt(e);if(e.avail_out===0)return r.last_flush=-1,p}else if(e.avail_in===0&&Z(t)<=Z(n)&&t!==c)return Y(e,g);if(r.status===V&&e.avail_in!==0)return Y(e,g);if(e.avail_in!==0||r.lookahead!==0||t!==a&&r.status!==V){var b=r.strategy===w?ht(r,t):r.strategy===E?ct(r,t):dt[r.level].func(r,t);if(b===K||b===Q)r.status=V;if(b===$||b===K)return e.avail_out===0&&(r.last_flush=-1),p;if(b===J){t===f?i._tr_align(r):t!==h&&(i._tr_stored_block(r,0,0,!1),t===l&&(et(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(e);if(e.avail_out===0)return r.last_flush=-1,p}}return t!==c?p:r.wrap<=0?d:(r.wrap===2?(rt(r,e.adler&255),rt(r,e.adler>>8&255),rt(r,e.adler>>16&255),rt(r,e.adler>>24&255),rt(r,e.total_in&255),rt(r,e.total_in>>8&255),rt(r,e.total_in>>16&255),rt(r,e.total_in>>24&255)):(it(r,e.adler>>>16),it(r,e.adler&65535)),tt(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?p:d)}function xt(e){var t;return!e||!e.state?v:(t=e.state.status,t!==q&&t!==R&&t!==U&&t!==z&&t!==W&&t!==X&&t!==V?Y(e,v):(e.state=null,t===X?Y(e,m):p))}function Tt(e,t){var n=t.length,i,o,u,a,f,l,c,h;if(!e||!e.state)return v;i=e.state,a=i.wrap;if(a===2||a===1&&i.status!==q||i.lookahead)return v;a===1&&(e.adler=s(e.adler,t,n,0)),i.wrap=0,n>=i.w_size&&(a===0&&(et(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new r.Buf8(i.w_size),r.arraySet(h,t,n-i.w_size,i.w_size,0),t=h,n=i.w_size),f=e.avail_in,l=e.next_in,c=e.input,e.avail_in=n,e.next_in=0,e.input=t,ut(i);while(i.lookahead>=B){o=i.strstart,u=i.lookahead-(B-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+B-1])&i.hash_mask,i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++;while(--u);i.strstart=o,i.lookahead=B-1,ut(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=B-1,i.match_available=0,e.next_in=l,e.input=c,e.avail_in=f,i.wrap=a,p}var r=e("../utils/common"),i=e("./trees"),s=e("./adler32"),o=e("./crc32"),u=e("./messages"),a=0,f=1,l=3,c=4,h=5,p=0,d=1,v=-2,m=-3,g=-5,y=-1,b=1,w=2,E=3,S=4,x=0,T=2,N=8,C=9,k=15,L=8,A=29,O=256,M=O+1+A,_=30,D=19,P=2*M+1,H=15,B=3,j=258,F=j+B+1,I=32,q=42,R=69,U=73,z=91,W=103,X=113,V=666,$=1,J=2,K=3,Q=4,G=3,dt;dt=[new pt(0,0,0,0,at),new pt(4,4,8,4,ft),new pt(4,5,16,8,ft),new pt(4,6,32,32,ft),new pt(4,4,16,16,lt),new pt(8,16,32,32,lt),new pt(8,16,128,128,lt),new pt(8,32,128,256,lt),new pt(32,128,258,1024,lt),new pt(32,258,258,4096,lt)],n.deflateInit=Et,n.deflateInit2=wt,n.deflateReset=yt,n.deflateResetKeep=gt,n.deflateSetHeader=bt,n.deflate=St,n.deflateEnd=xt,n.deflateSetDictionary=Tt,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":112,"./adler32":113,"./crc32":115,"./messages":120,"./trees":121}],117:[function(e,t,n){"use strict";var r=30,i=12;t.exports=function(t,n){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;s=t.state,o=t.next_in,L=t.input,u=o+(t.avail_in-5),a=t.next_out,A=t.output,f=a-(n-t.avail_out),l=a+(t.avail_out-257),c=s.dmax,h=s.wsize,p=s.whave,d=s.wnext,v=s.window,m=s.hold,g=s.bits,y=s.lencode,b=s.distcode,w=(1<<s.lenbits)-1,E=(1<<s.distbits)-1;e:do{g<15&&(m+=L[o++]<<g,g+=8,m+=L[o++]<<g,g+=8),S=y[m&w];t:for(;;){x=S>>>24,m>>>=x,g-=x,x=S>>>16&255;if(x===0)A[a++]=S&65535;else{if(!(x&16)){if((x&64)===0){S=y[(S&65535)+(m&(1<<x)-1)];continue t}if(x&32){s.mode=i;break e}t.msg="invalid literal/length code",s.mode=r;break e}T=S&65535,x&=15,x&&(g<x&&(m+=L[o++]<<g,g+=8),T+=m&(1<<x)-1,m>>>=x,g-=x),g<15&&(m+=L[o++]<<g,g+=8,m+=L[o++]<<g,g+=8),S=b[m&E];n:for(;;){x=S>>>24,m>>>=x,g-=x,x=S>>>16&255;if(!(x&16)){if((x&64)===0){S=b[(S&65535)+(m&(1<<x)-1)];continue n}t.msg="invalid distance code",s.mode=r;break e}N=S&65535,x&=15,g<x&&(m+=L[o++]<<g,g+=8,g<x&&(m+=L[o++]<<g,g+=8)),N+=m&(1<<x)-1;if(N>c){t.msg="invalid distance too far back",s.mode=r;break e}m>>>=x,g-=x,x=a-f;if(N>x){x=N-x;if(x>p&&s.sane){t.msg="invalid distance too far back",s.mode=r;break e}C=0,k=v;if(d===0){C+=h-x;if(x<T){T-=x;do A[a++]=v[C++];while(--x);C=a-N,k=A}}else if(d<x){C+=h+d-x,x-=d;if(x<T){T-=x;do A[a++]=v[C++];while(--x);C=0;if(d<T){x=d,T-=x;do A[a++]=v[C++];while(--x);C=a-N,k=A}}}else{C+=d-x;if(x<T){T-=x;do A[a++]=v[C++];while(--x);C=a-N,k=A}}while(T>2)A[a++]=k[C++],A[a++]=k[C++],A[a++]=k[C++],T-=3;T&&(A[a++]=k[C++],T>1&&(A[a++]=k[C++]))}else{C=a-N;do A[a++]=A[C++],A[a++]=A[C++],A[a++]=A[C++],T-=3;while(T>2);T&&(A[a++]=A[C++],T>1&&(A[a++]=A[C++]))}break}}break}}while(o<u&&a<l);T=g>>3,o-=T,g-=T<<3,m&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=o<u?5+(u-o):5-(o-u),t.avail_out=a<l?257+(l-a):257-(a-l),s.hold=m,s.bits=g;return}},{}],118:[function(e,t,n){"use strict";function it(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function st(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ot(e){var t;return!e||!e.state?g:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=S,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(et),t.distcode=t.distdyn=new r.Buf32(tt),t.sane=1,t.back=-1,d)}function ut(e){var t;return!e||!e.state?g:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,ot(e))}function at(e,t){var n,r;return!e||!e.state?g:(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?g:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ut(e)))}function ft(e,t){var n,r;return e?(r=new st,e.state=r,r.window=null,n=at(e,t),n!==d&&(e.state=null),n):g}function lt(e){return ft(e,rt)}function dt(e){if(ct){var t;ht=new r.Buf32(512),pt=new r.Buf32(32),t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;u(f,e.lens,0,288,ht,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;u(l,e.lens,0,32,pt,0,e.work,{bits:5}),ct=!1}e.lencode=ht,e.lenbits=9,e.distcode=pt,e.distbits=5}function vt(e,t,n,i){var s,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>i&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),i-=s,i?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}function mt(e,t){var n,et,tt,nt,rt,st,ot,ut,at,ft,lt,ct,ht,pt,mt=0,gt,yt,bt,wt,Et,St,xt,Tt,Nt=new r.Buf8(4),Ct,kt,Lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return g;n=e.state,n.mode===D&&(n.mode=P),rt=e.next_out,tt=e.output,ot=e.avail_out,nt=e.next_in,et=e.input,st=e.avail_in,ut=n.hold,at=n.bits,ft=st,lt=ot,Tt=d;e:for(;;)switch(n.mode){case S:if(n.wrap===0){n.mode=P;break}while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(n.wrap&2&&ut===35615){n.check=0,Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0),ut=0,at=0,n.mode=x;break}n.flags=0,n.head&&(n.head.done=!1);if(!(n.wrap&1)||(((ut&255)<<8)+(ut>>8))%31){e.msg="incorrect header check",n.mode=G;break}if((ut&15)!==E){e.msg="unknown compression method",n.mode=G;break}ut>>>=4,at-=4,xt=(ut&15)+8;if(n.wbits===0)n.wbits=xt;else if(xt>n.wbits){e.msg="invalid window size",n.mode=G;break}n.dmax=1<<xt,e.adler=n.check=1,n.mode=ut&512?M:D,ut=0,at=0;break;case x:while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.flags=ut;if((n.flags&255)!==E){e.msg="unknown compression method",n.mode=G;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=G;break}n.head&&(n.head.text=ut>>8&1),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0)),ut=0,at=0,n.mode=T;case T:while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.head&&(n.head.time=ut),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,Nt[2]=ut>>>16&255,Nt[3]=ut>>>24&255,n.check=s(n.check,Nt,4,0)),ut=0,at=0,n.mode=N;case N:while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.head&&(n.head.xflags=ut&255,n.head.os=ut>>8),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0)),ut=0,at=0,n.mode=C;case C:if(n.flags&1024){while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.length=ut,n.head&&(n.head.extra_len=ut),n.flags&512&&(Nt[0]=ut&255,Nt[1]=ut>>>8&255,n.check=s(n.check,Nt,2,0)),ut=0,at=0}else n.head&&(n.head.extra=null);n.mode=k;case k:if(n.flags&1024){ct=n.length,ct>st&&(ct=st),ct&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,et,nt,ct,xt)),n.flags&512&&(n.check=s(n.check,et,ct,nt)),st-=ct,nt+=ct,n.length-=ct);if(n.length)break e}n.length=0,n.mode=L;case L:if(n.flags&2048){if(st===0)break e;ct=0;do xt=et[nt+ct++],n.head&&xt&&n.length<65536&&(n.head.name+=String.fromCharCode(xt));while(xt&&ct<st);n.flags&512&&(n.check=s(n.check,et,ct,nt)),st-=ct,nt+=ct;if(xt)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(n.flags&4096){if(st===0)break e;ct=0;do xt=et[nt+ct++],n.head&&xt&&n.length<65536&&(n.head.comment+=String.fromCharCode(xt));while(xt&&ct<st);n.flags&512&&(n.check=s(n.check,et,ct,nt)),st-=ct,nt+=ct;if(xt)break e}else n.head&&(n.head.comment=null);n.mode=O;case O:if(n.flags&512){while(at<16){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(ut!==(n.check&65535)){e.msg="header crc mismatch",n.mode=G;break}ut=0,at=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=D;break;case M:while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}e.adler=n.check=it(ut),ut=0,at=0,n.mode=_;case _:if(n.havedict===0)return e.next_out=rt,e.avail_out=ot,e.next_in=nt,e.avail_in=st,n.hold=ut,n.bits=at,m;e.adler=n.check=1,n.mode=D;case D:if(t===h||t===p)break e;case P:if(n.last){ut>>>=at&7,at-=at&7,n.mode=J;break}while(at<3){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.last=ut&1,ut>>>=1,at-=1;switch(ut&3){case 0:n.mode=H;break;case 1:dt(n),n.mode=R;if(t===p){ut>>>=2,at-=2;break e}break;case 2:n.mode=F;break;case 3:e.msg="invalid block type",n.mode=G}ut>>>=2,at-=2;break;case H:ut>>>=at&7,at-=at&7;while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if((ut&65535)!==(ut>>>16^65535)){e.msg="invalid stored block lengths",n.mode=G;break}n.length=ut&65535,ut=0,at=0,n.mode=B;if(t===p)break e;case B:n.mode=j;case j:ct=n.length;if(ct){ct>st&&(ct=st),ct>ot&&(ct=ot);if(ct===0)break e;r.arraySet(tt,et,nt,ct,rt),st-=ct,nt+=ct,ot-=ct,rt+=ct,n.length-=ct;break}n.mode=D;break;case F:while(at<14){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.nlen=(ut&31)+257,ut>>>=5,at-=5,n.ndist=(ut&31)+1,ut>>>=5,at-=5,n.ncode=(ut&15)+4,ut>>>=4,at-=4;if(n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=G;break}n.have=0,n.mode=I;case I:while(n.have<n.ncode){while(at<3){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.lens[Lt[n.have++]]=ut&7,ut>>>=3,at-=3}while(n.have<19)n.lens[Lt[n.have++]]=0;n.lencode=n.lendyn,n.lenbits=7,Ct={bits:n.lenbits},Tt=u(a,n.lens,0,19,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits;if(Tt){e.msg="invalid code lengths set",n.mode=G;break}n.have=0,n.mode=q;case q:while(n.have<n.nlen+n.ndist){for(;;){mt=n.lencode[ut&(1<<n.lenbits)-1],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(bt<16)ut>>>=gt,at-=gt,n.lens[n.have++]=bt;else{if(bt===16){kt=gt+2;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=gt,at-=gt;if(n.have===0){e.msg="invalid bit length repeat",n.mode=G;break}xt=n.lens[n.have-1],ct=3+(ut&3),ut>>>=2,at-=2}else if(bt===17){kt=gt+3;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=gt,at-=gt,xt=0,ct=3+(ut&7),ut>>>=3,at-=3}else{kt=gt+7;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=gt,at-=gt,xt=0,ct=11+(ut&127),ut>>>=7,at-=7}if(n.have+ct>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=G;break}while(ct--)n.lens[n.have++]=xt}}if(n.mode===G)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=G;break}n.lenbits=9,Ct={bits:n.lenbits},Tt=u(f,n.lens,0,n.nlen,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits;if(Tt){e.msg="invalid literal/lengths set",n.mode=G;break}n.distbits=6,n.distcode=n.distdyn,Ct={bits:n.distbits},Tt=u(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ct),n.distbits=Ct.bits;if(Tt){e.msg="invalid distances set",n.mode=G;break}n.mode=R;if(t===p)break e;case R:n.mode=U;case U:if(st>=6&&ot>=258){e.next_out=rt,e.avail_out=ot,e.next_in=nt,e.avail_in=st,n.hold=ut,n.bits=at,o(e,lt),rt=e.next_out,tt=e.output,ot=e.avail_out,nt=e.next_in,et=e.input,st=e.avail_in,ut=n.hold,at=n.bits,n.mode===D&&(n.back=-1);break}n.back=0;for(;;){mt=n.lencode[ut&(1<<n.lenbits)-1],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(yt&&(yt&240)===0){wt=gt,Et=yt,St=bt;for(;;){mt=n.lencode[St+((ut&(1<<wt+Et)-1)>>wt)],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(wt+gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=wt,at-=wt,n.back+=wt}ut>>>=gt,at-=gt,n.back+=gt,n.length=bt;if(yt===0){n.mode=$;break}if(yt&32){n.back=-1,n.mode=D;break}if(yt&64){e.msg="invalid literal/length code",n.mode=G;break}n.extra=yt&15,n.mode=z;case z:if(n.extra){kt=n.extra;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.length+=ut&(1<<n.extra)-1,ut>>>=n.extra,at-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;;){mt=n.distcode[ut&(1<<n.distbits)-1],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if((yt&240)===0){wt=gt,Et=yt,St=bt;for(;;){mt=n.distcode[St+((ut&(1<<wt+Et)-1)>>wt)],gt=mt>>>24,yt=mt>>>16&255,bt=mt&65535;if(wt+gt<=at)break;if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}ut>>>=wt,at-=wt,n.back+=wt}ut>>>=gt,at-=gt,n.back+=gt;if(yt&64){e.msg="invalid distance code",n.mode=G;break}n.offset=bt,n.extra=yt&15,n.mode=X;case X:if(n.extra){kt=n.extra;while(at<kt){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}n.offset+=ut&(1<<n.extra)-1,ut>>>=n.extra,at-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=G;break}n.mode=V;case V:if(ot===0)break e;ct=lt-ot;if(n.offset>ct){ct=n.offset-ct;if(ct>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=G;break}ct>n.wnext?(ct-=n.wnext,ht=n.wsize-ct):ht=n.wnext-ct,ct>n.length&&(ct=n.length),pt=n.window}else pt=tt,ht=rt-n.offset,ct=n.length;ct>ot&&(ct=ot),ot-=ct,n.length-=ct;do tt[rt++]=pt[ht++];while(--ct);n.length===0&&(n.mode=U);break;case $:if(ot===0)break e;tt[rt++]=n.length,ot--,n.mode=U;break;case J:if(n.wrap){while(at<32){if(st===0)break e;st--,ut|=et[nt++]<<at,at+=8}lt-=ot,e.total_out+=lt,n.total+=lt,lt&&(e.adler=n.check=n.flags?s(n.check,tt,lt,rt-lt):i(n.check,tt,lt,rt-lt)),lt=ot;if((n.flags?ut:it(ut))!==n.check){e.msg="incorrect data check",n.mode=G;break}ut=0,at=0}n.mode=K;case K:if(n.wrap&&n.flags){while(at<32){if(st===0)break e;st--,ut+=et[nt++]<<at,at+=8}if(ut!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=G;break}ut=0,at=0}n.mode=Q;case Q:Tt=v;break e;case G:Tt=y;break e;case Y:return b;case Z:default:return g}e.next_out=rt,e.avail_out=ot,e.next_in=nt,e.avail_in=st,n.hold=ut,n.bits=at;if(n.wsize||lt!==e.avail_out&&n.mode<G&&(n.mode<J||t!==c))if(vt(e,e.output,e.next_out,lt-e.avail_out))return n.mode=Y,b;return ft-=e.avail_in,lt-=e.avail_out,e.total_in+=ft,e.total_out+=lt,n.total+=lt,n.wrap&&lt&&(e.adler=n.check=n.flags?s(n.check,tt,lt,e.next_out-lt):i(n.check,tt,lt,e.next_out-lt)),e.data_type=n.bits+(n.last?64:0)+(n.mode===D?128:0)+(n.mode===R||n.mode===B?256:0),(ft===0&&lt===0||t===c)&&Tt===d&&(Tt=w),Tt}function gt(e){if(!e||!e.state)return g;var t=e.state;return t.window&&(t.window=null),e.state=null,d}function yt(e,t){var n;return!e||!e.state?g:(n=e.state,(n.wrap&2)===0?g:(n.head=t,t.done=!1,d))}function bt(e,t){var n=t.length,r,s,o;if(!e||!e.state)return g;r=e.state;if(r.wrap!==0&&r.mode!==_)return g;if(r.mode===_){s=1,s=i(s,t,n,0);if(s!==r.check)return y}return o=vt(e,t,n,n),o?(r.mode=Y,b):(r.havedict=1,d)}var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),u=e("./inftrees"),a=0,f=1,l=2,c=4,h=5,p=6,d=0,v=1,m=2,g=-2,y=-3,b=-4,w=-5,E=8,S=1,x=2,T=3,N=4,C=5,k=6,L=7,A=8,O=9,M=10,_=11,D=12,P=13,H=14,B=15,j=16,F=17,I=18,q=19,R=20,U=21,z=22,W=23,X=24,V=25,$=26,J=27,K=28,Q=29,G=30,Y=31,Z=32,et=852,tt=592,nt=15,rt=nt,ct=!0,ht,pt;n.inflateReset=ut,n.inflateReset2=at,n.inflateResetKeep=ot,n.inflateInit=lt,n.inflateInit2=ft,n.inflate=mt,n.inflateEnd=gt,n.inflateGetHeader=yt,n.inflateSetDictionary=bt,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":112,"./adler32":113,"./crc32":115,"./inffast":117,"./inftrees":119}],119:[function(e,t,n){"use strict";var r=e("../utils/common"),i=15,s=852,o=592,u=0,a=1,f=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,n,d,v,m,g,y,b){var w=b.bits,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M,_,D,P,H,B=null,j=0,F,I=new r.Buf16(i+1),q=new r.Buf16(i+1),R=null,U=0,z,W,X;for(E=0;E<=i;E++)I[E]=0;for(S=0;S<v;S++)I[n[d+S]]++;N=w;for(T=i;T>=1;T--)if(I[T]!==0)break;N>T&&(N=T);if(T===0)return m[g++]=20971520,m[g++]=20971520,b.bits=1,0;for(x=1;x<T;x++)if(I[x]!==0)break;N<x&&(N=x),L=1;for(E=1;E<=i;E++){L<<=1,L-=I[E];if(L<0)return-1}if(L>0&&(t===u||T!==1))return-1;q[1]=0;for(E=1;E<i;E++)q[E+1]=q[E]+I[E];for(S=0;S<v;S++)n[d+S]!==0&&(y[q[n[d+S]]++]=S);t===u?(B=R=y,F=19):t===a?(B=l,j-=257,R=c,U-=257,F=256):(B=h,R=p,F=-1),O=0,S=0,E=x,H=g,C=N,k=0,D=-1,A=1<<N,P=A-1;if(t===a&&A>s||t===f&&A>o)return 1;var V=0;for(;;){V++,z=E-k,y[S]<F?(W=0,X=y[S]):y[S]>F?(W=R[U+y[S]],X=B[j+y[S]]):(W=96,X=0),M=1<<E-k,_=1<<C,x=_;do _-=M,m[H+(O>>k)+_]=z<<24|W<<16|X|0;while(_!==0);M=1<<E-1;while(O&M)M>>=1;M!==0?(O&=M-1,O+=M):O=0,S++;if(--I[E]===0){if(E===T)break;E=n[d+y[S]]}if(E>N&&(O&P)!==D){k===0&&(k=N),H+=x,C=E-k,L=1<<C;while(C+k<T){L-=I[C+k];if(L<=0)break;C++,L<<=1}A+=1<<C;if(t===a&&A>s||t===f&&A>o)return 1;D=O&P,m[D]=N<<24|C<<16|H-g|0}}return O!==0&&(m[H+O]=E-k<<24|64<<16|0),b.bits=N,0}},{"../utils/common":112}],120:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],121:[function(e,t,n){"use strict";function a(e){var t=e.length;while(--t>=0)e[t]=0}function F(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function U(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function z(e){return e<256?P[e]:P[256+(e>>>7)]}function W(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function X(e,t,n){e.bi_valid>E-n?(e.bi_buf|=t<<e.bi_valid&65535,W(e,e.bi_buf),e.bi_buf=t>>E-e.bi_valid,e.bi_valid+=n-E):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function V(e,t,n){X(e,n[t*2],n[t*2+1])}function $(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function J(e){e.bi_valid===16?(W(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function K(e,t){var n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,a=t.stat_desc.max_length,f,l,c,h,p,d,v=0;for(h=0;h<=w;h++)e.bl_count[h]=0;n[e.heap[e.heap_max]*2+1]=0;for(f=e.heap_max+1;f<b;f++){l=e.heap[f],h=n[n[l*2+1]*2+1]+1,h>a&&(h=a,v++),n[l*2+1]=h;if(l>r)continue;e.bl_count[h]++,p=0,l>=u&&(p=o[l-u]),d=n[l*2],e.opt_len+=d*(h+p),s&&(e.static_len+=d*(i[l*2+1]+p))}if(v===0)return;do{h=a-1;while(e.bl_count[h]===0)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[a]--,v-=2}while(v>0);for(h=a;h!==0;h--){l=e.bl_count[h];while(l!==0){c=e.heap[--f];if(c>r)continue;n[c*2+1]!==h&&(e.opt_len+=(h-n[c*2+1])*n[c*2],n[c*2+1]=h),l--}}}function Q(e,t,n){var r=new Array(w+1),i=0,s,o;for(s=1;s<=w;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){var u=e[o*2+1];if(u===0)continue;e[o*2]=$(r[u]++,u)}}function G
(){var e,t,n,r,i,s=new Array(w+1);n=0;for(r=0;r<d-1;r++){B[r]=n;for(e=0;e<1<<k[r];e++)H[n++]=r}H[n-1]=r,i=0;for(r=0;r<16;r++){j[r]=i;for(e=0;e<1<<L[r];e++)P[i++]=r}i>>=7;for(;r<g;r++){j[r]=i<<7;for(e=0;e<1<<L[r]-7;e++)P[256+i++]=r}for(t=0;t<=w;t++)s[t]=0;e=0;while(e<=143)_[e*2+1]=8,e++,s[8]++;while(e<=255)_[e*2+1]=9,e++,s[9]++;while(e<=279)_[e*2+1]=7,e++,s[7]++;while(e<=287)_[e*2+1]=8,e++,s[8]++;Q(_,m+1,s);for(e=0;e<g;e++)D[e*2+1]=5,D[e*2]=$(e,5);I=new F(_,k,v+1,m,w),q=new F(D,L,0,g,w),R=new F(new Array(0),A,0,y,S)}function Y(e){var t;for(t=0;t<m;t++)e.dyn_ltree[t*2]=0;for(t=0;t<g;t++)e.dyn_dtree[t*2]=0;for(t=0;t<y;t++)e.bl_tree[t*2]=0;e.dyn_ltree[x*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Z(e){e.bi_valid>8?W(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function et(e,t,n,i){Z(e),i&&(W(e,n),W(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function tt(e,t,n,r){var i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function nt(e,t,n){var r=e.heap[n],i=n<<1;while(i<=e.heap_len){i<e.heap_len&&tt(t,e.heap[i+1],e.heap[i],e.depth)&&i++;if(tt(t,r,e.heap[i],e.depth))break;e.heap[n]=e.heap[i],n=i,i<<=1}e.heap[n]=r}function rt(e,t,n){var r,i,s=0,o,u;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?V(e,i,t):(o=H[i],V(e,o+v+1,t),u=k[o],u!==0&&(i-=B[o],X(e,i,u)),r--,o=z(r),V(e,o,n),u=L[o],u!==0&&(r-=j[o],X(e,r,u)));while(s<e.last_lit);V(e,x,t)}function it(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems,o,u,a=-1,f;e.heap_len=0,e.heap_max=b;for(o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=a=o,e.depth[o]=0):n[o*2+1]=0;while(e.heap_len<2)f=e.heap[++e.heap_len]=a<2?++a:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);t.max_code=a;for(o=e.heap_len>>1;o>=1;o--)nt(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],nt(e,n,1),u=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=u,n[f*2]=n[o*2]+n[u*2],e.depth[f]=(e.depth[o]>=e.depth[u]?e.depth[o]:e.depth[u])+1,n[o*2+1]=n[u*2+1]=f,e.heap[1]=f++,nt(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],K(e,t),Q(n,a,e.bl_count)}function st(e,t,n){var r,i=-1,s,o=t[1],u=0,a=7,f=4;o===0&&(a=138,f=3),t[(n+1)*2+1]=65535;for(r=0;r<=n;r++){s=o,o=t[(r+1)*2+1];if(++u<a&&s===o)continue;u<f?e.bl_tree[s*2]+=u:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[T*2]++):u<=10?e.bl_tree[N*2]++:e.bl_tree[C*2]++,u=0,i=s,o===0?(a=138,f=3):s===o?(a=6,f=3):(a=7,f=4)}}function ot(e,t,n){var r,i=-1,s,o=t[1],u=0,a=7,f=4;o===0&&(a=138,f=3);for(r=0;r<=n;r++){s=o,o=t[(r+1)*2+1];if(++u<a&&s===o)continue;if(u<f){do V(e,s,e.bl_tree);while(--u!==0)}else s!==0?(s!==i&&(V(e,s,e.bl_tree),u--),V(e,T,e.bl_tree),X(e,u-3,2)):u<=10?(V(e,N,e.bl_tree),X(e,u-3,3)):(V(e,C,e.bl_tree),X(e,u-11,7));u=0,i=s,o===0?(a=138,f=3):s===o?(a=6,f=3):(a=7,f=4)}}function ut(e){var t;st(e,e.dyn_ltree,e.l_desc.max_code),st(e,e.dyn_dtree,e.d_desc.max_code),it(e,e.bl_desc);for(t=y-1;t>=3;t--)if(e.bl_tree[O[t]*2+1]!==0)break;return e.opt_len+=3*(t+1)+5+5+4,t}function at(e,t,n,r){var i;X(e,t-257,5),X(e,n-1,5),X(e,r-4,4);for(i=0;i<r;i++)X(e,e.bl_tree[O[i]*2+1],3);ot(e,e.dyn_ltree,t-1),ot(e,e.dyn_dtree,n-1)}function ft(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return s;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return o;for(n=32;n<v;n++)if(e.dyn_ltree[n*2]!==0)return o;return s}function ct(e){lt||(G(),lt=!0),e.l_desc=new U(e.dyn_ltree,I),e.d_desc=new U(e.dyn_dtree,q),e.bl_desc=new U(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,Y(e)}function ht(e,t,n,r){X(e,(f<<1)+(r?1:0),3),et(e,t,n,!0)}function pt(e){X(e,l<<1,3),V(e,x,_),J(e)}function dt(e,t,n,r){var s,o,a=0;e.level>0?(e.strm.data_type===u&&(e.strm.data_type=ft(e)),it(e,e.l_desc),it(e,e.d_desc),a=ut(e),s=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=s&&(s=o)):s=o=n+5,n+4<=s&&t!==-1?ht(e,t,n,r):e.strategy===i||o===s?(X(e,(l<<1)+(r?1:0),3),rt(e,_,D)):(X(e,(c<<1)+(r?1:0),3),at(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),rt(e,e.dyn_ltree,e.dyn_dtree)),Y(e),r&&Z(e)}function vt(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(H[n]+v+1)*2]++,e.dyn_dtree[z(t)*2]++),e.last_lit===e.lit_bufsize-1}var r=e("../utils/common"),i=4,s=0,o=1,u=2,f=0,l=1,c=2,h=3,p=258,d=29,v=256,m=v+1+d,g=30,y=19,b=2*m+1,w=15,E=16,S=7,x=256,T=16,N=17,C=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,_=new Array((m+2)*2);a(_);var D=new Array(g*2);a(D);var P=new Array(M);a(P);var H=new Array(p-h+1);a(H);var B=new Array(d);a(B);var j=new Array(g);a(j);var I,q,R,lt=!1;n._tr_init=ct,n._tr_stored_block=ht,n._tr_flush_block=dt,n._tr_tally=vt,n._tr_align=pt},{"../utils/common":112}],122:[function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],123:[function(e,t,n){(function(e){"use strict";function n(t,n,r,i){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,o,u;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:o=new Array(s-1),u=0;while(u<o.length)o[u++]=arguments[u];return e.nextTick(function(){t.apply(null,o)})}}!e.version||e.version.indexOf("v0.")===0||e.version.indexOf("v1.")===0&&e.version.indexOf("v1.8.")!==0?t.exports=n:t.exports=e.nextTick}).call(this,e("_process"))},{_process:124}],124:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function f(e){if(s===clearTimeout)return clearTimeout(e);if((s===u||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}function d(){if(!c||!h)return;c=!1,h.length?l=h.concat(l):p=-1,l.length&&v()}function v(){if(c)return;var e=a(d);c=!0;var t=l.length;while(t){h=l,l=[];while(++p<t)h&&h[p].run();p=-1,t=l.length}h=null,c=!1,f(e)}function m(e,t){this.fun=e,this.array=t}function g(){}var r=t.exports={},i,s;(function(){try{typeof setTimeout=="function"?i=setTimeout:i=o}catch(e){i=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=u}catch(e){s=u}})();var l=[],c=!1,h,p=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),l.length===1&&!c&&a(v)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],125:[function(e,t,n){"use strict";function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){if(this.allowHalfOpen||this._writableState.ended)return;r(p,this)}function p(e){e.end()}function d(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}var r=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var s=e("core-util-is");s.inherits=e("inherits");var o=e("./_stream_readable"),u=e("./_stream_writable");s.inherits(c,o);var a=i(u.prototype);for(var f=0;f<a.length;f++){var l=a[f];c.prototype[l]||(c.prototype[l]=u.prototype[l])}Object.defineProperty(c.prototype,"destroyed",{get:function(){return this._readableState===undefined||this._writableState===undefined?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){if(this._readableState===undefined||this._writableState===undefined)return;this._readableState.destroyed=e,this._writableState.destroyed=e}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r(t,e)}},{"./_stream_readable":127,"./_stream_writable":129,"core-util-is":10,inherits:14,"process-nextick-args":123}],126:[function(e,t,n){"use strict";function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}t.exports=s;var r=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(s,r),s.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":128,"core-util-is":10,inherits:14}],127:[function(e,t,n){(function(n,r){"use strict";function h(e){return l.from(e)}function p(e){return l.isBuffer(e)||e instanceof c}function E(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}function S(t,n){o=o||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||r===0?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(b||(b=e("string_decoder/").StringDecoder),this.decoder=new b(t.encoding),this.encoding=t.encoding)}function x(t){o=o||e("./_stream_duplex");if(!(this instanceof x))return new x(t);this._readableState=new S(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),f.call(this)}function T(e,t,n,r,i){var s=e._readableState;if(t===null)s.reading=!1,M(e,s);else{var o;i||(o=C(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?(typeof t!="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==l.prototype&&(t=h(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):N(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||t.length!==0?N(e,s,t,!1):P(e,s)):N(e,s,t,!1))):r||(s.reading=!1)}return k(s)}function N(e,t,n,r){t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),P(e,t)}function C(e,t){var n;return!p(t)&&typeof t!="string"&&t!==undefined&&!e.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function k(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}function A(e){return e>=L?e=L:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function O(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=A(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i(D,e):D(e))}function D(e){m("emit readable"),e.emit("readable"),q(e)}function P(e,t){t.readingMore||(t.readingMore=!0,i(H,e,t))}function H(e,t){var n=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){m("maybeReadMore read 0"),e.read(0);if(n===t.length)break;n=t.length}t.readingMore=!1}function B(e){return function(){var t=e._readableState;m("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&a(e,"data")&&(t.flowing=!0,q(e))}}function j(e){m("readable nexttick read 0"),e.read(0)}function F(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i(I,e,t))}function I(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),q(e),t.flowing&&!t.reading&&e.read(0)}function q(e){var t=e._readableState;m("flow",t.flowing);while(t.flowing&&e.read()!==null);}function R(e,t){if(t.length===0)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(t.decoder?n=t.buffer.join(""):t.buffer.length===1?n=t.buffer.head.data:n=t.buffer.concat(t.length),t.buffer.clear()):n=U(e,t.buffer,t.decoder),n}function U(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?r=t.shift():r=n?z(e,t):W(e,t),r}function z(e,t){var n=t.head,r=1,i=n.data;e-=i.length;while(n=n.next){var s=n.data,o=e>s.length?s.length:e;o===s.length?i+=s:i+=s.slice(0,e),e-=o;if(e===0){o===s.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++r}return t.length-=r,i}function W(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;while(r=r.next){var s=r.data,o=e>s.length?s.length:e;s.copy(n,n.length-e,0,o),e-=o;if(e===0){o===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++i}return t.length-=i,n}function X(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i(V,t,e))}function V(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function $(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var i=e("process-nextick-args");t.exports=x;var s=e("isarray"),o;x.ReadableState=S;var u=e("events").EventEmitter,a=function(e,t){return e.listeners(t).length},f=e("./internal/streams/stream"),l=e("safe-buffer").Buffer,c=r.Uint8Array||function(){},d=e("core-util-is");d.inherits=e("inherits");var v=e("util"),m=void 0;v&&v.debuglog?m=v.debuglog("stream"):m=function(){};var g=e("./internal/streams/BufferList"),y=e("./internal/streams/destroy"),b;d.inherits(x,f);var w=["error","close","destroy","pause","resume"];Object.defineProperty(x.prototype,"destroyed",{get:function(){return this._readableState===undefined?!1:this._readableState.destroyed},set:function(e){if(!this._readableState)return;this._readableState.destroyed=e}}),x.prototype.destroy=y.destroy,x.prototype._undestroy=y.undestroy,x.prototype._destroy=function(e,t){this.push(null),t(e)},x.prototype.push=function(e,t){var n=this._readableState,r;return n.objectMode?r=!0:typeof e=="string"&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=l.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},x.prototype.unshift=function(e){return T(this,e,null,!0,!1)},x.prototype.isPaused=function(){return this._readableState.flowing===!1},x.prototype.setEncoding=function(t){return b||(b=e("string_decoder/").StringDecoder),this._readableState.decoder=new b(t),this._readableState.encoding=t,this};var L=8388608;x.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;e!==0&&(t.emittedReadable=!1);if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?X(this):_(this),null;e=O(e,t);if(e===0&&t.ended)return t.length===0&&X(this),null;var r=t.needReadable;m("need readable",r);if(t.length===0||t.length-e<t.highWaterMark)r=!0,m("length less than watermark",r);t.ended||t.reading?(r=!1,m("reading or ended",r)):r&&(m("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=O(n,t)));var i;return e>0?i=R(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&X(this)),i!==null&&this.emit("data",i),i},x.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},x.prototype.pipe=function(e,t){function f(e,t){m("onunpipe"),e===r&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,p())}function l(){m("onend"),e.end()}function p(){m("cleanup"),e.removeListener("close",y),e.removeListener("finish",b),e.removeListener("drain",c),e.removeListener("error",g),e.removeListener("unpipe",f),r.removeListener("end",l),r.removeListener("end",w),r.removeListener("data",v),h=!0,s.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}function v(t){m("ondata"),d=!1;var n=e.write(t);!1===n&&!d&&((s.pipesCount===1&&s.pipes===e||s.pipesCount>1&&J(s.pipes,e)!==-1)&&!h&&(m("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function g(t){m("onerror",t),w(),e.removeListener("error",g),a(e,"error")===0&&e.emit("error",t)}function y(){e.removeListener("finish",b),w()}function b(){m("onfinish"),e.removeListener("close",y),w()}function w(){m("unpipe"),r.unpipe(e)}var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,m("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,u=o?l:w;s.endEmitted?i(u):r.once("end",u),e.on("unpipe",f);var c=B(r);e.on("drain",c);var h=!1,d=!1;return r.on("data",v),E(e,"error",g),e.once("close",y),e.once("finish",b),e.emit("pipe",r),s.flowing||(m("pipe resume"),r.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,n);return this}var o=J(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},x.prototype.on=function(e,t){var n=f.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):i(j,this))}return n},x.prototype.addListener=x.prototype.on,x.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,F(this,e)),this},x.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},x.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){m("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){m("wrapped data"),t.decoder&&(i=t.decoder.write(i));if(!(!t.objectMode||i!==null&&i!==undefined))return;if(!t.objectMode&&(!i||!i.length))return;var s=r.push(i);s||(n=!0,e.pause())});for(var i in e)this[i]===undefined&&typeof e[i]=="function"&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<w.length;s++)e.on(w[s],r.emit.bind(r,w[s]));return r._read=function(t){m("wrapped _read",t),n&&(n=!1,e.resume())},r},x._fromList=R}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./_stream_duplex":125,"./internal/streams/BufferList":130,"./internal/streams/destroy":131,"./internal/streams/stream":132,_process:124,"core-util-is":10,events:12,inherits:14,isarray:16,"process-nextick-args":123,"safe-buffer":135,"string_decoder/":136,util:6}],128:[function(e,t,n){"use strict";function s(e){this.afterTransform=function(t,n){return o(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,n!==null&&n!==undefined&&e.push(n),i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);r.call(this,e),this._transformState=new s(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);n!==null&&n!==undefined&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=u;var r=e("./_stream_duplex"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(u,r),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},u.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t;if(!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},u.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":125,"core-util-is":10,inherits:14}],129:[function(e,t,n){(function(n,r){"use strict";function s(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){j(t,e)}}function d(e){return h.from(e)}function v(e){return h.isBuffer(e)||e instanceof p}function g(){}function y(t,n){a=a||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof a&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||r===0?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){L(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function w(t){a=a||e("./_stream_duplex");if(!b.call(w,this)&&!(this instanceof a))return new w(t);this._writableState=new y(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),c.call(this)}function E(e,t){var n=new Error("write after end");e.emit("error",n),i(t,n)}function S(e,t,n,r){var s=!0,o=!1;return n===null?o=new TypeError("May not write null values to stream"):typeof n!="string"&&n!==undefined&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),i(r,o),s=!1),s}function x(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=h.from(t,n)),t}function T(e,t,n,r,i,s){if(!n){var o=x(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var u=t.objectMode?1:r.length;t.length+=u;var a=t.length<t.highWaterMark;a||(t.needDrain=!0);if(t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else N(e,t,!1,u,r,i,s);return a}function N(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function C(e,t,n,r,s){--t.pendingcb,n?(i(s,r),i(H,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(s(r),e._writableState.errorEmitted=!0,e.emit("error",r),H(e,t))}function k(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function L(e,t){var n=e._writableState,r=n.sync,i=n.writecb;k(n);if(t)C(e,n,r,t,i);else{var s=_(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&M(e,n),r?u(A,e,n,s,i):A(e,n,s,i)}}function A(e,t,n,r){n||O(e,t),t.pendingcb--,r(),H(e,t)}function O(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;var u=0,a=!0;while(n)i[u]=n,n.isBuf||(a=!1),n=n.next,u+=1;i.allBuffers=a,N(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t)}else{while(n){var f=n.chunk,l=n.encoding,c=n.callback,h=t.objectMode?1:f.length;N(e,t,!1,h,f,l,c),n=n.next;if(t.writing)break}n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function D(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),H(e,t)})}function P(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,i(D,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function H(e,t){var n=_(t);return n&&(P(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),n}function B(e,t,n){t.ending=!0,H(e,t),n&&(t.finished?i(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function j(e,t,n){var r=e.entry;e.entry=null;while(r){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var i=e("process-nextick-args");t.exports=w;var u=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:i,a;w.WritableState=y;var f=e("core-util-is");f.inherits=e("inherits");var l={deprecate:e("util-deprecate")},c=e("./internal/streams/stream"),h=e("safe-buffer").Buffer,p=r.Uint8Array||function(){},m=e("./internal/streams/destroy");f.inherits(w,c),y.prototype.getBuffer=function(){var t=this.bufferedRequest,n=[];while(t)n.push(t),t=t.next;return n},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var b;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return b.call(this,e)?!0:e&&e._writableState instanceof y}})):b=function(e){return e instanceof this},w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},w.prototype.write=function(e,t,n){var r=this._writableState,i=!1,s=v(e)&&!r.objectMode;s&&!h.isBuffer(e)&&(e=d(e)),typeof t=="function"&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),typeof n!="function"&&(n=g);if(r.ended)E(this,n);else if(s||S(this,r,e,n))r.pendingcb++,i=T(this,r,s,e,t,n);return i},w.prototype.cork=function(){var e=this._writableState;e.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&M(this,e))},w.prototype.setDefaultEncoding=function(t){typeof t=="string"&&(t=t.toLowerCase());if(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1)return this._writableState.defaultEncoding=t,this;throw new TypeError("Unknown encoding: "+t)},w.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},w.prototype._writev=null,w.prototype.end=function(e,t,n){var r=this._writableState;typeof e=="function"?(n=e,e=null,t=null):typeof t=="function"&&(n=t,t=null),e!==null&&e!==undefined&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),!r.ending&&!r.finished&&B(this,r,n)},Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState===undefined?!1:this._writableState.destroyed},set:function(e){if(!this._writableState)return;this._writableState.destroyed=e}}),w.prototype.destroy=m.destroy,w.prototype._undestroy=m.undestroy,w.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./_stream_duplex":125,"./internal/streams/destroy":131,"./internal/streams/stream":132,_process:124,"core-util-is":10,inherits:14,"process-nextick-args":123,"safe-buffer":135,"util-deprecate":137}],130:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n){e.copy(t,n)}var i=e("safe-buffer").Buffer;t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length===0)return;var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(this.length===0)return"";var n=this.head,r=""+n.data;while(n=n.next)r+=t+n.data;return r},e.prototype.concat=function(t){if(this.length===0)return i.alloc(0);if(this.length===1)return this.head.data;var n=i.allocUnsafe(t>>>0),r=this.head,o=0;while(r)s(r.data,n,o),o+=r.data.length,r=r.next;return n},e}()},{"safe-buffer":135}],131:[function(e,t,n){"use strict";function i(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;if(i||s){t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&r(o,this,e);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var r=e("process-nextick-args");t.exports={destroy:i,undestroy:s}},{"process-nextick-args":123}],132:[function(e,t,n){t.exports=e("events").EventEmitter},{events:12}],133:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":125,"./lib/_stream_passthrough.js":126,"./lib/_stream_readable.js":127,"./lib/_stream_transform.js":128,"./lib/_stream_writable.js":129}],134:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":133}],135:[function(e,t,n){function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}var r=e("buffer"),i=r.Buffer;i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=
r:(s(r,n),n.Buffer=o),s(i,o),o.from=function(e,t,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=i(e);return t!==undefined?typeof n=="string"?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:9}],136:[function(e,t,n){"use strict";function s(e){if(!e)return"utf8";var t;for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=s(e);if(typeof t=="string"||r.isEncoding!==i&&!!i(e))return t||e;throw new Error("Unknown encoding: "+e)}function u(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=d,this.end=v,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=m,this.end=g,t=3;break;default:this.write=y,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function f(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=a(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=a(t[r]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function l(e,t,n){if((t[0]&192)!==128)return e.lastNeed=0,"".repeat(n);if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"".repeat(n+1);if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"".repeat(n+2)}}function c(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);if(n!==undefined)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function h(e,t){var n=f(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t}function d(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function v(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function m(e,t){var n=(e.length-t)%3;return n===0?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=u,u.prototype.write=function(e){if(e.length===0)return"";var t,n;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},u.prototype.end=p,u.prototype.text=h,u.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":135}],137:[function(e,t,n){(function(e){function n(e,t){function i(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var n=!1;return i}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null==r?!1:String(r).toLowerCase()==="true"}t.exports=n}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],138:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{dup:14}],139:[function(e,t,n){t.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}},{}],140:[function(e,t,n){(function(t,r){function u(e,t){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(t)?r.showHidden=t:t&&n._extend(r,t),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function f(e,t){return e}function l(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return S(i)||(i=c(e,i,r)),i}var s=h(e,t);if(s)return s;var o=Object.keys(t),u=l(o);e.showHidden&&(o=Object.getOwnPropertyNames(t));if(L(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(t);if(o.length===0){if(A(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(N(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return p(t)}var f="",y=!1,b=["{","}"];g(t)&&(y=!0,b=["[","]"]);if(A(t)){var w=t.name?": "+t.name:"";f=" [Function"+w+"]"}N(t)&&(f=" "+RegExp.prototype.toString.call(t)),k(t)&&(f=" "+Date.prototype.toUTCString.call(t)),L(t)&&(f=" "+p(t));if(o.length!==0||!!y&&t.length!=0){if(r<0)return N(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return y?E=d(e,t,r,u,o):E=o.map(function(n){return v(e,t,r,u,n,y)}),e.seen.pop(),m(E,f,b)}return b[0]+f+b[1]}function h(e,t){if(T(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(E(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){var s=[];for(var o=0,u=t.length;o<u;++o)H(t,String(o))?s.push(v(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(v(e,t,n,r,i,!0))}),s}function v(e,t,n,r,i,s){var o,u,a;a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?a.set?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),H(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(b(n)?u=c(e,a.value,null):u=c(e,a.value,n-1),u.indexOf("\n")>-1&&(s?u=u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):u="\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special"));if(T(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function m(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function g(e){return Array.isArray(e)}function y(e){return typeof e=="boolean"}function b(e){return e===null}function w(e){return e==null}function E(e){return typeof e=="number"}function S(e){return typeof e=="string"}function x(e){return typeof e=="symbol"}function T(e){return e===void 0}function N(e){return C(e)&&M(e)==="[object RegExp]"}function C(e){return typeof e=="object"&&e!==null}function k(e){return C(e)&&M(e)==="[object Date]"}function L(e){return C(e)&&(M(e)==="[object Error]"||e instanceof Error)}function A(e){return typeof e=="function"}function O(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}function M(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=/%[sdj%]/g;n.format=function(e){if(!S(e)){var t=[];for(var n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}var n=1,r=arguments,s=r.length,o=String(e).replace(i,function(e){if(e==="%%")return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"};default:return e}});for(var a=r[n];n<s;a=r[++n])b(a)||!C(a)?o+=" "+a:o+=" "+u(a);return o},n.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(T(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var s={},o;n.debuglog=function(e){T(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase();if(!s[e])if((new RegExp("\\b"+e+"\\b","i")).test(o)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=g,n.isBoolean=y,n.isNull=b,n.isNullOrUndefined=w,n.isNumber=E,n.isString=S,n.isSymbol=x,n.isUndefined=T,n.isRegExp=N,n.isObject=C,n.isDate=k,n.isError=L,n.isFunction=A,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!C(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":139,_process:124,inherits:138}],141:[function(e,t,n){var r=e("./v1"),i=e("./v4"),s=i;s.v1=r,s.v4=i,t.exports=s},{"./v1":144,"./v4":145}],142:[function(e,t,n){function s(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}var r=[];for(var i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);t.exports=s},{}],143:[function(e,t,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var s=new Array(16);n=function(){for(var e=0,t;e<16;e++)(e&3)===0&&(t=Math.random()*4294967296),s[e]=t>>>((e&3)<<3)&255;return s}}t.exports=n}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],144:[function(e,t,n){function l(e,t,n){var r=t&&n||0,s=t||[];e=e||{};var l=e.clockseq!==undefined?e.clockseq:u,c=e.msecs!==undefined?e.msecs:(new Date).getTime(),h=e.nsecs!==undefined?e.nsecs:f+1,p=c-a+(h-f)/1e4;p<0&&e.clockseq===undefined&&(l=l+1&16383),(p<0||c>a)&&e.nsecs===undefined&&(h=0);if(h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=c,f=h,u=l,c+=122192928e5;var d=((c&268435455)*1e4+h)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var v=c/4294967296*1e4&268435455;s[r++]=v>>>8&255,s[r++]=v&255,s[r++]=v>>>24&15|16,s[r++]=v>>>16&255,s[r++]=l>>>8|128,s[r++]=l&255;var m=e.node||o;for(var g=0;g<6;++g)s[r+g]=m[g];return t?t:i(s)}var r=e("./lib/rng"),i=e("./lib/bytesToUuid"),s=r(),o=[s[0]|1,s[1],s[2],s[3],s[4],s[5]],u=(s[6]<<8|s[7])&16383,a=0,f=0;t.exports=l},{"./lib/bytesToUuid":142,"./lib/rng":143}],145:[function(e,t,n){function s(e,t,n){var s=t&&n||0;typeof e=="string"&&(t=e=="binary"?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||r)();o[6]=o[6]&15|64,o[8]=o[8]&63|128;if(t)for(var u=0;u<16;++u)t[s+u]=o[u];return t||i(o)}var r=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=s},{"./lib/bytesToUuid":142,"./lib/rng":143}],"node-jose":[function(e,t,n){"use strict";typeof Promise=="undefined"&&e("es6-promise").polyfill(),t.exports={JWA:e("./algorithms"),JWE:e("./jwe"),JWK:e("./jwk"),JWS:e("./jws"),util:e("./util"),parse:e("./parse")}},{"./algorithms":71,"./jwe":90,"./jwk":95,"./jws":101,"./parse":105,"./util":109,"es6-promise":11}]},{},[]);